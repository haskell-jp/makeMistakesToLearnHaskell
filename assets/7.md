# å‹ã‚¯ãƒ©ã‚¹ã§è‡ªåˆ†ãŒä½œã£ãŸå‹ã‚’æ‹¡å¼µã™ã‚‹

èª²é¡Œ6ã§ä½œã£ãŸãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’å…ƒã«ã€æ¬¡ã®ã‚ˆã†ãªãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’æ›¸ãã¾ã—ã‚‡ã†ã€‚

1. æ¨™æº–å…¥åŠ›ã‹ã‚‰2è¡Œã®å…¥åŠ›ã‚’å—ã‘å–ã‚Šã¾ã™ã€‚
2. 1è¡Œç›®ã¯ã€Œåˆ†é¡ã€ã‚’è¡¨ã™æ–‡å­—åˆ—ã¨ã—ã¦è§£é‡ˆã—ã¾ã™ã€‚
3. 2è¡Œç›®ã¯ã€Œé‡‘é¡ã€ã‚’è¡¨ã™æ•´æ•°ã¨ã—ã¦è§£é‡ˆã—ã¾ã™ã€‚
4. ãã‚Œãã‚Œã‚’`Entry`å‹ã®å€¤ã¨ã—ã¦ã¾ã¨ã‚ã¾ã™ã€‚
5. ã¾ã¨ã‚ãŸå€¤ã‚’**ãƒ‡ãƒãƒƒã‚°æ™‚ã«ç‰¹ã«ä¾¿åˆ©ãªæ–¹æ³•ã§**æ¨™æº–å‡ºåŠ›ã«å‡ºåŠ›ã—ã¦ãã ã•ã„ã€‚

## å¿…è¦ãªçŸ¥è­˜

å†’é ­ã®ã¨ãŠã‚Šä»Šå›ã¯èª²é¡Œ6ã§ä½œã£ãŸãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’å…ƒã«ä½œã‚‹ã“ã¨ã«ãªã‚‹ã®ã§ã€ä¸‹è¨˜ã®çŸ¥è­˜ã¯æ—¢çŸ¥ã®ã‚‚ã®ã¨ã—ã¦çœç•¥ã—ã¾ã™ã€‚  

- `getLine`ã§æ¨™æº–å…¥åŠ›ã‹ã‚‰1è¡Œãšã¤èª­ã¿å‡ºã™
- `read`ã§å…¥åŠ›ã‚’æ•°å€¤ã«å¤‰æ›ã™ã‚‹
- è‡ªåˆ†ã§ãƒ¬ã‚³ãƒ¼ãƒ‰å‹ã‚’å®šç¾©ã™ã‚‹

ä½œã‚‹ã¨ãã‚‚ã‚³ãƒ”ãƒšã—ã¡ã‚ƒã£ã¦ã‹ã‚‰ä½œã‚‹ã®ãŒãŠã™ã™ã‚ã§ã™ï¼

### `deriving`ã§å‹ã‚¯ãƒ©ã‚¹ã®å®Ÿè£…ã‚’è‡ªå‹•ã§å®šç¾©ã™ã‚‹

ã€Œ5. ã¾ã¨ã‚ãŸå€¤ã‚’**ãƒ‡ãƒãƒƒã‚°æ™‚ã«ç‰¹ã«ä¾¿åˆ©ãªæ–¹æ³•ã§**æ¨™æº–å‡ºåŠ›ã«å‡ºåŠ›ã—ã¦ãã ã•ã„ã€ã®ã€Œãƒ‡ãƒãƒƒã‚°æ™‚ã«ç‰¹ã«ä¾¿åˆ©ãªæ–¹æ³•ã€ã¨ã¯ãªã‚“ã§ã—ã‚‡ã†ï¼Ÿ  
ã“ã“ã§ã¯ãã‚Œã¯ã€`print`é–¢æ•°ã§å‡ºåŠ›ã™ã‚‹ã“ã¨ã‚’æŒ‡ã—ã¾ã™ã€‚  
ãã†ã€ã¿ã‚“ãªå¤§å¥½ãprintãƒ‡ãƒãƒƒã‚°ã‚’ã™ã‚‹ã¨ãã«ã€`Entry`å‹ã‚’ç°¡å˜ã«æ‰±ãˆã‚‹ã‚ˆã†ã«ã™ã‚‹ã®ãŒä»Šå›ã®èª²é¡Œã®ç›®çš„ã§ã™ï¼

çµè«–ã‹ã‚‰è¨€ã†ã¨ã€èª²é¡Œ6ã§æ›¸ã„ãŸä¸‹è¨˜ã®`data`å®£è¨€ã«ã€

```haskell
data Entry =
  Entry
  { category :: String
  , price :: Integer
  }
```

æ¬¡ã®ã‚ˆã†ã«`deriving Show`ã¨ã„ã†é­”æ³•ã®ãƒ•ãƒ¬ãƒ¼ã‚ºã‚’è¿½è¨˜ã—ã¦ãã ã•ã„ã€‚ãŸã£ãŸãã‚Œã ã‘ã§ã™ã€‚

```haskell
data Entry = Entry
  { category :: String
  , price :: Integer
  } deriving Show
```

æ—©é€ŸGHCiã«ã‚‚å…¥åŠ›ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚  
å‰ã®èª²é¡Œã§ç¿’ã£ãŸ`:{`ã¨`:}`ã‚’ä½¿ã†ã®ã‚’å¿˜ã‚Œãªã„ã§ãã ã•ã„ã­ï¼

```haskell
ghci> :{
ghci| data Entry = Entry
ghci|   { category :: String
ghci|   , price :: Integer
ghci|   } deriving Show
ghci| :}
ghci>
```

```haskell
ghci> print (Entry "Food" 150)
Entry {category = "Food", price = 150}
```

å‡ºæ¥ã¾ã—ãŸï¼ğŸ‰

çš†ã•ã‚“ãŒå…¥åŠ›ã—ãŸå¼ã‚’æ¨™æº–å‡ºåŠ›ã«æ›¸ãè¾¼ã‚€éš›ã«GHCiãŒä½¿ç”¨ã—ã¦ã„ã‚‹ã®ãŒ`print`é–¢æ•°ãªã®ã§ã€è‡ªåˆ†ã§`print`ã‚’æ›¸ã‹ãªãã¨ã‚‚ã€åŒã˜çµæœã«ãªã‚Šã¾ã™ã€‚

```haskell
ghci> Entry "Food" 150
Entry {category = "Food", price = 150}
```

`deriving Show`ã‚’ã¤ã‘ã¦ã„ãªã‹ã£ãŸå ´åˆã€ã¤ã¾ã‚Šã€å‰ã®èª²é¡Œã§`Entry`å‹ã®å€¤ã‚’å…¥åŠ›ã—ã¦ã„ãŸã¨ãã¯ã€æ¬¡ã®ã‚ˆã†ãªå‹ã‚¨ãƒ©ãƒ¼ã«ãªã£ã¦ã„ã¾ã—ãŸã€‚

```haskell
ghci> Entry "Magazine" 120

<interactive>:8:1: error:
    â€¢ No instance for (Show Entry) arising from a use of â€˜printâ€™
    â€¢ In a stmt of an interactive GHCi command: print it
```

ã“ã®ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®è‚ã¨ãªã‚‹ç®‡æ‰€ã¯`No instance for (Show Entry) arising from a use of â€˜printâ€™`ã¨ã„ã†è¡Œã§ã™ã€‚  
ã“ã‚Œã¯ã€ã€Œ`Entry`å‹ã¯`Show`å‹ã‚¯ãƒ©ã‚¹ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã§ã¯ãªã„ã®ã§ã€`print`é–¢æ•°ã«æ¸¡ã™ã“ã¨ã¯å‡ºæ¥ãªã„ã‚ˆï¼ã€ã¨ã„ã†ã‚¨ãƒ©ãƒ¼ã§ã™ã€‚

### å‹ã‚¯ãƒ©ã‚¹ã¨ã¯ï¼Ÿ

å‹ã‚¯ãƒ©ã‚¹ã¯ã€ä¸€è¨€ã§è¨€ã†ã¨ã€ŒåŒã˜ã‚ˆã†ãªç‰¹å¾´ï¼ˆæŒ¯ã‚‹èˆã„ï¼‰ã‚’æŒã£ãŸå‹ã‚’ã€ã¾ã¨ã‚ã¦æ‰±ãˆã‚‹ã‚ˆã†ã«ã™ã‚‹ä»•çµ„ã¿ã€ã§ã™ã€‚  
ä»–ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°è¨€èªã§è¨€ã†ã¨ã€ã€Œã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ã‚¤ã‚¹ã€ã¨ã‹ã€ã€Œãƒ—ãƒ­ãƒˆã‚³ãƒ«ã€ã¨ã„ã£ãŸä»•çµ„ã¿ã¨ã¡ã‚‡ã£ã¨ä¼¼ã¦ã„ã¾ã™ã€‚  
ã‚ã‚‹å‹ã‚¯ãƒ©ã‚¹ãŒè¡¨ã™ç‰¹å¾´ã‚’å‚™ãˆãŸå‹ã‚’ã€ãã®å‹ã‚¯ãƒ©ã‚¹ã®ã€Œã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã€ã¨å‘¼ã³ã¾ã™ã€‚  
è‡ªåˆ†ãŒä½œã£ãŸå‹ã‚’ã€Œå‹ã‚¯ãƒ©ã‚¹ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã«ã™ã‚‹ã€ã“ã¨ã§ã€ãã®å‹ã‚¯ãƒ©ã‚¹ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã®å€¤ã‚’å—ã‘å–ã‚‹é–¢æ•°ãŒã€ã™ã¹ã¦å†åˆ©ç”¨ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

ä¾‹ãˆã°ã€ä»Šå›å‡ºã¦ããŸ`Show`å‹ã‚¯ãƒ©ã‚¹ã¯ã€ã€Œï¼ˆä¸»ã«ãƒ‡ãƒãƒƒã‚°å‘ã‘ã®ï¼‰æ–‡å­—åˆ—ã«å¤‰æ›ã§ãã‚‹ã€ã¨ã„ã†ç‰¹å¾´ã‚’å‚™ãˆãŸå‹ã‚’ã¾ã¨ã‚ã¦ã„ã¾ã™ã€‚  
ã“ã‚Œã¾ã§ã«ç´¹ä»‹ã—ãŸå‹ã‚’å§‹ã‚ã€Haskellã«ãŠã‘ã‚‹å¤šãã®å‹ã¯ã“ã®`Show`å‹ã‚¯ãƒ©ã‚¹ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã¨ãªã£ã¦ã„ã¾ã™ã€‚  
çš†ã•ã‚“ãŒä½œã£ãŸå‹ï¼ˆä»Šå›ã®å ´åˆ`Entry`å‹ï¼‰ã‚’`Show`å‹ã‚¯ãƒ©ã‚¹ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã«ã™ã‚‹ã“ã¨ã§ã€`print`é–¢æ•°ãªã©ã®ã€ã€Œæ–‡å­—åˆ—ã«å¤‰æ›ã§ãã‚‹ã€ã¨ã„ã†ç‰¹å¾´ã‚’ä½¿ã£ãŸé–¢æ•°ã‚’å†åˆ©ç”¨ã§ãã‚‹ã‚ˆã†ã«ãªã‚‹ã®ã§ã™ã€‚

ä»Šã®è©±ã‚’ã•ã‚‰ã«å…·ä½“çš„ã«çŸ¥ã‚‹ãŸã‚ã«ã€`Show`å‹ã‚¯ãƒ©ã‚¹ã®å®šç¾©ã‚’è¦‹ã¦ã€å®Ÿéš›ã«ãã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’å®šç¾©ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚

GHCiã«`:i Show`ã¨å…¥åŠ›ã™ã‚‹ã“ã¨ã§ã€`Show`å‹ã‚¯ãƒ©ã‚¹ã®å®šç¾©ã¨ã€`Show`å‹ã‚¯ãƒ©ã‚¹ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã®ä¸€è¦§ã‚’è¦‹ã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚

```haskell
ghci> :i Show
class Show a where
  showsPrec :: Int -> a -> ShowS
  show :: a -> String
  showList :: [a] -> ShowS
  {-# MINIMAL showsPrec | show #-}
        -- Defined in â€˜GHC.Showâ€™
instance [safe] Show Entry -- Defined at <interactive>:6:14
-- ... çœç•¥
ghci>
```

éå¸¸ã«é•·ã„å‡ºåŠ›ãŒå‡ºã¾ã—ãŸãŒã€é‡è¦ãªã®ã¯ã€å†’é ­ã®`class Show a where`ã§å§‹ã¾ã‚‹è¡Œã‹ã‚‰ã€`instance [safe] Show Entry`ã§å§‹ã¾ã‚‹è¡Œã¾ã§ã§ã™ã€‚

ã¾ãšã€`class Show a where`ã§å§‹ã¾ã‚‹è¡Œã‹ã‚‰ã€ã‚¤ãƒ³ãƒ‡ãƒ³ãƒˆã•ã‚Œã¦ã„ã‚‹è¡Œã€ã¤ã¾ã‚Š`-- Defined in â€˜GHC.Showâ€™`ã¨ã„ã†è¡Œã¾ã§ãŒã€`Show`å‹ã‚¯ãƒ©ã‚¹ã®å®šç¾©ã§ã™ï¼ˆHaskellã®å¤šãã®æ§‹æ–‡ã¯ã€ã‚¤ãƒ³ãƒ‡ãƒ³ãƒˆã§ç¯„å›²ã‚’ç¤ºã™ã¨ã„ã†ã®ã‚’æ€ã„å‡ºã—ã¦ãã ã•ã„ï¼‰ã€‚  
æœ€åˆã®`class Show a where`ã¯ã€ã€Œä»Šã‹ã‚‰`Show`ã¨è¨€ã†åå‰ã®å‹ã‚¯ãƒ©ã‚¹ã‚’å®£è¨€ã—ã¾ã™ã‚ˆã€‚ãã‚Œã¯ã©ã‚“ãªã®ã‹ã¨ã„ã†ã¨ã­...ã€ã¨ã„ã†æ„å‘³ã§ã™ã€‚  
ãã®æ¬¡ã®3è¡Œã€ã¤ã¾ã‚Š`showsPrec`ã€`show`ã€`showList`ã§å§‹ã¾ã‚‹è¡ŒãŒã€å‹ã‚¯ãƒ©ã‚¹ã®ã€Œãƒ¡ã‚½ãƒƒãƒ‰ã€ã¨ãã®å‹ã‚’å®£è¨€ã—ã¦ã„ã‚‹è¡Œã§ã™ã€‚

å‹ã‚¯ãƒ©ã‚¹ã®ãƒ¡ã‚½ãƒƒãƒ‰ã¨ã¯ã€ãã®å‹ã‚¯ãƒ©ã‚¹ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã€ã™ãªã‚ã¡ãã®å‹ã‚¯ãƒ©ã‚¹ãŒè¡¨ã™ç‰¹å¾´ã‚’å‚™ãˆãŸå‹ã«ã¯ã€ã€Œã“ã‚“ãªé–¢æ•°ã‚’é©ç”¨ã™ã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã™ã‚ˆã€ã¨ã„ã†é–¢æ•°ã§ã™ã€‚  
ã‚ã‚‹å‹ã‚’å‹ã‚¯ãƒ©ã‚¹ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã«ã™ã‚‹ã«ã¯ã€ã“ã‚Œã‚‰ã®ã€Œãƒ¡ã‚½ãƒƒãƒ‰ã€ã¨å‘¼ã°ã‚Œã‚‹é–¢æ•°ã®ä¸­èº«ã‚’å®Ÿè£…ã—ãªã„ã¨ã„ã‘ã¾ã›ã‚“ã€‚  
Javaãªã©ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°è¨€èªã«ãŠã‘ã‚‹ã€Œã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ã‚¤ã‚¹ã€ã‚’ã”å­˜ã˜ã®æ–¹ã¯ã€ã“ã‚ŒãŒã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ã‚¤ã‚¹ã®ãƒ¡ã‚½ãƒƒãƒ‰ã¨åŒã˜ç‰¹å¾´ã§ã‚ã‚‹ã“ã¨ã«ãŠæ°—ã¥ãã§ã—ã‚‡ã†ã€‚ã‚„ã£ã±ã‚Šä¼¼ã¦ã¾ã™ã‚ˆã­ã€‚

ã•ã‚‰ã«æ¬¡ã®è¡Œ`{-# MINIMAL showsPrec | show #-}`ã¯ã€ç‰¹åˆ¥ãªã‚³ãƒ¡ãƒ³ãƒˆã§ã™ã€‚  
å…ˆã»ã©ã€Œã‚ã‚‹å‹ã‚’å‹ã‚¯ãƒ©ã‚¹ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã«ã™ã‚‹ã«ã¯ã€ã€ãƒ¡ã‚½ãƒƒãƒ‰ã€ã¨å‘¼ã°ã‚Œã‚‹é–¢æ•°ã®ä¸­èº«ã‚’å®Ÿè£…ã—ãªã„ã¨ã„ã‘ãªã„ã€ã¨è¿°ã¹ã¾ã—ãŸã€‚  
å®Ÿéš›ã«ã¯ã€ã“ã®`{-# MINIMAL ... #-}`ã¨ã„ã†ç‰¹åˆ¥ãªã‚³ãƒ¡ãƒ³ãƒˆã§å®£è¨€ã•ã‚ŒãŸãƒ¡ã‚½ãƒƒãƒ‰ã®ã¿ã‚’å®Ÿè£…ã—ã¦ãŠãã ã‘ã§ã‚ˆã„ã“ã¨ã«ãªã£ã¦ã„ã¾ã™ã€‚  
`{-# MINIMAL ... #-}`ã®è©³ç´°ãªæ§‹æ–‡ã¯å‰²æ„›ã—ã¾ã™ãŒã€ã“ã®å ´åˆ`showsPrec`ã‹`show`ã®ã€Œã©ã¡ã‚‰ã‹ä¸€æ–¹ã€ã®ã¿ã‚’å®Ÿè£…ã™ã‚Œã°ã‚ˆã„ã§ã™ã€‚  
`showList`ãŒå®Ÿè£…ã•ã‚Œãªã„å ´åˆã¯ã©ã†ãªã‚‹ã®ã‹ã¨ã„ã†ã¨ã€`showsPrec`ãƒ¡ã‚½ãƒƒãƒ‰ã‚„`show`ãƒ¡ã‚½ãƒƒãƒ‰ã®å®Ÿè£…ã‚’åˆ©ç”¨ã—ã¦è‡ªå‹•ã§å®Ÿè£…ã•ã‚Œã¾ã™ã€‚

ã‚ã¨ã€`-- Defined in â€˜GHC.Showâ€™`ã¨ã„ã†ã®ã¯`:i`ã‚³ãƒãƒ³ãƒ‰ãŒå‡ºã—ãŸãŸã ã®ï¼ˆãªã‚“ã‚‰ç‰¹åˆ¥ãªæ„å‘³ã‚‚ãªã„ï¼‰ã‚³ãƒ¡ãƒ³ãƒˆã§ã™ã€‚å‹ã‚¯ãƒ©ã‚¹ãŒå®Ÿéš›ã«å®šç¾©ã•ã‚Œã¦ã„ã‚‹å ´æ‰€ãŒæ›¸ã‹ã‚Œã¦ã„ã¾ã™ã€‚

ç¶šã„ã¦ã€`instance [safe] Show Entry`ã¨æ›¸ã‹ã‚Œã¦ã„ã‚‹è¡ŒãŒã€ã€Œ`Entry`å‹ã¯`Show`å‹ã‚¯ãƒ©ã‚¹ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã ã‚ˆã€ã¨ã„ã†æ„å‘³ã®å®£è¨€ã§ã™ã€‚ãã‚Œä»¥ä¸Šã®æ„å‘³ã¯ç‰¹ã«ã‚ã‚Šã¾ã›ã‚“ã€‚

### è‡ªåˆ†ã§ä½œã£ãŸå‹ã‚’å‹ã‚¯ãƒ©ã‚¹ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã«ã™ã‚‹

#### ãã®1. æ¥½ãªæ–¹æ³•

ãã‚Œã§ã¯ã€å®Ÿéš›ã«`Entry`å‹ãŒã€ã©ã®ã‚ˆã†ã«`Show`å‹ã‚¯ãƒ©ã‚¹ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã«ãªã£ã¦ã„ã‚‹ã‹è¦‹ã‚‹ãŸã‚ã«ã€`Entry`å‹ã‚’`Show`å‹ã‚¯ãƒ©ã‚¹ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã«ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚  
ã¾ãšã¯æœ€ã‚‚ç°¡å˜ãªæ–¹æ³•ã§ã™ã€‚

... ã¨ã€å®Ÿã¯ãã‚Œã¯ã™ã§ã«ç´¹ä»‹ã—ã¾ã—ãŸã€‚  
ãã†ã€å…ˆã»ã©ã®`Entry`å‹ã®å®šç¾©

```haskell
data Entry = Entry
  { category :: String
  , price :: Integer
  } deriving Show
```

ã«è¿½è¨˜ã—ãŸ`deriving Show`ã€ã“ã‚Œã‚’æ›¸ãã ã‘ã§ã™ã€‚  
Haskellã®ä»•æ§˜ä¸Šã€`Show`å‹ã‚¯ãƒ©ã‚¹ã®ã‚ˆã†ãªã€ç‰¹ã«ã‚ˆãä½¿ã‚ã‚Œã‚‹å‹ã‚¯ãƒ©ã‚¹ã¯ã€å‹ã‚’å®šç¾©ã™ã‚‹éš›ã«`deriving Show`ã¨æ›¸ãã ã‘ã§ã€è‡ªå‹•çš„ã«ãã®å‹ã‚’ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã«ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ã€‚  
Haskellã¯`deriving Show`ã•ã‚ŒãŸå‹ã®å®šç¾© --- ã©ã‚“ãªå€¤ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ãƒ¼ã‚’å®šç¾©ã—ã¦ã©ã‚“ãªãƒ¬ã‚³ãƒ¼ãƒ‰ãƒ©ãƒ™ãƒ«ã«ã©ã‚“ãªå‹ã‚’ç´ä»˜ã‘ã¦ã„ã‚‹ã‹ --- ã‚’è¦‹ã¦ã€`show`ãƒ¡ã‚½ãƒƒãƒ‰ã‚„`showsPrec`ãƒ¡ã‚½ãƒƒãƒ‰ãªã©ã®å®Ÿè£…ã‚’è‡ªå‹•ã§ç”Ÿæˆã—ã¦ãã‚Œã¾ã™ã€‚  
å®Ÿéš›ã«ã©ã®ã‚ˆã†ãªã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã§ç”Ÿæˆã—ã¦ã„ã‚‹ã®ã‹ã¯ã€ã€ŒHaskell 2010 Language Reportã€ã¨ã„ã†Haskellã®ã€Œæ¨™æº–ã®ä»•æ§˜ã€ã‚’ã¾ã¨ã‚ãŸã‚µã‚¤ãƒˆã®[11ç« ][1]ã«è¼‰ã£ã¦ã„ã¾ã™ã€‚  
ã¾ã ã“ã®å…¥é–€ã§ç´¹ä»‹ã—ã¦ã„ãªã„çŸ¥è­˜ãŒå¿…è¦ãªä¸Šã€ã‹ãªã‚Šé›£ã—ã„æ›¸ãæ–¹ãŒã•ã‚Œã¦ã„ã¾ã™ã®ã§ã€ãƒãƒ£ãƒ¬ãƒ³ã‚¸ã—ã¦ã¿ãŸã„æ–¹ã¯èª­ã‚“ã§ã¿ã¦ãã ã•ã„ã€‚

[1]: https://www.haskell.org/onlinereport/haskell2010/haskellch11.html

#### ãã®2. é¢å€’ã ã‘ã©ãŠã‚‚ã—ã‚ã„æ–¹æ³•

ã‚‚ã¡ã‚ã‚“ã€`show`ãƒ¡ã‚½ãƒƒãƒ‰ã‚„`showsPrec`ãƒ¡ã‚½ãƒƒãƒ‰ã®å®Ÿè£…ã‚’è‡ªåˆ†ã§æ›¸ãã“ã¨ã§ã€`Show`å‹ã‚¯ãƒ©ã‚¹ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã«ã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚  
è‡ªåˆ†ã§ãƒ¡ã‚½ãƒƒãƒ‰ã®å®Ÿè£…ã‚’æ›¸ã„ã¦ã¿ã‚‹ã“ã¨ã§ã€å‹ã‚¯ãƒ©ã‚¹ã«å¯¾ã™ã‚‹ç†è§£ãŒã‚ˆã‚Šæ·±ã¾ã‚‹ã§ã—ã‚‡ã†ã€‚  
ä¾‹ã«ã‚ˆã£ã¦ä»Šå›ã®èª²é¡Œã‚’è§£ããŸã‚ã«å¿…é ˆãªçŸ¥è­˜ã§ã¯ãªã„ã®ã§ã€é¢å€’ãã•ã„ã¨ã„ã†æ–¹ã¯é£›ã°ã—ã¡ã‚ƒã£ã¦ãã ã•ã„ã€‚

ã‚„ã‚Šæ–¹ã‚’èª¬æ˜ã™ã‚‹å‰ã«ã€æ–°ã—ã„ï¼ˆ`deriving Show`ã—ã¦ã„ãªã„ï¼‰`Entry2`ã¨ã„ã†å‹ã‚’å®šç¾©ã—ã¦ãŠãã¾ã—ã‚‡ã†ã€‚  
å…ˆã»ã©å®šç¾©ã—ãŸ`Entry`å‹ã¯ã™ã§ã«`Show`å‹ã‚¯ãƒ©ã‚¹ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã§ã™ã®ã§ã€è‡ªåˆ†ã§`show`ãƒ¡ã‚½ãƒƒãƒ‰ãªã©ã®å®Ÿè£…ã‚’æ›¸ãæ›ãˆã‚‹ã“ã¨ãŒå‡ºæ¥ãªã„ã®ã§ã™ã€‚

```haskell
ghci> :{
ghci| data Entry2 = Entry2
ghci|   { category2 :: String
ghci|   , price2 :: Integer
ghci|   }
ghci| :}
```

##### çœŸé¢ç›®ãªå®Ÿè£…ã«ã—ã¦ã¿ã‚‹

å…ˆã»ã©`{-# MINIMAL showsPrec | show #-}`ã‚’è§£èª¬ã—ãŸã¨ãè§¦ã‚ŒãŸã¨ãŠã‚Šã€æ–°ã—ã„å‹ã‚’`Show`å‹ã‚¯ãƒ©ã‚¹ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã«ã™ã‚‹ã«ã¯ã€ã€Œ`showsPrec`ã‹`show`ã®ã©ã¡ã‚‰ã‹ä¸€æ–¹ã®ã¿ã‚’å®Ÿè£…ã™ã‚Œã°ã‚ˆã„ã€ã“ã¨ã«ãªã£ã¦ã„ã¾ã™ã€‚  
ã“ã®ã†ã¡ã€`show`ãƒ¡ã‚½ãƒƒãƒ‰ã®ã»ã†ã¯ã€ã“ã‚Œã¾ã§ã«æ•°å€¤ã‚’æ–‡å­—åˆ—ã«å¤‰æ›ã™ã‚‹ãŸã‚ã«åº¦ã€…ä½¿ç”¨ã—ã¦ãã¾ã—ãŸï¼ˆã‚‚ã¡ã‚ã‚“ã€æ•°å€¤ã‚‚`Show`å‹ã‚¯ãƒ©ã‚¹ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã ã‹ã‚‰`show`é–¢æ•°ãŒä½¿ãˆã‚‹ã®ã§ã™ï¼‰ã€‚  
ãªã®ã§è¦ªã—ã¿ã‚„ã™ã„ã§ã—ã‚‡ã†ã‹ã‚‰ã€ã“ã¡ã‚‰ã‚’å®Ÿè£…ã™ã‚‹ã“ã¨ã§`Entry2`å‹ã‚’`Show`å‹ã‚¯ãƒ©ã‚¹ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã«ã—ã¦ã¾ã—ã‚‡ã†ã€‚

`deriving`ã‚’ä½¿ã‚ãšã€è‡ªåˆ†ã§`show`ãƒ¡ã‚½ãƒƒãƒ‰ã®å®šç¾©ã‚’æ›¸ã„ã¦`Entry2`å‹ã‚’`Show`å‹ã‚¯ãƒ©ã‚¹ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã«ã—ãŸã„å ´åˆã€ä¸‹è¨˜ã®ã‚ˆã†ã«`instance`ã¨ã„ã†ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã§å®£è¨€ã—ã¾ã™ã€‚

```haskell
instance Show Entry2 where
  show entry2 = category2 entry2 ++ "," ++ show (price2 entry2)
```

1è¡Œç›®ã®`instance Show Entry2 where`ã¨ã„ã†è¡Œã§ã€ã€Œä»Šã‹ã‚‰`Entry2`ã¨ã„ã†å‹ã‚’`Show`å‹ã‚¯ãƒ©ã‚¹ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã«ã—ã¾ã™ã€‚ãã®ãƒ¡ã‚½ãƒƒãƒ‰ã®å®šç¾©ã¯ã­...ã€ã¨å®£è¨€ã—ã¾ã™ã€‚  
ãã‚Œä»¥é™ã®ã‚¤ãƒ³ãƒ‡ãƒ³ãƒˆã—ãŸè¡Œã«ãŠã„ã¦ã€`Entry2`å‹ã‚’`Show`å‹ã‚¯ãƒ©ã‚¹ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã«ã™ã‚‹ä¸Šã§å¿…è¦ãªã€ãƒ¡ã‚½ãƒƒãƒ‰ã®å®Ÿè£…ã‚’è¡Œã„ã¾ã™ã€‚  
ç¹°ã‚Šè¿”ã—ã«ãªã‚Šã¾ã™ãŒ`Show`å‹ã‚¯ãƒ©ã‚¹ã«ãŠã„ã¦ã¯`show`ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å®Ÿè£…ã™ã‚Œã°ã‚ˆã„ã®ã§ã€ã“ã®å ´åˆ`show`ãƒ¡ã‚½ãƒƒãƒ‰ã®ã¿å®Ÿè£…ã—ã¦ã„ã¾ã™ã€‚

ã“ã“ã§å‡ºã¦ãã‚‹`show`ãƒ¡ã‚½ãƒƒãƒ‰ã®å®šç¾©ã‚’æ›¸ãã¨ãã®æ§‹æ–‡ã¯ã€ã‚¤ãƒ³ãƒ‡ãƒ³ãƒˆãŒå¿…è¦ãªã“ã¨ã‚’é™¤ã‘ã°é–¢æ•°ã‚’å®šç¾©ã™ã‚‹æ§‹æ–‡ã¨å…¨ãå¤‰ã‚ã‚Šã¾ã›ã‚“ã€‚  
ã—ã‹ã—ã€å½“å…¥é–€ãŒã‚ã¾ã‚Šã«ã‚‚æœ€å°ä¸»ç¾©çš„ã«é€²ã‚ã¦ã„ãŸã›ã„ã‹ã€ãã†ã„ãˆã°ã¾ã ãã®é–¢æ•°ã‚’å®šç¾©ã™ã‚‹æ§‹æ–‡ã‚‚ç´¹ä»‹ã—ã¦ã„ã¾ã›ã‚“ã§ã—ãŸğŸ˜¥ã€‚  
æ”¹ã‚ã¦å¿…è¦ã«ãªã£ãŸã¨ãã«ã¾ãŸè§¦ã‚Œã¾ã™ãŒã€ã“ã“ã§ã‚‚ç°¡å˜ã«ç´¹ä»‹ã—ã¾ã™ã€‚

ã¾ãšã€`show entry2 = `ã¨ã„ã†ç®‡æ‰€ã§ã€å®šç¾©ã™ã‚‹é–¢æ•°ã®åå‰ã¨ãã®å¼•æ•°ã‚’åˆ—æŒ™ã—ã¾ã™ã€‚  
ã“ã®å ´åˆã€å®šç¾©ã™ã‚‹é–¢æ•°ã®åå‰ã¯ã€Œ`show`ã€ã§ã€æ®‹ã‚Šã®`entry2`ãŒå¼•æ•°ã§ã™ã€‚`entry2`ã¨ã„ã†ä¸€ã¤ã ã‘ã®å¼•æ•°ã‚’ã¨ã‚‹ã“ã¨ã«ãªã£ã¦ã„ã¾ã™ã€‚

ã‚¤ã‚³ãƒ¼ãƒ« `=` ã‚ˆã‚Šå¾Œã‚ã®`category2 entry2 ++ "," ++ show (price2 entry2)`ã¨ã„ã†ç®‡æ‰€ã«ã€`show`ãƒ¡ã‚½ãƒƒãƒ‰ã®å®Ÿè£…ã€ã™ãªã‚ã¡`Entry2`å‹ã®å€¤ã«å¯¾ã—ã¦`show`ãƒ¡ã‚½ãƒƒãƒ‰ã¯ã©ã®ã‚ˆã†ãªå‡¦ç†ã‚’è¡Œã†ã‹ã‚’æ›¸ãã¾ã™ã€‚  
ä»–ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°è¨€èªã®ã‚ˆã†ã«`return`ã¨ã„ã£ãŸã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã§æˆ»ã‚Šå€¤ã‚’æ˜ç¤ºã™ã‚‹å¿…è¦ã¯ãªãï¼ˆãã‚‚ãã‚‚ã€`return`ã«ç›¸å½“ã™ã‚‹ã‚‚ã®ãŒã‚ã‚Šã¾ã›ã‚“ï¼ï¼‰ã€ `=` ä»¥é™ã«æ›¸ã„ãŸå¼ãŒãã®ã¾ã¾é–¢æ•°ã®æˆ»ã‚Šå€¤ã¨ãªã‚Šã¾ã™ã€‚

ãã‚Œã§ã¯ã€`Entry2`ã«å¯¾ã™ã‚‹`show`ãƒ¡ã‚½ãƒƒãƒ‰ã®æœ¬ä½“ã‚’è¦‹ã¦ã¿ã¾ã—ã‚‡ã†ã€‚  
ã„ãšã‚Œã®å¼ã‚‚ã“ã‚Œã¾ã§ã®èª²é¡Œã§å­¦ç¿’ã—ãŸé–¢æ•°ã‚„æ¼”ç®—å­ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹ãŸã‚ã€è©³ã—ã„èª¬æ˜ã¯çœç•¥ã—ã¾ã™ã€‚  
æ¬¡ã®æ®µè½ã§å‹•ä½œä¾‹ã‚’ç¤ºã—ã¾ã™ãŒã€ãã®å‰ã«ã€å¾©ç¿’ã‚‚å…¼ã­ã¦è‡ªåŠ›ã§æ¨æ¸¬ã—ã¦ã¿ã¦ãã ã•ã„ï¼

...æ¨æ¸¬ã§ããŸã§ã—ã‚‡ã†ã‹ï¼Ÿ  
ãã‚Œã§ã¯GHCiã§è©¦ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚  
ä¾‹ã®ã”ã¨ã`:{`ã¨`:}`ã‚’ä½¿ã£ã¦è¤‡æ•°è¡Œã®å…¥åŠ›ã‚’æœ‰åŠ¹ã«ã™ã‚‹ã®ã‚’ãŠå¿˜ã‚Œãªãã€‚

```haskell
ghci> :{
ghci| instance Show Entry2 where
ghci|   show entry2 = category2 entry2 ++ "," ++ show (price2 entry2)
ghci| :}
```

```haskell
ghci> show (Entry2 "Magazine" 120)
"Magazine,120"
```

```haskell
ghci> show (Entry2 "Rice" 2000)
"Rice,2000"
```

GHCiã«å…¥åŠ›ã—ãŸå¼ã‚’æ¨™æº–å‡ºåŠ›ã«æ›¸ãè¾¼ã‚€éš›ã‚‚`show`ãƒ¡ã‚½ãƒƒãƒ‰ã¯ä½¿ã‚ã‚Œã¦ã„ã‚‹ã®ã§ã€`Entry2`å‹ã®å€¤ã‚’GHCiã«å…¥åŠ›ã—ãŸçµæœã‚‚ã€ã‚„ã¯ã‚Š`show`ãƒ¡ã‚½ãƒƒãƒ‰ã®å®Ÿè£…ã¨ã—ã¦æ›¸ã„ãŸå¼ã€ãã®ã¾ã¾ã®çµæœã¨ãªã‚Šã¾ã™ã€‚

```haskell
ghci> Entry2 "Magazine" 120
Magazine,120
```

```haskell
ghci> Entry2 "Rice" 2000
"Rice,2000"
```

#### å¤‰ãªå®Ÿè£…ã«ã—ã¦ã¿ã‚‹

å‹ã‚¯ãƒ©ã‚¹ã®ãƒ¡ã‚½ãƒƒãƒ‰ã¯ã€ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã§ã‚ã‚‹å‹ã«ã‚ˆã£ã¦å‹•ä½œã‚’å¤‰ãˆã‚‹ã“ã¨ãŒã§ãã‚‹ã€ã¨ã„ã†ã“ã¨ã‚’ã‚ˆã‚Šå®Ÿæ„Ÿã™ã‚‹ãŸã‚ã«ã€ã‚‚ã†ä¸€ã¤ã®å‹ã‚’å®šç¾©ã—ã¦ã€å…¨ãé•ã†`Show`å‹ã‚¯ãƒ©ã‚¹ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã«ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚

```haskell
ghci> :{
ghci| data Entry3 = Entry3
ghci|   { category3 :: String
ghci|   , price3 :: Integer
ghci|   }
ghci| :}
```

ä»Šåº¦ã¯ã€ã©ã‚“ãªå€¤ã‚’å—ã‘å–ã£ã¦ã‚‚`"Hello, world!"`ã¨ã„ã†æ–‡å­—åˆ—ã‚’è¿”ã™ã€ã¨ã„ã†å¤‰ãªå®Ÿè£…ã«ã—ã¦ã¿ã¾ã™ã€‚

```haskell
ghci> :{
ghci| instance Show Entry3 where
ghci|   show entry3 = "Hello, world!"
ghci| :}
```

æ—©é€Ÿä½¿ã£ã¦ã¿ã¾ã—ã‚‡ã†ã€‚

```haskell
ghci> show (Entry3 "Magazine" 120)
"Hello, world!"
```

```haskell
ghci> Entry3 "Magazine" 120
"Hello, world!"
```

ã¯ã„ã€å®šç¾©ã®ã¨ãŠã‚Šã€`Entry3`å‹ã®`show`ãƒ¡ã‚½ãƒƒãƒ‰ã¯ã€å€¤ã®ä¸­èº«ã‚’ä¸€åˆ‡ç„¡è¦–ã—ã¦å¿…ãš`"Hello, world!"`ã‚’è¿”ã™ã¨ã„ã†ã€ãƒ˜ãƒ³ãƒ†ã‚³ãªå®Ÿè£…ã¨ãªã‚Šã¾ã—ãŸï¼

ã“ã®ã‚ˆã†ã«ã€å‹ã”ã¨ã«`show`ãƒ¡ã‚½ãƒƒãƒ‰ã®å®Ÿè£…ã‚’ã‚ã‘ã¦æ›¸ãã“ã¨ã«ã‚ˆã£ã¦ã€`Show`å‹ã‚¯ãƒ©ã‚¹ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã®å€¤ã‚’å—ã‘å–ã‚‹é–¢æ•°ã¯ã€ã„ã‚ã„ã‚ãª`show`ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ä½¿ã£ã¦æŒ¯ã‚‹èˆã„ã‚’å¤‰ãˆã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚

### ã„ã‚ã„ã‚ãªå‹ã‚¯ãƒ©ã‚¹

â€»ã“ã®ç¯€ã¯ä»Šå›ã®èª²é¡Œã‚’è§£ãã ã‘ã§ã¯å¿…è¦ã‚ã‚Šã¾ã›ã‚“ã€‚é›£ã—ã„ã¨æ„Ÿã˜ãŸã‚‰é©å½“ã«é£›ã°ã—ã¡ã‚ƒã£ã¦ãã ã•ã„ã€‚

#### `Read`å‹ã‚¯ãƒ©ã‚¹

`Read`å‹ã‚¯ãƒ©ã‚¹ã¯ã€`Show`å‹ã‚¯ãƒ©ã‚¹ã¨ã‚ã‚‹æ„å‘³ã§é€†ã®ã“ã¨ã‚’è¡Œã†å‹ã‚¯ãƒ©ã‚¹ã§ã™ã€‚  
æ–‡å­—åˆ—ã‚’æ•°å€¤ã«å¤‰æ›ã™ã‚‹ã¨ãã«ä½¿ç”¨ã—ãŸã€`read`é–¢æ•°ã‚’ãƒ¡ã‚½ãƒƒãƒ‰ã¨ã—ã¦æŒã£ã¦ã„ã¾ã™ã€‚  
ã“ã‚Œã¯ã¤ã¾ã‚Šã€æ•°å€¤ã¯`Read`å‹ã‚¯ãƒ©ã‚¹ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ãªã®ã§ã€`read`é–¢æ•°ã‚’ä½¿ã£ã¦æ–‡å­—åˆ—ã‹ã‚‰æ•°å€¤ã«å¤‰æ›ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã—ã€èª­è€…ã®ã¿ãªã•ã‚“ãŒå®šç¾©ã—ãŸå‹ã‚‚`Read`å‹ã‚¯ãƒ©ã‚¹ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã«ã™ã‚Œã°ã€`read`é–¢æ•°ã‚’ä½¿ã£ã¦æ–‡å­—åˆ—ã‹ã‚‰ãã®å€¤ã‚’ä½œã‚Œã‚‹ã‚ˆã†ã«ãªã‚‹ã€ã¨ã„ã†ã“ã¨ã§ã™ã€‚

ã€Œæ–‡å­—åˆ—ã‹ã‚‰ãã®å€¤ã‚’ä½œã‚Œã‚‹ã€ã¨ã„ã†ã“ã¨ã‚’ã¡ã‚ƒã‚“ã¨å‹ã«ç¿»è¨³ã—ã¦ç†è§£ã—ã¾ã—ã‚‡ã†ã€‚  
ãŠãªã˜ã¿ã®`:t`ã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ã£ã¦ãã ã•ã„ã€‚

```haskell
ghci> :t read
read :: Read a => String -> a
```

ğŸ‘†ã®å‹å®šç¾©ã‚’ã”è¦§ã«ãªã£ãŸæ–¹ã¯ã€å°‘ã—ä¸æ€è­°ã«æ„Ÿã˜ãŸã‹ã‚‚çŸ¥ã‚Œã¾ã›ã‚“ã€‚  
æ™®é€šã€ã‚ˆãã‚ã‚‹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆæŒ‡å‘ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°è¨€èªã ã¨ã€ã€Œãƒ¡ã‚½ãƒƒãƒ‰ã€ã¨å‘¼ã°ã‚Œã‚‹éƒ¨é¡ã®é–¢æ•°ã¯ã€ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å‘¼ã³å‡ºã™ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’å¼•æ•°ã¨ã—ã¦å—ã‘å–ã‚‹ã‚ˆã†ã«ï¼ˆå°‘ãªãã¨ã‚‚ã€ãƒ¡ã‚½ãƒƒãƒ‰ã®å®šç¾©ã«ãŠã„ã¦å…¥åŠ›ã¨ã—ã¦å‚ç…§ã§ãã‚‹ã‚ˆã†ã«ï¼‰ãªã£ã¦ã„ã¾ã™ã€‚  
ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ã€Œå…¥åŠ›ã€ã®ä¸€ã¤ã¨ã™ã‚‹ã“ã¨ã«ã‚ˆã£ã¦ã€ã©ã®ãƒ¡ã‚½ãƒƒãƒ‰ã®å®Ÿè£…ã‚’ä½¿ç”¨ã™ã‚‹ã‹æ±ºå®šã§ãã‚‹ãƒ¯ã‚±ã§ã™ã­ã€‚  
ä¸€æ–¹ã€ğŸ‘†ã®å‹å®šç¾©ã‚’ã”è¦§ã«ãªã‚‹ã¨åˆ†ã‹ã‚‹ã¨ãŠã‚Šã€`read`ãƒ¡ã‚½ãƒƒãƒ‰ã«ãŠã„ã¦ã¯ã€Œå…¥åŠ›ã€ã«ã‚ãŸã‚‹å¼•æ•°ã®éƒ¨åˆ†ã«ã€`Read`å‹ã‚¯ãƒ©ã‚¹ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã®å€¤ãŒå­˜åœ¨ã—ã¦ã„ã¾ã›ã‚“ã€‚  
`Read`å‹ã‚¯ãƒ©ã‚¹ã¯`read`ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ä½¿ã£ã¦ã€Œæ–‡å­—åˆ—ã‹ã‚‰ãã®å€¤ã‚’ä½œã‚Œã‚‹ã€ã¨ã„ã†æ€§è³ªã®å‹ã‚¯ãƒ©ã‚¹ãªã®ã§ã€å¼•æ•°ã¨ã—ã¦ã€Œãã®å‹ã®å€¤ã€ã‚’å—ã‘å–ã‚‹ã“ã¨ãŒãªã„ã®ã§ã™ã€‚

ã§ã¯ä¸€ä½“ã©ã†ã‚„ã£ã¦ã€ã€Œã©ã®å‹ã®`read`ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å‘¼ã¶ã‹ã€ãŒæ±ºã¾ã‚‹ã®ã§ã—ã‚‡ã†ï¼Ÿ  
ä¸€è¨€ã§è¨€ã†ã¨ã€ã€Œå‹æ¨è«–ã—ã¦ã€åˆ¤æ˜ã—ãŸå‹ã«ã‚ˆã£ã¦ã€æ±ºã¾ã‚Šã¾ã™ã€‚  
ã€Œå‹ã€ã¨ã„ã†æƒ…å ±ã¯Haskellã®ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã—ãŸæ™‚ç‚¹ã€ã¤ã¾ã‚Šãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’å®Ÿè¡Œã—**å§‹ã‚ã‚‹å‰**ã«åˆ†ã‹ã‚‹ã‚‚ã®ãªã®ã§ã€ã‚ã‚‹å ´æ‰€ã«æ›¸ã„ãŸ`read`ãŒä½•ã®å‹ã®å€¤ã‚’è¿”ã™ã¹ãã‹ã‚‚ã€å‹æ¨è«–ãŒæˆåŠŸã™ã‚Œã°åˆ¤æ˜ã—ã¾ã™ã€‚çµæœã€ã©ã®å‹ã®`read`é–¢æ•°ã‚’å‘¼ã¶ã‹ã‚‚åŒæ™‚ã«æ±ºã¾ã‚Šã¾ã™ã€‚é€†ã«å‹æ¨è«–ãŒå¤±æ•—ã—ãŸå ´åˆã¯ã€ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼ã«ã™ã‚‹ã€ãã‚Œã ã‘ã®ã“ã¨ã§ã™ã€‚  
ä¸€æ–¹ã€ã‚ˆãã‚ã‚‹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆæŒ‡å‘ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°è¨€èªã§ã¯ã€ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ä¸­èº«ãŒã©ã†ãªã£ã¦ã„ã‚‹ã‹ã¯å®Ÿè¡Œæ™‚ã«ã—ã‹ã‚ã‹ã‚‰ãªã„ã€ã¨ã„ã†ã®ãŒåŸå‰‡ã§ã™ï¼ˆå®Ÿéš›ã¯è¨€èªã«ã‚ˆã£ã¦ã¯ãã†ã˜ã‚ƒãªã„å ´åˆã®æ–¹ãŒå¤šã„ã§ã™ãŒï¼‰ã€‚ãã‚Œãªã®ã§ã€ã©ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å‘¼ã¶ã‹ã‚’æ±ºã‚ã‚‹ã€Œãƒ¬ã‚·ãƒ¼ãƒãƒ¼ã€ã¯å¿…ãšãƒ¡ã‚½ãƒƒãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹**ç›´å‰**ã«ã‚ã‹ã‚‹å…¥åŠ›ã¨ã—ã¦ä¸ãˆã‚‰ã‚Œã¾ã™ã€‚

ã¾ã¨ã‚ã‚‹ã¨ä»¥ä¸‹ğŸ‘‡ã®é€šã‚Šã§ã™ã€‚

- ã‚ˆãã‚ã‚‹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆæŒ‡å‘è¨€èªã®ãƒ¡ã‚½ãƒƒãƒ‰ã¯ãƒ¬ã‚·ãƒ¼ãƒãƒ¼ --- ä¾‹ãˆã°`object.method()`ãªã©ã¨æ›¸ã„ãŸã¨ãã«ç¾ã‚Œã‚‹`object`ã€ã™ãªã‚ã¡ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å‘¼ã³å‡ºã™ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ --- ãŒã€ã©ã®ãƒ¡ã‚½ãƒƒãƒ‰ã®å®Ÿè£…ã‚’å‘¼ã¶ã‹æ±ºã‚ã‚‹ã€‚
- Haskellã®å‹ã‚¯ãƒ©ã‚¹ã®ãƒ¡ã‚½ãƒƒãƒ‰ã¯å‹æ¨è«–ã—ã¦æ±ºå®šã•ã‚ŒãŸå‹ãŒã€ã©ã®ãƒ¡ã‚½ãƒƒãƒ‰ã®å®Ÿè£…ã‚’å‘¼ã¶ã‹æ±ºã‚ã‚‹ã€‚

ã•ã¦ã€èª¬æ˜ãŒé•·ããªã‚Šã¾ã—ãŸãŒã„ã‚ˆã„ã‚ˆã‚ãªãŸãŒä½œã£ãŸ`Entry`å‹ã®å€¤ã‚’`read`é–¢æ•°ã‹ã‚‰ä½œã‚Œã‚‹ã‚ˆã†ã€`Read`å‹ã‚¯ãƒ©ã‚¹ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã«ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚  
`Read`å‹ã‚¯ãƒ©ã‚¹ã¯`Show`å‹ã‚¯ãƒ©ã‚¹ã¨åŒæ§˜ã«ã€`deriving Read`ã¨è¿½è¨˜ã™ã‚‹ã ã‘ã§å¯¾è±¡ã®å‹ã‚’ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã«ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

```haskell
ghci> :{
ghci| data Entry = Entry
ghci|   { category :: String
ghci|   , price :: Integer
ghci|   } deriving Read
ghci| :}
ghci>
```

ãŸã ã—ã€`Show`å‹ã‚¯ãƒ©ã‚¹ã¨`Read`å‹ã‚¯ãƒ©ã‚¹ä¸¡æ–¹ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã«ã—ãŸã„ã€ã¨ã„ã£ãŸã‚ˆã†ã«ã€2ã¤ä»¥ä¸Šã®å‹ã‚¯ãƒ©ã‚¹ã‚’`deriving`ã™ã‚‹å ´åˆã¯ã€ä¸‹è¨˜ã®ã‚ˆã†ã«æ‹¬å¼§ã§å›²ã£ã¦ã‚«ãƒ³ãƒã§åŒºåˆ‡ã£ã¦ãã ã•ã„ï¼ˆé †ç•ªã¯ã©ã¡ã‚‰ã§ã‚‚ğŸ†—ï¼‰ã€‚

```haskell
ghci> :{
ghci| data Entry = Entry
ghci|   { category :: String
ghci|   , price :: Integer
ghci|   } deriving (Read, Show)
ghci| :}
ghci>
```

æ‹¬å¼§ã§å›²ã‚ãªã‹ã£ãŸå ´åˆã€æ¬¡ã®ã‚ˆã†ã«æ§‹æ–‡ã‚¨ãƒ©ãƒ¼ã¨ãªã‚Šã¾ã™ã€‚ã”æ³¨æ„ãã ã•ã„ã€‚

```haskell
ghci> :{
ghci| data Entry = Entry
ghci|   { category :: String
ghci|   , price :: Integer
ghci|   } deriving Read, Show
ghci| :}

<interactive>:55:18: error: parse error on input â€˜,â€™
```

ãã‚Œã‹ã‚‰ã€å®Ÿéš›ã«`read`é–¢æ•°ã§`Entry`å‹ã®å€¤ã‚’ä½œã‚‹å ´åˆã¯ã€æ¬¡ã®ã‚ˆã†ã«ãƒ¬ã‚³ãƒ¼ãƒ‰æ§‹æ–‡ã§æ›¸ã‹ã‚ŒãŸæ–‡å­—åˆ—ã‚’æ¸¡ã™å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ã¡ã‚‡ã£ã¨é¢å€’ãã•ã„ã§ã™ã­ã€‚

â€»èª²é¡Œ6ã®ã€Œãƒ¬ã‚³ãƒ¼ãƒ‰ãƒ©ãƒ™ãƒ«ã¨å€¤ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ãƒ¼ã‚’ä½¿ã£ã¦ãƒ¬ã‚³ãƒ¼ãƒ‰å‹ã®å€¤ã‚’ä½œæˆã™ã‚‹ã€ã‚’ã¾ã ã”è¦§ã«ãªã£ã¦ãªã„æ–¹ã¯ã€èª­ã‚“ã§ã‚­ãƒ£ãƒƒãƒã‚¢ãƒƒãƒ—ã—ã¾ã—ã‚‡ã†ã€‚

```haskell
ghci> read "Entry { category =  \"Magazine\", price = 120 }" :: Entry
Entry {category = "Magazine", price = 120}
```

âš ï¸ãªãŠã€ç‰¹ã«GHCiä¸Šã§è©¦ã™å ´åˆã€ä¸Šè¨˜ã®ã‚ˆã†ã«`read`é–¢æ•°ã®æˆ»ã‚Šå€¤ã«`:: Entry`ã¨ä»˜ã‘ã¦ã€å‹ã‚’æ˜ç¢ºã«ã—ãªã„ã¨ã„ã‘ãªã„ç‚¹ã«ã‚‚ã”æ³¨æ„ãã ã•ã„ã€‚  
å…ˆã»ã©èª¬æ˜ã—ãŸã€Œã©ã®å‹ã®ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å‘¼ã¶ã‹åˆ†ã‹ã‚‰ãªã„ã€ã¨ã„ã†å•é¡Œã¯ã€ç‰¹ã«GHCiã®ã‚ˆã†ã«çŸ­ã„å…¥åŠ›ã‚’ç¹°ã‚Šè¿”ã™çŠ¶æ³ã§`read`ã‚’ä½¿ç”¨ã—ãŸå ´åˆã«ã€ã—ã°ã—ã°ç™ºç”Ÿã—ã¾ã™ã€‚  
çµæœã€`:: Entry`ãªã©ã®å‹æ³¨é‡ˆã®ãªã„`read "..."`ã¨ã„ã†å¼ã‚’GHCiã¯å¤‰ãªé¢¨ã«å‹æ¨è«–ã—ã¦ã—ã¾ã„ã€æ€ã‚ã¬ã‚¨ãƒ©ãƒ¼ã‚’å¼•ãèµ·ã“ã—ã¦ã—ã¾ã„ã¾ã™ğŸ’¥:

```haskell
ghci> read "Entry { category =  \"Magazine\", price = 120 }"
*** Exception: Prelude.read: no parse
```

æœ¬æ¥ã§ã‚ã‚Œã°ã“ã®ã‚ˆã†ãªå ´åˆã€GHCã¯å‹æ¨è«–ã«å¤±æ•—ã—ã¦å‹ã‚¨ãƒ©ãƒ¼ã‚’èµ·ã“ã™ã®ã§ã™ãŒã€ä¸Šè¨˜ã®ã‚¨ãƒ©ãƒ¼ã¯å‹ã‚¨ãƒ©ãƒ¼ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚  
èª²é¡Œhogeã®`if`å¼ã®è§£èª¬ã§ç´¹ä»‹ã—ãŸã‚ˆã†ãªã€ã€Œ`type`ã€ã‚„ã€Œ`instance`ã€ã¨ã„ã†å˜èªãŒå«ã¾ã‚Œã¦ã„ã¾ã›ã‚“ã‚ˆã­ï¼Ÿ

ã“ã®ã‚¨ãƒ©ãƒ¼ã¯å®Ÿè¡Œæ™‚ã‚¨ãƒ©ãƒ¼ã§ã™ã€‚å®Ÿè¡Œæ™‚ã‚¨ãƒ©ãƒ¼ã¯å‹ã‚¨ãƒ©ãƒ¼ã¨ç•°ãªã‚Šã€ã‚ãªãŸãŒä½œæˆã—ãŸãƒ—ãƒ­ã‚°ãƒ©ãƒ ã§ç™ºç”Ÿã—ãŸã¨ãã€ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã®**å®Ÿè¡ŒãŒé€”ä¸­ã§æ­¢ã¾ã£ã¦ã—ã¾ã†**åŸå› ã¨ãªã‚‹ã‚¨ãƒ©ãƒ¼ã§ã™ã€‚  
ä¸€æ–¹ã€å‹ã‚¨ãƒ©ãƒ¼ã¯ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’ãã‚‚ãã‚‚å®Ÿè¡Œã™ã‚‹å‰ã«ã€ŒãŠã‹ã—ã„ã‚ˆï¼ã€ã¨æ•™ãˆã¦ãã‚Œã‚‹ã‚¨ãƒ©ãƒ¼ãªã®ã§ã€ã‚‚ã†å°‘ã—ã„ã„ã‚„ã¤ã§ã™ã€‚ã©ã†ã›å¤±æ•—ã™ã‚‹ãªã‚‰æ—©ã„æ–¹ãŒã„ã„ã§ã™ã‚ˆã­ï¼Ÿ  
ãªã®ã§ã§ãã‚Œã°é¿ã‘ãŸã„ã‚¨ãƒ©ãƒ¼ãªã®ã§ã™ãŒã€ãªãœã‹ã“ã“ã§ã¯å‹ã‚¨ãƒ©ãƒ¼ã¨ãªã‚‰ãšã«å®Ÿè¡Œæ™‚ã‚¨ãƒ©ãƒ¼ã¨ãªã£ã¦ã—ã¾ã„ã¾ã—ãŸ...ã€‚

ã©ã†ã—ã¦`:: Entry`ã‚’ä»˜ã‘ãªã‹ã£ãŸå ´åˆã«å®Ÿè¡Œæ™‚ã‚¨ãƒ©ãƒ¼ã¨ãªã£ã¦ã—ã¾ã£ãŸã®ã‹ã€ã«ã¤ã„ã¦ã¯é•·ããªã‚‹ã®ã§ç”³ã—è¨³ãªãã‚‚å‰²æ„›ã—ã¾ã™ã€‚  
`ExtendedDefaultRules`ã¨å‘¼ã°ã‚Œã‚‹GHCã®è¨€èªæ‹¡å¼µãŒGHCiã§ã®ã¿ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§æœ‰åŠ¹ã«ãªã‚‹ã€ã¨ã„ã†ç‰¹æ®Šãªäº‹æƒ…ãŒé–¢ä¿‚ã—ã¦ã„ã‚‹ã®ã§ã€æ°—ã«ãªã£ãŸæ–¹ã¯èª¿ã¹ã¦ã¿ã¦ãã ã•ã„ã€‚

#### æ•°å€¤ãƒªãƒ†ãƒ©ãƒ«ã®æ­£ä½“

ã‚‚ã†ä¸€ã¤ã€ã“ã‚Œã¾ã§ã®èª²é¡Œã§è§¦ã‚Œã‚‰ã‚Œãªã‹ã£ãŸã€ç§˜å¯†ã®å‹ã‚¯ãƒ©ã‚¹ã‚’æ˜ã‹ã—ã¾ã—ã‚‡ã†ã€‚  
ãã‚Œã¯`Num`å‹ã‚¯ãƒ©ã‚¹ã§ã™ã€‚`Num`å‹ã‚¯ãƒ©ã‚¹ã¯ã€ã€Œè¶³ã—ç®—ãƒ»ã‹ã‘ç®—ãƒ»å¼•ãç®—ãŒå‡ºæ¥ã‚‹ã€æ•°å€¤ã£ã½ã„å‹ã‚’ã¾ã¨ã‚ã¦ã„ã¾ã™ã€‚

ä¸‹è¨˜ã®ã‚ˆã†ã«ã€é©å½“ãªæ•´æ•°ã®ãƒªãƒ†ãƒ©ãƒ«ã«å¯¾ã—ã¦GHCiã®`:t`ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¦ã¿ã¦ãã ã•ã„ã€‚

```haskell
ghci> :t 1
1 :: Num p => p
```

... ãŠã£ã¨ã€è¦‹æ…£ã‚Œãªã„è¡¨è¨˜ãŒå‡ºã¦ãã¾ã—ãŸã­ã€‚  
`Num p => p`ã®`Num`ã¯`Num`å‹ã‚¯ãƒ©ã‚¹ã®ã“ã¨ã‚’æŒ‡ã—ã¦ã„ã‚‹ã‚“ã§ã—ã‚‡ã†ã‘ã©ã‚‚ã€æ®‹ã‚Šã®`p`ã‚„ã‚‰`=>`ã¯ä½•ã‚’æŒ‡ã—ã¦ã„ã‚‹ã®ã§ã—ã‚‡ã†ã‹ã€‚

ã¾ãšã€`p`ã¯ã€Œå‹å¤‰æ•°ã€ã‚’è¡¨ã—ã¦ã„ã¾ã™ã€‚  
Haskellã®ä¸–ç•Œã«ãŠã„ã¦ã€å‹ãŒç¾ã‚Œã‚‹ã¹ãç®‡æ‰€ã«å‡ºã¦ãã‚‹ã‚¢ãƒ«ãƒ•ã‚¡ãƒ™ãƒƒãƒˆå°æ–‡å­—ã§å§‹ã¾ã‚‹è­˜åˆ¥å­ã¯ã€ã™ã¹ã¦ã“ã®ã€Œå‹å¤‰æ•°ã€ã‚’è¡¨ã—ã¦ã„ã¾ã™ã€‚  
ã‚¢ãƒ«ãƒ•ã‚¡ãƒ™ãƒƒãƒˆã®å°æ–‡å­—ã§ã•ãˆå§‹ã¾ã£ã¦ã„ã‚Œã°ã‚ˆãã€æ–‡å­—ã”ã¨ã«ç•°ãªã‚‹æ„å‘³ãŒã‚ã‚‹ã‚ã‘ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚  
ç’°å¢ƒã«ã‚ˆã£ã¦ã¯ã€ã“ã®`p`ã®éƒ¨åˆ†ãŒã€`t`ãªã©ã®ä»–ã®ã‚¢ãƒ«ãƒ•ã‚¡ãƒ™ãƒƒãƒˆã®å°æ–‡å­—ã«ãªã£ã¦ã„ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ãŒã€ç‰¹ã«æ„å‘³ã¯å¤‰ã‚ã‚‰ãªã„ã®ã§ã”å®‰å¿ƒãã ã•ã„ã€‚

ã“ã®å‹å¤‰æ•°ã¨ã„ã†ã®ã¯ã€ã€Œä½•ã‹ã®å‹ã€ã‚’è¡¨ã™å¤‰æ•°ã§ã™ã€‚  
ç‰¹å®šã®å‹ã‚’æŒ‡ã—ã¦ã„ã‚‹ã®ã¯ãªãã€ã€Œä»»æ„ã®å‹ã€ã«å¤‰ã‚ã‚Šã†ã‚‹ã“ã¨ã‚’è¡¨ã—ã¦ã„ã¾ã™ã€‚

`=>`ã¯ã€Œåˆ¶ç´„ (constraint)ã€ã‚’ç¤ºã™ãŸã‚ã«ä½¿ã„ã¾ã™ã€‚  
çŸ¢å°`=>`ã®å‰ã«æ›¸ã‹ã‚Œã¦ã„ã‚‹ã®ãŒå‹ã‚¯ãƒ©ã‚¹ãªã©ã®åˆ¶ç´„ã§ã€å¾Œã‚ã«æ›¸ã‹ã‚ŒãŸå‹ã«ã¤ã„ã¦ã®æ¡ä»¶ã‚’è¦å®šã™ã‚‹éš›ã«ä½¿ã„ã¾ã™ã€‚  
`â—‹â—‹ => Ã—Ã—Ã—`ã¨æ›¸ã‹ã‚Œã¦ã„ãŸã¨ãã€ã€Œâ—‹â—‹ã§ã‚ã‚‹ãªã‚‰ã°Ã—Ã—Ã—ã€ã¨ã‹ã€ã€Œâ—‹â—‹ã§ã‚ã‚‹å ´åˆã®Ã—Ã—Ã—ã€ã¨èª­ã¿æ›¿ãˆã‚‹ã¨ã‚ã‹ã‚Šã‚„ã™ã„ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚

ã—ãŸãŒã£ã¦ã€`Num p => p`ã¨ã„ã†å‹ã¯ã€Œ`p`ãŒ`Num`å‹ã‚¯ãƒ©ã‚¹ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã§ã‚ã‚‹å ´åˆã®`p`ã€ã€è¨€ã„æ›ãˆã‚‹ã¨ã€ã€Œ`Num`å‹ã‚¯ãƒ©ã‚¹ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã§ã‚ã‚‹å‹ï¼ˆ`p`ï¼‰ã®ã†ã¡ã®ä½•ã‹ã€ã‚’æŒ‡ã—ã¦ã„ã¾ã™ã€‚  
ãã†ã€`1`ã¨ã„ã†æ•´æ•°ã®ãƒªãƒ†ãƒ©ãƒ«ã¯ã€ä½•ç‰©ã§ã‚‚ãªã„ã€**ã€Œ`Num`å‹ã‚¯ãƒ©ã‚¹ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã§ã‚ã‚‹ä½•ã‹ã®å‹ã€ã®å€¤**ã§ã—ã‹ãªã„ã®ã§ã™ã€‚å‹ãŒã¾ã æ±ºã¾ã£ã¦ã„ãªã„ã‚“ã§ã™ã­ï¼

å…ˆã»ã©ã€Œ`Num`å‹ã‚¯ãƒ©ã‚¹ã¯ã€ã€è¶³ã—ç®—ãƒ»ã‹ã‘ç®—ãƒ»å¼•ãç®—ãŒå‡ºæ¥ã‚‹ã€æ•°å€¤ã£ã½ã„å‹ã‚’ã¾ã¨ã‚ã¦ã„ã‚‹ã€ã¨è¿°ã¹ãŸã¨ãŠã‚Šã€è¶³ã—ç®—ã®æ¼”ç®—å­`+`ãªã©ã‚’ãƒ¡ã‚½ãƒƒãƒ‰ã¨ã—ã¦æŒã£ã¦ã„ã¾ã™ã€‚  
ãã®ãŸã‚ã€`+`ãªã©ã®æ¼”ç®—å­ã§é©å½“ã«è¨ˆç®—ã‚’ã—ã¦ã¿ã¦ã‚‚ã€ã‚„ã£ã±ã‚Šå‹ã¯å®šã¾ã‚Šã¾ã›ã‚“ã€‚

```haskell
ghci> :t 1 + 2 * 3
1 + 2 * 3 :: Num a => a
```

ä¸Šè¨˜ã®ã‚ˆã†ã«`:t 1 + 2 * 3`ã®çµæœã‚‚ã€ã€Œ`Num`å‹ã‚¯ãƒ©ã‚¹ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã§ã‚ã‚‹å‹ï¼ˆ`a`ï¼‰ã®ã†ã¡ã®ä½•ã‹ã€ã®ã¾ã¾ã§ã™ã€‚  
ã¾ã å‹ãŒæ±ºã¾ã£ã¦ã„ãªã„ã«ã‚‚ã‹ã‹ã‚ã‚‰ãšã€ã“ã‚Œã¾ã§ç§ãŸã¡ã¯ç‰¹ã«å‹ã‚’æ˜ç¤ºã™ã‚‹ã“ã¨ãªãã€Haskellã§BMIã‚„ã‚‰è¤‡åˆ©è¨ˆç®—ã‚„ã‚‰ã‚’è¡Œãˆã¦ãã¾ã—ãŸã€‚  
ãã“ã«ã¯ã©ã®ã‚ˆã†ãªä»•çµ„ã¿ãŒåƒã„ã¦ã„ã‚‹ã®ã§ã—ã‚‡ã†ã‹ï¼Ÿ

ãã‚Œã¯ã€èª²é¡Œ5ã§ã‚‚å°‘ã—è§¦ã‚ŒãŸã€Œãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®å‹ã€ã§ã™ã€‚  
`Num`å‹ã‚¯ãƒ©ã‚¹ã‚’ã¯ã˜ã‚ã¨ã™ã‚‹ä¸€éƒ¨ã®å‹ã‚¯ãƒ©ã‚¹ã«ã¯ã€ã€Œå‹æ¨è«–ã—ãŸã‘ã©å‹ã‚’æ±ºå®šã™ã‚‹ã“ã¨ãŒå‡ºæ¥ãªã‹ã£ãŸã€‚ã§ã‚‚ã€ã“ã®å‹ã¯â—‹â—‹ã®å‹ã‚¯ãƒ©ã‚¹ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã§ã‚ã‚‹ã“ã¨ã¯é–“é•ã„ãªã„ã®ã§ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®å‹ã§ã‚ã‚‹Ã—Ã—ã«æ±ºå®šã—ã¦ã—ã¾ãŠã†ã€ã¨ã„ã†å‹ãŒæ±ºã‚ã‚‰ã‚Œã¦ã„ã¾ã™ã€‚ãã‚ŒãŒã€Œãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®å‹ã€ã§ã™ã€‚

ãã®æŒ™å‹•ã‚’ç¢ºèªã™ã‚‹ãŸã‚ã«ã€GHCã®`-Wtype-defaults`ã¨ã„ã†è­¦å‘Šã‚’æœ‰åŠ¹ã«ã—ã¾ã—ã‚‡ã†ã€‚  
GHCiã§ã“ã®è­¦å‘Šã‚’æœ‰åŠ¹ã«ã™ã‚‹ã«ã¯ã€`:set -Wtype-defaults`ã¨å…¥åŠ›ã—ã¾ã™ã€‚

```haskell
ghci> :set -Wtype-defaults
ghci>
```

ä½•ã‚‚ã‚¨ãƒ©ãƒ¼ãŒå‡ºã¦ã„ãªã‘ã‚Œã°æˆåŠŸã§ã™ã€‚  
ãã®ã¾ã¾ã€é©å½“ãªæ•´æ•°ã®ãƒªãƒ†ãƒ©ãƒ«ã‚„ã€æ•´æ•°ã®ãƒªãƒ†ãƒ©ãƒ«ã‚’ä½¿ã£ãŸå¼ã‚’å…¥åŠ›ã—ã¦ã¿ã¦ãã ã•ã„ã€‚

```haskell
ghci> 1

<interactive>:17:1: warning: [-Wtype-defaults]
    â€¢ Defaulting the following constraints to type â€˜Integerâ€™
        (Show a0) arising from a use of â€˜printâ€™ at <interactive>:17:1
        (Num a0) arising from a use of â€˜itâ€™ at <interactive>:17:1
    â€¢ In a stmt of an interactive GHCi command: print it
1
ghci> 1 + 2 * 3

<interactive>:3:1: warning: [-Wtype-defaults]
    â€¢ Defaulting the following constraints to type â€˜Integerâ€™
        (Show a0) arising from a use of â€˜printâ€™ at <interactive>:3:1-9
        (Num a0) arising from a use of â€˜itâ€™ at <interactive>:3:1-9
    â€¢ In a stmt of an interactive GHCi command: print it
7
```

ä»°ã€…ã—ã„è­¦å‘Šã®å¾Œã«å¼ã®è©•ä¾¡çµæœãŒè¡¨ç¤ºã•ã‚Œã¾ã—ãŸã€‚  
ãã‚Œãã‚ŒåŒã˜å†…å®¹ã®è­¦å‘ŠãŒå‡ºã¦ã„ã‚‹ã®ãŒã‚ã‹ã‚‹ã§ã—ã‚‡ã†ã‹ï¼Ÿ  
ã„ãšã‚Œã‚‚è¦ç´„ã™ã‚‹ã¨ã€ã€Œ`Show`å‹ã‚¯ãƒ©ã‚¹ã¨`Num`å‹ã‚¯ãƒ©ã‚¹ã«ã‚ˆã‚‹åˆ¶ç´„ãŒã¤ã„ãŸå‹ã‚’ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®`Integer`å‹ã«è¨­å®šã—ã¾ã—ãŸã€ã¨ã„ã†æ„å‘³ã§ã™ã€‚  
ã“ã‚Œã¯ã€`:t 1`ãªã©ã§ç¢ºèªã—ãŸã¨ãŠã‚Šã€æ•´æ•°ã®ãƒªãƒ†ãƒ©ãƒ«ãŒã€Œ`Num`å‹ã‚¯ãƒ©ã‚¹ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã§ã‚ã‚‹ä½•ã‹ã®å‹ã€ã®å€¤ã‚’è¡¨ã—ã¦ãŠã‚Šã€ãã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãŒ`Integer`å‹ã«è¨­å®šã•ã‚Œã¦ã„ã‚‹ãŸã‚ã€è¡¨ç¤ºã•ã‚ŒãŸè­¦å‘Šã§ã™ã€‚

ãã‚Œã‹ã‚‰ã€æ•´æ•°ã¨åŒæ§˜ã«å°æ•°ç‚¹ã‚’å«ã‚ãŸæ•°å€¤ã®ãƒªãƒ†ãƒ©ãƒ«ã‚‚ç‰¹å®šã®å‹ã®å€¤ã§ã¯ãªãã€`Fractional`ã¨ã„ã†ã€Œå‹ã‚¯ãƒ©ã‚¹ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã§ã‚ã‚‹å‹ã®ã†ã¡ã®ä½•ã‹ã€ã®å€¤ã¨ãªã£ã¦ã„ã¾ã™ã€‚  
`:t`ã—ã¦ç¢ºã‹ã‚ã¾ã—ã‚‡ã†ã€‚

```haskell
ghci> :t 1.2
1.2 :: Fractional p => p
```

`Fractional`å‹ã‚¯ãƒ©ã‚¹ã¯`Num`å‹ã‚¯ãƒ©ã‚¹ã®ç‰¹å¾´ã«åŠ ãˆã¦ã€ï¼ˆçµæœã«å°æ•°ç‚¹ä»¥ä¸‹ã®å€¤ã‚’å«ã¿ã†ã‚‹[^div]ï¼‰å‰²ã‚Šç®—ãŒã§ãã‚‹ã€ã¨ã„ã†ç‰¹å¾´ã‚‚å‚™ãˆã¦ã„ã¾ã™ã€‚å‰²ã‚Šç®—ã¨èã„ã¦å¤šãã®æ–¹ãŒã‚¤ãƒ¡ãƒ¼ã‚¸ã™ã‚‹ã§ã‚ã‚ã†ã€`/`ã‚’ä½¿ã†ã“ã¨ãŒã§ãã¾ã™ã€‚

[^div]: çµæœãŒå¿…ãšæ•´æ•°ã«ãªã‚‹å‰²ã‚Šç®—ã«ã¤ã„ã¦ã¯ã€`Integral`å‹ã‚¯ãƒ©ã‚¹ãŒæ‹…ã„ã¾ã™ã€‚`Integral`å‹ã‚¯ãƒ©ã‚¹ã«ã¤ã„ã¦ã¯hogeèª²é¡Œã§å–ã‚Šä¸Šã’ã‚‹äºˆå®šã§ã™ã€‚

```haskell
ghci> :t 1.2 / 3
1.2 / 3 :: Fractional a => a
ghci> 1.2 / 3

<interactive>:7:1: warning: [-Wtype-defaults]
    ? Defaulting the following constraints to type â€˜Doubleâ€™
        (Show a0) arising from a use of â€˜printâ€™ at <interactive>:7:1-7
        (Fractional a0) arising from a use of â€˜itâ€™ at <interactive>:7:1-7
    ? In a stmt of an interactive GHCi command: print it
0.39999999999999997
```

`1.2 / 3`ã®çµæœã‚’è¦‹ã‚ˆã†ã¨ã™ã‚‹ã¨ã€å†ã³ä»°ã€…ã—ã„è­¦å‘Šã®å¾Œã«çµæœãŒè¡¨ç¤ºã•ã‚Œã¾ã—ãŸã€‚  
ã“ã¡ã‚‰ã¯å…ˆã»ã©`1`ã¨ã‹`1 + 2 * 3`ã¨å…¥åŠ›ã—ãŸã¨ãã¨åŒã˜ç¨®é¡ã®è­¦å‘Šã§ã™ã€‚  
å°æ•°ç‚¹ä»¥ä¸‹ã‚’å«ã‚ãŸæ•°å€¤ãƒªãƒ†ãƒ©ãƒ«ã®ã¿ã‚’æ›¸ã„ãŸå ´åˆã§ã‚‚ã€ã‚„ã¯ã‚ŠåŒã˜è­¦å‘ŠãŒå‡ºã¾ã™ã€‚

```haskell
ghci> 1.2

<interactive>:9:1: warning: [-Wtype-defaults]
    â€¢ Defaulting the following constraints to type â€˜Doubleâ€™
        (Show a0) arising from a use of â€˜printâ€™ at <interactive>:9:1-3
        (Fractional a0) arising from a use of â€˜itâ€™ at <interactive>:9:1-3
    â€¢ In a stmt of an interactive GHCi command: print it
1.2
```

æ•°å€¤ãƒªãƒ†ãƒ©ãƒ«ã§è¡¨ã•ã‚Œã‚‹å‹ã¯ã€ä»–ã«ã‚‚ã‚ã‚Šã¾ã™ã€‚  
ã“ã®å…ˆã®èª²é¡Œã§æŠ˜ã«è§¦ã‚Œã¦ç´¹ä»‹ã—ã¾ã—ã‚‡ã†ï¼ˆã¡ãªã¿ã«ã€è‡ªåˆ†ã§å®šç¾©ã—ãŸå‹ã‚’`Show`å‹ã‚¯ãƒ©ã‚¹ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã«ã™ã‚‹ã®ã¨åŒã˜è¦é ˜ã§ã€`Num`å‹ã‚¯ãƒ©ã‚¹ãªã©ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã«ã™ã‚Œã°ã€è‡ªåˆ†ã§å®šç¾©ã—ãŸå‹ã‚’æ•°å€¤ãƒªãƒ†ãƒ©ãƒ«ã‹ã‚‰ä½œã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ï¼ï¼‰ã€‚

## èª²é¡Œã®è§£ãæ–¹

èª²é¡Œ6ã§æ›¸ã„ãŸã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒšã—ã¤ã¤ã€å¿…ãš`Entry`å‹ã‚’`deriving Show`ã§`Show`å‹ã‚¯ãƒ©ã‚¹ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã«ã—ãŸä¸Šã§è§£ã„ã¦ãã ã•ã„ã€‚
