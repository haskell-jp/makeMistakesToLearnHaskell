# `IO`以外でも`do`を使う: Either編

課題21のアプリケーションを改良して、連想配列に該当する要素が見つからなかった場合に、どの連想配列から見つからなかったのか出力しましょう。

1. コマンドライン引数のリストを取得します。
2. コマンドライン引数のリストの長さが
    1. 「1」であれば、その要素を用いて、課題21と同じ4つの連想配列から対応する要素を検索します。
        1. 「好きな果物」の連想配列に該当する要素がなかった場合、「`Fruit not found. He/She might like vegitables better.`」と出力し、アプリケーションを終了します。
        2. 「生年月日」の連想配列に該当する要素がなかった場合、「`Birthday not found. He/She might want to hide his/her age.`」と出力し、アプリケーションを終了します。
        3. 「メールアドレス」の連想配列に該当する要素がなかった場合、「`Mail address not found. He/She might be afraid of spams.`」と出力し、アプリケーションを終了します。
        4. 「住んでいる都道府県」の連想配列に該当する要素がなかった場合、「`Prefecture not found. Where does he/she live?`」と出力し、アプリケーションを終了します。
        5. 4つの連想配列**すべて**に該当する要素があった場合、それらをすべて標準出力に出力します （この場合における出力形式は課題21と同様です）。
    2. それ以外の場合は、「`Invalid arguments: <コマンドライン引数のリスト>`」という形式のメッセージを例外としてスローし、終了します。

## 必要な知識

### `Either`で「失敗の詳細」を表現する

課題17の直和型: 「値の種類によって、保持できる値を切り替えられる型」

`Maybe`はその直和型の性質を利用し、値コンストラクターが`Just`の場合のみ値を格納できるようにすることで、値をとれなかった場合の値`Nothing`を表現できるようにした

```haskell
ghci> :i Maybe
data Maybe a = Nothing | Just a         -- Defined in ‘GHC.Maybe’
-- ... 以下略 ...
```

しかし、今回の課題のように、「要素が見つからなかった場合に、どの連想配列から見つからなかったのか」という情報を処理する場合は、`Maybe`では不十分です。

### `Either`にも`<$>`・`<*>`・`>>=`・`do`を使う

### errorsパッケージで`Maybe`から`Either`に変換する

### 番外編: errorsパッケージで`Either`から`Maybe`に変換する

### 番外編: 見つからなかった連想配列すべてを列挙する
