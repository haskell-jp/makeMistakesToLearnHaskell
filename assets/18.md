# ã‚‚ã£ã¨ç°¡æ½”ã«æ›¸ã

èª²é¡Œ16ã®å›ç­”ã‚’æ›¸ãæ›ãˆã¦ã€ã§ãã‚‹ã ã‘ç°¡æ½”ã«æ›¸ã„ã¦ã¿ã¾ã—ã‚‡ã†ã€‚  
ä»Šå›ã¯ç´”ç²‹ã«ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ã‚’ã—ã¦ãã ã•ã„ã€‚ç‰¹ã«æŒ¯ã‚‹èˆã„ã‚’å¤‰ãˆã‚‹å¿…è¦ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚

## å¿…è¦ãªçŸ¥è­˜

Haskellã«ã¯ã€ã‚³ãƒ¼ãƒ‰ã‚’æ¥µã‚ã¦ç°¡æ½”ã«æ›¸ããƒ†ã‚¯ãƒ‹ãƒƒã‚¯ãŒã€ãŸãã•ã‚“ã‚ã‚Šã¾ã™ã€‚ã“ã®èª²é¡Œã§ã¯ã€ãã†ã—ãŸãƒ†ã‚¯ãƒ‹ãƒƒã‚¯ã®ã†ã¡ã€ç‰¹ã«ã‚ˆãä½¿ã‚ã‚Œã‚‹ã‚‚ã®ã‚’ç´¹ä»‹ã—ã¾ã™ã€‚ã¿ãªã•ã‚“ãŒHaskellã‚’æ›¸ãã¨ãã«å¿…ãšã—ã‚‚ã“ã“ã§å­¦ç¿’ã—ãŸã“ã¨ã‚’ä½¿ã†å¿…è¦ã¯ãªã„ã§ã™ãŒã€æ—¢å­˜ã®Haskellè£½ã‚³ãƒ¼ãƒ‰ã®ä¸­ã§ã‚‚é«˜ç¢ºç‡ã§ä½¿ã‚ã‚Œã¦ã„ã‚‹ã®ã§ã€æ˜¯éç¿’å¾—ã—ã¦ãã ã•ã„ã€‚

### ï¼ˆã‚«ãƒªãƒ¼åŒ–ã•ã‚ŒãŸï¼‰é–¢æ•°ã®éƒ¨åˆ†é©ç”¨

ã¾ãšã¯ã€é–¢æ•°ã®éƒ¨åˆ†é©ç”¨ã¨ã„ã†æ‰‹æ³•ã‚’çŸ¥ã‚‹ã“ã¨ã§ã€é©åº¦ã«é–¢æ•°ã®å®šç¾©ã‚’æ›¸ã‹ãšã«æ¸ˆã¾ã™ãƒ†ã‚¯ãƒ‹ãƒƒã‚¯ã®ã»ã‹ã€Haskellã«ãŠã‘ã‚‹é–¢æ•°`->`ã®ç§˜å¯†ã‚‚çŸ¥ã‚Šã¾ã—ã‚‡ã†ã€‚

ã¾ãšã¯ä¸€ä¾‹ã¨ã—ã¦ã€`map`é–¢æ•°ã®å‹å®šç¾©ã‚’æ€ã„å‡ºã—ã¦ãã ã•ã„:

```haskell
ghci> :t map
map :: (a -> b) -> [a] -> [b]
```

é–¢æ•°`(a -> b)`ã¨ãƒªã‚¹ãƒˆ`[a]`ã¨ã„ã†ã€äºŒã¤ã®å¼•æ•°ã‚’å—ã‘å–ã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ã­ã€‚

```haskell
ghci> map (\x -> x * 2) [3, 8, 9]
[6,16,18]
```

ã§ã¯ã“ã‚Œã«ä¸€ã¤ç›®ã®å¼•æ•°ã§ã‚ã‚‹ã€é–¢æ•°`(a -> b)`ã®ã¿ã‚’é©ç”¨ã™ã‚‹ã¨ã©ã†ãªã‚‹ã§ã—ã‚‡ã†ã‹:

```haskell
ghci> map (\x -> x * 2)

<interactive>:5:1: error:
    ? No instance for (Show ([Integer] -> [Integer]))
        arising from a use of â€˜printâ€™
        (maybe you haven't applied a function to enough arguments?)
    ? In a stmt of an interactive GHCi command: print it
```

æ¡ˆã®å®šã‚¨ãƒ©ãƒ¼ã«ãªã‚Šã¾ã—ãŸã€‚`No instance for (Show ([Integer] -> [Integer]))`ã¨ã„ã†è¡Œã§å§‹ã¾ã‚‹ã“ã®ã‚¨ãƒ©ãƒ¼ã¯ã€ã€Œæ•´æ•°ã®ãƒªã‚¹ãƒˆã‚’å—ã‘å–ã£ã¦æ•´æ•°ã®ãƒªã‚¹ãƒˆã‚’è¿”ã™é–¢æ•°`[Integer] -> [Integer]`ã¯ã€`Show`å‹ã‚¯ãƒ©ã‚¹ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã§ã¯ãªã„ã€ã¨ã„ã†æ„å‘³ã®å‹ã‚¨ãƒ©ãƒ¼ã§ã™ã€‚GHCiã¯å…¥åŠ›ã—ãŸHaskellã®å¼ã‚’è©•ä¾¡ã—ãŸå¾Œã€çµæœã‚’`print`é–¢æ•°ã§è¡¨ç¤ºã™ã‚‹ã®ã§ã€è©•ä¾¡ã—ãŸçµæœã®å€¤ã¯`Show`å‹ã‚¯ãƒ©ã‚¹ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã§ãªã‘ã‚Œã°ãªã‚‰ãªã„ã®ã§ã—ãŸã€‚

ã“ã“ã‹ã‚‰ãŒæœ¬é¡Œã§ã™ã€‚`No instance for (Show ([Integer] -> [Integer]))`ã«ãŠã‘ã‚‹ã€ã€Œæ•´æ•°ã®ãƒªã‚¹ãƒˆã‚’å—ã‘å–ã£ã¦æ•´æ•°ã®ãƒªã‚¹ãƒˆã‚’è¿”ã™é–¢æ•°`[Integer] -> [Integer]`ã€ã¨ã„ã†å‹ã®å¼ã¨ã¯ã€ä¸€ä½“ä½•ã®ã“ã¨ã§ã—ã‚‡ã†ï¼Ÿãã†ã€å…¥åŠ›ã—ãŸ`map (\x -> x * 2)`ã®ã“ã¨ã§ã™ã€‚`map (\x -> x * 2)`ã¯ã€`[Integer] -> [Integer]`ã¨ã„ã†å‹ã®å€¤ãªã®ã§ã™ï¼

æ¯åº¦ãŠãªã˜ã¿`:t`ã‚³ãƒãƒ³ãƒ‰ã§ã‚‚ãƒã‚§ãƒƒã‚¯ã—ã¦ã¿ã¾ã—ã‚‡ã†:

```haskell
ghci> :t map (\x -> x * 2)
map (\x -> x * 2) :: Num b => [b] -> [b]
```

`map (\x -> x * 2)`ã®å‹ã¯ã€`Num b => [b] -> [b]`ã€ã™ãªã‚ã¡`Num`å‹ã‚¯ãƒ©ã‚¹ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã§ã‚ã‚‹å‹`b`ï¼ˆæ•°å€¤å‹ï¼‰ã®å€¤ã®ãƒªã‚¹ãƒˆã‚’å—ã‘å–ã£ã¦ã€åŒã˜ã`b`ã®ãƒªã‚¹ãƒˆã‚’è¿”ã™é–¢æ•°ã ãã†ã§ã™ã€‚å…ˆã»ã©å‹ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ãŸéš›ã¯`[Integer] -> [Integer]`ã¨è¨€ã£ã¦ã„ãŸã®ã«ã€é£Ÿã„é•ã£ã¦ã¾ã™ã­ã€‚ã“ã‚Œã¯èª²é¡Œhoge(7?)ã§è§£èª¬ã—ãŸã€`Num`å‹ã‚¯ãƒ©ã‚¹ã®ã€Œãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®å‹ã€ãŒæ¡ç”¨ã•ã‚ŒãŸçµæœã§ã™ã€‚`Num`å‹ã‚¯ãƒ©ã‚¹ã«ã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®å‹ã¨ã—ã¦`Integer`å‹ï¼ˆæ•´æ•°å‹ï¼‰ãŒè¨­å®šã•ã‚Œã¦ã„ã‚‹ã®ã§ã€GHCiãŒå¼ã‚’è©•ä¾¡ã—ã‚ˆã†ã¨ã—ãŸã‘ã©`Num`å‹ã‚¯ãƒ©ã‚¹ã®å‹ãŒæ±ºã¾ã‚‰ãªã‹ã£ãŸã€ã¨ã„ã†å ´åˆã¯`Integer`ãŒä½¿ç”¨ã•ã‚Œã‚‹ã®ã§ã™ã€‚

ã„ãšã‚Œã«ã—ã¦ã‚‚ã€`Integer`å‹ã‚¯ãƒ©ã‚¹ã¯`Num`å‹ã‚¯ãƒ©ã‚¹ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ãªã®ã§ã€`map (\x -> x * 2)`ã«`[Integer]`å‹ã€ã™ãªã‚ã¡æ•´æ•°ã®ãƒªã‚¹ãƒˆã‚’æ¸¡ã›ã°ã€`[Integer]`ã€æ•´æ•°ã®ãƒªã‚¹ãƒˆãŒè¿”ã£ã¦ãã‚‹ã¯ãšã§ã™ã€‚è©¦ã—ã«æ¸¡ã—ã¦ã¿ã¾ã—ã‚‡ã†ï¼

```haskell
ghci> doubles = map (\x -> x * 2)
ghci> doubles [3, 8, 9]
[6,16,18]
```

`map (\x -> x * 2) [3, 8, 9]`ã¨åŒã˜çµæœãŒè¿”ã‚Šã¾ã—ãŸï¼

ãªãœã“ã®ã‚ˆã†ãªæŒ¯ã‚‹èˆã„ã«ãªã‚‹ã®ã§ã—ã‚‡ã†ã‹ï¼Ÿãã®ç§˜å¯†ã¯ã€Haskellã«ãŠã‘ã‚‹é–¢æ•°å‹ã®ã€ã‚ã‚‹ç‰¹å¾´ã«ã‚ã‚Šã¾ã™ã€‚æ¬¡ã®ã‚ˆã†ãªã€ã€Œ`a`ã¨ã„ã†å‹ã®å€¤ã¨`b`ã¨ã„ã†å‹ã®å€¤ã‚’å—ã‘å–ã£ã¦`c`ã¨ã„ã†å‹ã®å€¤ã‚’è¿”ã™é–¢æ•°ã‚’ä¾‹ã«ã—ã¾ã—ã‚‡ã†:

```haskell
a -> b -> c
```

ã“ã®ã‚ˆã†ã«2ã¤ï¼ˆä»¥ä¸Šï¼‰ã®å¼•æ•°ã‚’å—ã‘å–ã‚‹é–¢æ•°å‹ã«ã€ã‚«ãƒƒã‚³ã‚’è£œã†ã¨ã€å®Ÿã¯Haskellã¯æ¬¡ã®ã‚ˆã†ã«è§£é‡ˆã—ã¦ã„ã‚‹ã“ã¨ãŒã‚ã‹ã‚Šã¾ã™:

```haskell
a -> (b -> c)
```

ä¸Šè¨˜ã®ã‚ˆã†ã«ã€`a -> (b -> c)`ã¯ã€`a`ã¨ã„ã†å‹ã®å€¤ã‚’ä¸€ã¤å—ã‘å–ã£ã¦ã€`(b -> c)`ã¨ã„ã†å‹ã®é–¢æ•°ã‚’è¿”ã™é–¢æ•°ã§ã™ã€‚`a`å‹ã®å€¤ã‚’1ã¤å—ã‘å–ã‚‹ã“ã¨ã«ã‚ˆã£ã¦ã€

```haskell
(b -> c)
```

ã¨ã„ã†ã€å¼•æ•°ã‚’ï¼ˆæ®‹ã‚Šï¼‰ä¸€ã¤å—ã‘å–ã‚‹é–¢æ•°ã«ãªã‚‹ã®ã§ã™ã€‚

Haskellã«ã¯ã€å³å¯†ãªæ„å‘³ã§ã¯ã€Œä¸€ã¤ã®å¼•æ•°ã‚’å—ã‘å–ã£ã¦ä¸€ã¤ã®å€¤ã‚’è¿”ã™é–¢æ•°ã€ã—ã‹å­˜åœ¨ã—ã¾ã›ã‚“ã€‚`a -> b -> c`ã®ã‚ˆã†ã«ã€2ã¤ä»¥ä¸Šã®å¼•æ•°ã‚’å—ã‘å–ã‚‹ã‚ˆã†æŒ¯ã‚‹èˆã†é–¢æ•°ã¯ã€ã€Œé–¢æ•°ã‚’è¿”ã™é–¢æ•°ã€ã‚’çµ„ã¿åˆã‚ã›ã‚‹ã“ã¨ã«ã‚ˆã£ã¦è¡¨ç¾ã•ã‚Œã¾ã™ã€‚

æ³¨æ„âš ï¸ Haskellã«ã¯å³å¯†ã«ã¯ã€Œä¸€ã¤ã®å¼•æ•°ã‚’å—ã‘å–ã£ã¦ä¸€ã¤ã®å€¤ã‚’è¿”ã™é–¢æ•°ã€ã—ã‹ãªã„ã¨ç”³ã—ã¾ã—ãŸãŒã€å®Ÿéš›ã«`a -> b -> c`ã®ã‚ˆã†ãªé–¢æ•°ã«ã¤ã„ã¦è©±ã™æ™‚ã¯ã€Œã“ã®é–¢æ•°ã¯äºŒã¤ã®å¼•æ•°ã‚’å—ã‘å–ã‚‹ã€ã¨ã„ã£ãŸè¡¨ç¾ã‚’æ™®é€šã«ä½¿ç”¨ã—ã¾ã™ã€‚æœ¬å…¥é–€ã®ã“ã‚Œä»¥é™ã§ã‚‚ç”¨ã„ã‚‹äºˆå®šã§ã™ã®ã§ã€ŒHaskellã«ã¯ä¸€ã¤ã®å¼•æ•°ã‚’å—ã‘å–ã‚‹é–¢æ•°ã—ã‹ãªã„ã®ã ã‹ã‚‰ï½ã€ãªã©ã¨ã¯ã„ã¡ã„ã¡è€ƒãˆãªãã¦çµæ§‹ã§ã™ã€‚

ã“ã®ç‰¹å¾´ã‚’åˆ©ç”¨ã™ã‚‹ã¨ã€ä½™è¨ˆãªãƒ©ãƒ ãƒ€æŠ½è±¡ã‚’æ›¸ã‹ãšã«æ¸ˆã¾ã›ãŸã‚Šã€å¼•æ•°ã®åå‰ã‚’è€ƒãˆãšã«æ¸ˆã¾ã›ãŸã‚Šã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

ä¾‹ãˆã°ã€Œæ–‡å­—åˆ—ã®ãƒªã‚¹ãƒˆã«ãŠã‘ã‚‹ã€ã™ã¹ã¦ã®æ–‡å­—ã‚’å¤§æ–‡å­—ã«ã™ã‚‹ã€ã¨ã„ã†å‡¦ç†ã‚’æ¬¡â†“ã®ã‚ˆã†ã«æ›¸ã„ã¦ã„ãŸã¨ã—ã¾ã™:

```haskell
ghci> import Data.Char

ghci> map (\s -> map toUpper s) ["hello", "world!"]
["HELLO","WORLD!"]
```

ã“ã¡ã‚‰ã®`(\s -> map toUpper s)`ã¯ã€ã€Œ`map`é–¢æ•°ã«`toUpper`é–¢æ•°ã‚’æ¸¡ã—ã¦ä½œã£ãŸé–¢æ•°ã€ã«å¼•æ•°`s`ã‚’æ¸¡ã—ã¦ã„ã‚‹ã ã‘ã®é–¢æ•°ãªã®ã§ã€æ¬¡â†“ã®ã‚ˆã†ã«æ›¸ãæ›ãˆã‚‹ã“ã¨ãŒã§ãã¾ã™:

```haskell
ghci> map (map toUpper) ["hello", "world!"]
["HELLO","WORLD!"]
```

ã“ã®ã‚ˆã†ã«ã€`a -> b -> c`ã¨ã„ã£ãŸå‹ã®è¤‡æ•°ã®å¼•æ•°ã‚’å—ã‘å–ã‚‹é–¢æ•°ã‹ã‚‰ã€æœ€åˆã®ã„ãã¤ã‹ã®å¼•æ•°ã ã‘ã‚’é©ç”¨ã—ãŸæ–°ã—ã„é–¢æ•°ã‚’ä½œã‚‹ã“ã¨ã‚’ã€Œéƒ¨åˆ†é©ç”¨ã€ã¨è¨€ã„ã¾ã™ã€‚Haskellã§ã¯éƒ¨åˆ†é©ç”¨ã‚’åˆ©ç”¨ã™ã‚‹ã“ã¨ã§ã€ä¸€ã¤ã®é–¢æ•°ã‹ã‚‰ç°¡å˜ã«æ–°ã—ã„é–¢æ•°ã‚’ä½œã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

ã¨ã“ã‚ã§ã€ã“ã“ã§ä¸€ã¤æ€ã„å‡ºã—ã¦ã„ãŸã ããŸã„ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚ä¾‹ãˆã°`map`é–¢æ•°ã®ã‚ˆã†ã«ã€ã“ã‚Œã¾ã§ç´¹ä»‹ã—ãŸã€Œé–¢æ•°ã‚’å—ã‘å–ã‚‹é–¢æ•°ã€ã¯ã“ã‚“ãªå‹ã§ã—ãŸ:

```haskell
ghci> :t map
map :: (a -> b) -> [a] -> [b]
```

ã‚‚ã—ã“ã®`(a -> b) -> [a] -> [b]`ã®`(a -> b)`ã‹ã‚‰ã‚«ãƒƒã‚³ã‚’å–ã‚Šé™¤ã„ã¦ã€

```haskell
map :: a -> b -> [a] -> [b]
```

ã¨ã„ã†å‹ã«ã—ãŸã‚‰ã€ã©ã®ã‚ˆã†ãªæ„å‘³ã«ãªã‚‹ã®ã§ã—ã‚‡ã†ã‹ï¼Ÿ

å®Ÿã¯`a -> b -> [a] -> [b]`ã¨ã„ã†å‹ã®é–¢æ•°ã«ã—ãŸã‚‰ã€Œ`a`å‹ã®å€¤ã€`b`å‹ã®å€¤ã€`[a]`å‹ã®å€¤ã¨ã„ã†**ä¸‰ã¤ã®**å¼•æ•°ã‚’å—ã‘å–ã‚Šã€`[b]`å‹ã®å€¤ã‚’è¿”ã™é–¢æ•°ã€ã¨ã„ã†æ„å‘³ã«ãªã£ã¦ã—ã¾ã„ã¾ã™ã€‚Haskellã«ã¯å³å¯†ãªæ„å‘³ã§ã¯ã€Œä¸€ã¤ã®å¼•æ•°ã‚’å—ã‘å–ã‚‹é–¢æ•°ã€ã—ã‹ãªã„ã®ã§ãã‚Œã«å‰‡ã£ã¦è¨€ã„æ›ãˆã‚‹ã¨ã€Œ`a`å‹ã®å€¤ã‚’å—ã‘å–ã£ã¦ã€`b`å‹ã®å€¤ã‚’å—ã‘å–ã£ã¦ã€Š`[a]`å‹ã®å€¤ã‚’å—ã‘å–ã£ã¦`[b]`å‹ã®å€¤ã‚’è¿”ã™é–¢æ•°ã€‹ã€ã‚’è¿”ã™é–¢æ•°ã€ã‚’è¿”ã™é–¢æ•°ã€ã§ã™ã€‚ã¤ã¾ã‚Šã‚«ãƒƒã‚³ã‚’è£œã£ã¦æ›¸ãæ›ãˆã‚‹ã¨ã€ã“ã‚“ãªé–¢æ•°ã«ãªã£ã¦ã„ã‚‹ã‚‚ã®ã¨è§£é‡ˆã•ã‚Œã¾ã™:

```haskell
map :: a -> (b -> ([a] -> [b]))
```

é–¢æ•°ã‚’è¡¨ã™`->`ã¨ã„ã†å‹ã¯ã€å³çµåˆï¼ˆåŒã˜å„ªå…ˆé †ä½ã®æ¼”ç®—å­ã‚’è¤‡æ•°ä¸¦ã¹ãŸã¨ãã€å³è¾ºã«æ›¸ã‹ã‚ŒãŸå¼ãŒå„ªå…ˆã—ã¦çµåˆã•ã‚Œã‚‹ï¼‰ãªã®ã§ã€ã‚«ãƒƒã‚³ã‚’æ›¸ãã“ã¨ã§åˆã‚ã¦ã€Œé–¢æ•°ã‚’å—ã‘å–ã‚‹é–¢æ•°ã€ã¨ã—ã¦å®£è¨€ã§ãã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ã€‚ã‚«ãƒƒã‚³ã‚’æ›¸ãå¿˜ã‚Œã‚‹ã¨ä¸Šè¨˜ã®ã‚ˆã†ã«æ€ã„ã®å¤–å¼•æ•°ã®å¤šã„é–¢æ•°ã«ãªã£ã¦ã—ã¾ã„ã¾ã™ã®ã§ã€ã”æ³¨æ„ãã ã•ã„ã€‚

### `:t` ã§æ¼”ç®—å­ã®å‹å®šç¾©ã‚‚èª¿ã¹ã‚‹ãƒ»æ¼”ç®—å­ã‚’æ™®é€šã®é–¢æ•°ã®ã‚ˆã†ã«å‰ç½®è¨˜æ³•ã§è¨˜è¿°ã™ã‚‹

æ¬¡ã®ãƒ†ã‚¯ãƒ‹ãƒƒã‚¯ã‚’å­¦ã¶å‰ã«ã€ã“ã‚Œã¾ã§è§¦ã‚Œã¦ã“ãªã‹ã£ãŸã€æ¼”ç®—å­ã®å‹å®šç¾©ã‚’ãƒã‚§ãƒƒã‚¯ã™ã‚‹æ–¹æ³•ã«ã¤ã„ã¦ç´¹ä»‹ã•ã›ã¦ãã ã•ã„ã€‚Haskellã§ã¯ã€`map`ã‚„`putStrLn`ã¨ã„ã£ãŸæ™®é€šã®é–¢æ•°ã«åŠ ãˆã¦ã€`+`ã‚„`&&`ãªã©ã®ã€Œæ¼”ç®—å­ã€ã‚‚æ™®é€šã®é–¢æ•°ã¨å…¨ãåŒã˜ã‚ˆã†ã«æ‰±ãˆã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ã€‚æ™®é€šã®é–¢æ•°ãŒ`map f [1, 2, 3]`ã¨ã„ã£ãŸå…·åˆã«**å¼•æ•°ã‚’é–¢æ•°ã®å¾Œã«æ›¸ãï¼ˆå‰ç½®è¨˜æ³•ã§è¨˜è¿°ã™ã‚‹ï¼‰**ã®ã«å¯¾ã—ã¦ã€`*`ã‚„`&&`ã¯`1 + 4`ã€`True && False`ã¨ã„ã£ãŸã‚ˆã†ã«ã€**å¼•æ•°ã‚’é–¢æ•°ã®å·¦å³ã«æ›¸ãï¼ˆä¸­ç½®è¨˜æ³•ã§è¨˜è¿°ã™ã‚‹ï¼‰**é–¢æ•°ã ã¨æ‰ãˆã¦ãã ã•ã„ã€‚

æ™®é€šã®é–¢æ•°ã¯å‰ç½®è¨˜æ³•ã§æ›¸ãã€æ¼”ç®—å­ã¯ä¸­å€¤è¨˜æ³•ã§æ›¸ãã€ã¨ã„ã†é•ã„ã‹ã‚‰ã€Haskellã®æ§‹æ–‡ã«ãŠã‘ã‚‹å–ã‚Šæ‰±ã„ã€ã™ãªã‚ã¡GHCãŒHaskellã®ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’èª­ã‚“ã§è§£é‡ˆã™ã‚‹æ™‚ã®æ‰±ã„ã‚‚ç•°ãªã‚Šã¾ã™ã€‚ãã®ãŸã‚ã€ä¾‹ãˆã°æ¬¡ã®ã‚ˆã†ã«`:t`ã‚³ãƒãƒ³ãƒ‰ã‚’ç›´æ¥æ¼”ç®—å­ã«ä½¿ç”¨ã—ã¦ã‚‚ã€ã‚¨ãƒ©ãƒ¼ã«ãªã£ã¦ã—ã¾ã„ã¾ã™:

```haskell
ghci> :t &&

<interactive>:1:1: error: parse error on input â€˜&&â€™
```

ã“ã‚Œã‚’ç›´ã™ã«ã¯`&&`ã‚’ã‚«ãƒƒã‚³`()`ã§å›²ã„ã¾ã™:

```haskell
ghci> :t (&&)
(&&) :: Bool -> Bool -> Bool
```

`&&`æ¼”ç®—å­ã¯å·¦è¾ºã¨å³è¾ºã«`Bool`å‹ã®å€¤ã‚’ã¨ã£ã¦`Bool`å‹ã®å€¤ã‚’è¿”ã™ã®ã§ã€`Bool -> Bool -> Bool`ã€ã™ãªã‚ã¡`Bool`å‹ã®å€¤ã‚’äºŒã¤å—ã‘å–ã£ã¦`Bool`å‹ã®å€¤ã‚’è¿”ã™é–¢æ•°ãªã®ã§ã™ã€‚

ã“ã‚Œã¯ã€èª²é¡Œhoge(16?)ã§`!`ã¨ã„ã†æ¼”ç®—å­ã‚’`import`ã™ã‚‹éš›ã€

```haskell
import Data.Map.Strict ((!))
```

ã¨ã€ã‚«ãƒƒã‚³ã§å›²ã£ã¦ã„ãŸã®ã¨åŒã˜ã“ã¨ã§ã™ã€‚`!`ã¨ã„ã†åå‰ã®æ¼”ç®—å­ã‚’æ™®é€šã®é–¢æ•°ã¨åŒã˜ã‚ˆã†ã«`import`ã™ã‚‹ã«ã¯ã€ã‚«ãƒƒã‚³`()`ã§å›²ã†å¿…è¦ãŒã‚ã‚‹ã®ã§ã™ã€‚

ä»¥ä¸Šã‹ã‚‰å¯Ÿã›ã‚‰ã‚Œã‚‹ã§ã—ã‚‡ã†ã‹ï¼Ÿå®Ÿã¯Haskellã«ãŠã‘ã‚‹æ¼”ç®—å­ã¯ã€ã‚«ãƒƒã‚³`()`ã§å›²ã†ã“ã¨ã«ã‚ˆã£ã¦ã€æ™®é€šã®é–¢æ•° --- å³å¯†ã«ã¯é–¢æ•°ã‚’å§‹ã‚ã¨ã™ã‚‹å¤‰æ•°ã®åå‰ã§ã‚ã‚‹ã€Œè­˜åˆ¥å­ã€ --- ã¨åŒã˜ã‚ˆã†ã«æ‰±ã‚ã‚Œã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

ãªã®ã§ã€ã“ã“ã¾ã§ç´¹ä»‹ã—ãŸ`:t`ã‚„`import`ã«é™ã‚‰ãšã€æ™®é€šã®è­˜åˆ¥å­ãŒæ›¸ã‘ã‚‹ã»ã¨ã‚“ã©ã‚ã‚‰ã‚†ã‚‹å ´é¢ã«ãŠã„ã¦ã€ã‚«ãƒƒã‚³ã§å›²ã£ãŸæ¼”ç®—å­ã‚’ä½¿ç”¨ã§ãã¾ã™:

```haskell
-- ä¾‹ãˆã°ã€æ™®é€šã®é–¢æ•°ã¨åŒæ§˜å‰ç½®é–¢æ•°ï¼ˆã®è­˜åˆ¥å­ï¼‰ã¨ã—ã¦æ‰±ã£ãŸã‚Šã€
ghci> (+) 7 4
11

-- ãã®ã¾ã¾å¤‰æ•°ã®è­˜åˆ¥å­ã¨ã—ã¦ã€å€¤ã‚’ä»£å…¥ã—ãŸã‚Šã§ãã¾ã™ï¼
ghci> (+) = "+ æ¼”ç®—å­ã¨åŒã˜è¦‹ãŸç›®ã ã‘ã©ä¸­ã«ã‚ã‚‹ã®ã¯æ–‡å­—åˆ—"

-- ã‚‚ã¡ã‚ã‚“ã€å¤‰æ•°ãªã®ã§ä»–ã®é–¢æ•°ã«æ¸¡ã™ã“ã¨ã‚‚ï¼
ghci> putStrLn (+)
+ æ¼”ç®—å­ã¨åŒã˜è¦‹ãŸç›®ã ã‘ã©ä¸­ã«ã‚ã‚‹ã®ã¯æ–‡å­—åˆ—
```

æ›´ã«ã€å‰ç¯€ã§ç´¹ä»‹ã—ãŸã€ŒHaskellã«ãŠã‘ã‚‹é–¢æ•°ã¯ã‚«ãƒªãƒ¼åŒ–ã•ã‚Œã¦ã„ã‚‹ã€ã¨ã„ã†ç‰¹å¾´ã‚’æ€ã„å‡ºã—ã¦ãã ã•ã„ã€‚ã€Œ2ã¤ä»¥ä¸Šã®å¼•æ•°ã‚’å—ã‘å–ã‚‹ã‚ˆã†æŒ¯ã‚‹èˆã†é–¢æ•°ã¯ã€ã€Œé–¢æ•°ã‚’è¿”ã™é–¢æ•°ã€ã‚’çµ„ã¿åˆã‚ã›ã‚‹ã“ã¨ã«ã‚ˆã£ã¦è¡¨ç¾ã€ã•ã‚Œã‚‹ã¨ã„ã†äº‹å®Ÿã¯ã€æ¼”ç®—å­ã«ã‚‚é©ç”¨ã•ã‚Œã¾ã™:

```haskell
-- (+) ã¨ã„ã†é–¢æ•°ã« 4 ã‚’æ¸¡ã™ã¨ã€
ghci> plus4 = (+) 4
-- 4 ã‚’è¶³ã™é–¢æ•°ãŒè¿”ã£ã¦ãã‚‹ã€‚
ghci> plus4 3
7
-- 4 + 3 ã¨åŒã˜

-- (-) ã¨ã„ã†é–¢æ•°ã« 10 ã‚’æ¸¡ã™ã¨ã€
ghci> subtractFrom10 = (-) 10
-- 10 ã‹ã‚‰ä½•ã‹ã‚’å¼•ãé–¢æ•°ãŒè¿”ã£ã¦ãã‚‹ã€‚
ghci> subtractFrom10 4
6
-- 10 - 4 ã¨åŒã˜
```

ã“ã®ç‰¹å¾´ã‚’åˆ©ç”¨ã™ã‚‹ã¨ã€æ¬¡ã®`(\x -> 100 * x)`ã‚ˆã†ã«ã€æ¼”ç®—å­ã‚’ä¸€åº¦ä½¿ã†ãŸã‚ã ã‘ã«ãƒ©ãƒ ãƒ€æŠ½è±¡ã‚’æ›¸ãå¿…è¦ãŒãªããªã‚Šã¾ã™:

```haskell
-- â†“ã®ã‚ˆã†ã«æ›¸ã„ã¦ã„ãŸã®ã‚’...
ghci> map (\x -> 100 * x) [1, 2, 3]
[100,200,300]

-- â†“ã®ã‚ˆã†ã«æ›¸ãæ›ãˆã‚‹ã“ã¨ãŒã§ãã‚‹ï¼
ghci> map ((*) 100) [1, 2, 3]
[100,200,300]
```

### é–¢æ•°é©ç”¨æ¼”ç®—å­`$`ã§ã‚«ãƒƒã‚³ã‚’æ¸›ã‚‰ã™

ç¶šã„ã¦ç´¹ä»‹ã™ã‚‹ã®ã¯ã€`$`ã¨ã„ã†æ¼”ç®—å­ã§ã™ã€‚`$`ã‚’ä½¿ã†ã“ã¨ã§ã€é–¢æ•°å‘¼ã³å‡ºã—ã®éš›ä½¿ç”¨ã™ã‚‹ã‚«ãƒƒã‚³ã‚’æ¸›ã‚‰ã™ã“ã¨ãŒã§ãã¾ã™ã€‚

`$`ã¯æ¼”ç®—å­ãªã®ã§ã€å…ˆç¨‹ç´¹ä»‹ã—ãŸé€šã‚Š`:t`ã‚³ãƒãƒ³ãƒ‰ã§å‹å®šç¾©ã‚’è¦‹ã‚‹ã«ã¯ã‚«ãƒƒã‚³ã§å›²ã£ã¦`($)`ã¨æ›¸ã„ã¦ãã ã•ã„:

```haskell
ghci> :t ($)
($) :: (a -> b) -> a -> b
```

ç¬¬1å¼•æ•°ï¼ˆæ¼”ç®—å­ãªã®ã§ã¾ãŸã®åã‚’å³è¾ºï¼‰ã«ã¯é–¢æ•°`(a -> b)`ã‚’ã€ç¬¬2å¼•æ•°ã«ã‚ãŸã‚‹å·¦è¾ºã«ã¯`a`å‹ã®å€¤ã‚’æ¸¡ã—ã¾ã™ã€‚åå‰ãŒåŒã˜å‹å¼•æ•°ã¯å¿…ãšåŒã˜å‹ã‚’è¡¨ã™ã€ã¨ã„ã†ãƒ«ãƒ¼ãƒ«ãŒã‚ã‚‹ã®ã§ã€å³è¾ºã®é–¢æ•°`(a -> b)`ã«ãŠã‘ã‚‹å¼•æ•°`a`ã¨ã€å·¦è¾ºã®å¼•æ•°`a`ã¯åŒã˜å‹ã¨ãªã‚Šã¾ã™ã€‚ãã—ã¦`(a -> b)`å‹ã®å€¤ã¨`a`å‹ã®å€¤ã‚’å—ã‘å–ã‚‹ã¨ã€`$`ã¯çµæœã¨ã—ã¦`b`å‹ã®å€¤ã‚’è¿”ã—ã¾ã™ã€‚ã“ã®`b`å‹ã¯å³è¾ºã®é–¢æ•°`(a -> b)`ã«ãŠã‘ã‚‹`b`ã€ã¤ã¾ã‚Šæˆ»ã‚Šå€¤ã®å‹ã¨åŒã˜ã§ã™ã€‚ã¾ã¨ã‚ã‚‹ã¨ã€`$`ã¯é–¢æ•°ã‚’ä¸€ã¤ã¨ã€ãã®é–¢æ•°ã®å¼•æ•°ã‚’å—ã‘å–ã‚Šã€ãã®é–¢æ•°ãŒè¿”ã™çµæœã®å‹ã¨åŒã˜å‹ã®å€¤ã‚’è¿”ã—ã¾ã™ã€‚

æ–‡ç« ã§ã®èª¬æ˜ã ã¨åˆ†ã‹ã‚Šã¥ã‚‰ã„ã®ã§ã€å®Ÿéš›ã«ä½¿ã£ã¦ã¿ã¾ã—ã‚‡ã†ã€‚å·¦è¾ºã«é–¢æ•°ã¨ã€å³è¾ºã«ãã®é–¢æ•°ã®å¼•æ•°ã‚’æ¸¡ã›ã°ä½¿ãˆã‚‹ã‚“ã§ã—ãŸã­ã€‚ã§ã‚ã‚Œã°ä¾‹ãˆã°æ¬¡ã®ã‚ˆã†ã«ä½¿ãˆã‚‹ã¯ãšã§ã™:

```haskell
ghci> words $ "abc def"
["abc","def"]

ghci> putStrLn $ "Hello, world!"
Hello, world!

ghci> show $ [1, 2, 3]
"[1,2,3]"
```

ä¸‰ã¤ä¾‹ã‚’æŒ™ã’ã¦ã¿ã¾ã—ãŸã€‚ç‰¹ã«ã‚¨ãƒ©ãƒ¼ã«ãªã‚‰ãšã€ã¡ã‚ƒã‚“ã¨ä½¿ãˆã¦ã„ã‚‹ã‚ˆã†ã§ã™ã­ã€‚ã§ã¯å®Ÿè¡Œã—ãŸçµæœã¯ã„ã‹ãŒã§ã—ã‚‡ã†ã‹...ï¼Ÿ

å®Ÿã¯ä¸Šè¨˜ã®å ´åˆã€`$`ã¨æ›¸ã„ã¦ã‚‚æ›¸ã‹ãªãã¦ã‚‚ä½•ã‚‚å¤‰ã‚ã‚Šã¾ã›ã‚“ï¼

```haskell
ghci> words "abc def"
["abc","def"]

ghci> putStrLn "Hello, world!"
Hello, world!

ghci> show [1, 2, 3]
"[1,2,3]"
```

`$`ã¨ã„ã†æ¼”ç®—å­ã¯ã€å·¦è¾ºã«æ¸¡ã—ãŸé–¢æ•°ã«ã€å³è¾ºã«æ¸¡ã—ãŸå¼•æ•°ã‚’æ¸¡ã—ã¦å®Ÿè¡Œã—ã€ãã®çµæœã‚’è¿”ã™ã€ãŸã ãã‚Œã ã‘ã®æ¼”ç®—å­ãªã®ã§ã™ã€‚ä¸€ä½“ãã‚ŒãŒä½•ã®å½¹ã«ç«‹ã¤ã®ã§ã—ã‚‡ã†ã‹ï¼Ÿãã‚Œã‚’çŸ¥ã‚‹ãŸã‚ã«ã¯ã€GHCiã®`:i`ã¨ã„ã†ã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ã†ã®ãŒåˆ†ã‹ã‚Šã‚„ã™ã„ã§ã™ã€‚

#### `:i`ã‚³ãƒãƒ³ãƒ‰ã§ã€æ¼”ç®—å­ã®çµåˆã®å„ªå…ˆé †ä½ã‚’ç¢ºèªã™ã‚‹

â€»ãŠã“ã¨ã‚ã‚Š: ã€Œçµåˆã®å„ªå…ˆé †ä½ã€ã«ã¤ã„ã¦ã¯å¾Œã»ã©èª¬æ˜ã—ã¾ã™ã€‚

GHCiã®`:i`ã‚³ãƒãƒ³ãƒ‰ï¼ˆ`:info`ã®ç•¥ï¼‰ã¯ã€æŒ‡å®šã—ãŸè­˜åˆ¥å­ï¼ˆå¤‰æ•°ãªã©ã®åå‰ï¼‰ã®å‹ã ã‘ã§ãªãã€è­˜åˆ¥å­ãŒè¡¨ã™ã‚‚ã®ã®ç¨®é¡ã«å¿œã˜ã¦ã€ä¾¿åˆ©ãªæƒ…å ±ã‚’è‰²ã€…æ•™ãˆã¦ãã‚Œã¾ã™ã€‚ä¾‹ãˆã°ä»¶ã®`$`ã¨ã„ã£ãŸæ¼”ç®—å­ã®å ´åˆã€æ¼”ç®—å­ã®çµåˆã®å„ªå…ˆé †ä½ã¾ã§æ•™ãˆã¦ãã‚Œã¾ã™:

```haskell
ghci> :i ($)
($) :: (a -> b) -> a -> b       -- Defined in â€˜GHC.Baseâ€™
infixr 0 $
```

æœ€å¾Œã®è¡Œã«ã‚ã‚‹`infixr 0 $`ã¨ã„ã†ç®‡æ‰€ãŒã€æ¼”ç®—å­ã®å„ªå…ˆé †ä½ã‚’è¡¨ã—ã¦ã„ã¾ã™ã€‚`infixr`ã¨ã„ã†ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ãŒã€`$`æ¼”ç®—å­ãŒå³çµåˆã®æ¼”ç®—å­ã§ã‚ã‚‹ã“ã¨ã‚’ç¤ºã—ã¾ã™ï¼ˆå·¦çµåˆã®å ´åˆã¯`infixl`ã¨æ›¸ã‹ã‚Œã¾ã™ï¼‰ã€‚`infixr`ã«ç¶šã„ã¦æ›¸ã‹ã‚Œã¦ã„ã‚‹`0`ã¨ã„ã†æ•°å­—ãŒã€çµåˆã®å„ªå…ˆé †ä½ã‚’ç¤ºã—ã¦ã„ã¾ã™ã€‚`0`ã‹ã‚‰`9`ã¾ã§ã®æ•°å­—ã‚’æ›¸ã‘ã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã—ã¦ã€æ•°å­—ãŒå¤§ãã‘ã‚Œã°å¤§ãã„ã»ã©ã€çµåˆã®å„ªå…ˆé †ä½ãŒé«˜ããªã‚Šã¾ã™ã€‚ã¤ã¾ã‚Šã€`infixr 0`ã§ã‚ã‚‹`$`æ¼”ç®—å­ã¯ã€Œå³çµåˆã®æ¼”ç®—å­ã§ã€æœ€ã‚‚çµåˆã®å„ªå…ˆé †ä½ãŒä½ã„ã€ã¨å®šç¾©ã•ã‚Œã¦ã„ã¾ã™ã€‚

ä»–ã®æ¼”ç®—å­ã¨ã‚‚æ¯”ã¹ã¦ã¿ã¾ã—ã‚‡ã†ã€‚

```haskell
ghci> :i (+)
-- ... çœç•¥ ...
infixl 6 +

ghci> :i (-)
-- ... çœç•¥ ...
infixl 6 -

ghci> :i (*)
-- ... çœç•¥ ...
infixl 7 *

ghci> :i (/)
-- ... çœç•¥ ...
infixl 7 /
```

è¶³ã—ç®—`(+)`å¼•ãç®—`(-)`ã‚ˆã‚Šã‹ã‘ç®—`(*)`å‰²ã‚Šç®—`(/)`ã®æ–¹ãŒå„ªå…ˆé †ä½ãŒé«˜ãã€å·¦çµåˆã«ãªã£ã¦ã„ã‚‹ã“ã¨ãŒã‚ã‹ã‚Šã¾ã™ã€‚ã„ãšã‚Œã«ã—ã¦ã‚‚`infixr 0 $`ã‚ˆã‚Šã¯çµåˆã®å„ªå…ˆé †ä½ãŒé«˜ã„ã‚ˆã†ã§ã™ã­ã€‚

ã•ã¦ã€ã“ã“ã¾ã§ã€Œæ¼”ç®—å­ã®çµåˆã®å„ªå…ˆé †ä½ã€ã¨ã„ã†è¨€è‘‰ã‚’ä½•ã®èª¬æ˜ã‚‚ãªãä½¿ç”¨ã—ã¾ã—ãŸã€‚ä»–ã®å¤šãã®ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°è¨€èªã«ã‚‚ã‚ã‚‹æ¦‚å¿µã§ã¯ã‚ã‚Šã¾ã™ãŒã€æ™®æ®µã‚ã¾ã‚Šæ„è­˜ã—ãªã„ã‹ã¨æ€ã„ã¾ã™ã®ã§ã€ã“ã“ã§èª¬æ˜ã—ã¦ãŠãã¾ã—ã‚‡ã†ã€‚

ã€Œæ¼”ç®—å­ã®çµåˆã®å„ªå…ˆé †ä½ã€ã¯ã€ä¾‹ãˆã°æ¬¡ã®ã‚ˆã†ãªã€æ¼”ç®—å­ã‚’è¤‡æ•°ä½¿ã£ãŸå¼ã‚’ã‚¤ãƒ¡ãƒ¼ã‚¸ã™ã‚‹ã¨èª¬æ˜ã—ã‚„ã™ã„ã§ã™:

```haskell
1 + 2 * 3
```

ã‚ˆãçŸ¥ã‚‰ã‚Œã¦ã„ã‚‹æ•°å­¦ã®æ…£ç¿’ä¸Šã€ã‹ã‘ç®—ã¯è¶³ã—ç®—ã‚ˆã‚Šå…ˆã«è¨ˆç®—ã™ã‚‹ã®ã§ã€`2 * 3`ã®çµæœ`6`ã‚’`1`ã«è¶³ã—ã¦`7`ã¨è¨ˆç®—ã™ã‚‹ã®ãŒä¸€èˆ¬çš„ã§ã—ã‚‡ã†ã€‚Haskellã«ã‚‚åŒæ§˜ã®è§£é‡ˆã‚’ã—ã¦ã‚‚ã‚‰ã†ãŸã‚ã«ã¯ã€`+`æ¼”ç®—å­ã‚ˆã‚Šã‚‚`*`æ¼”ç®—å­ã®çµåˆã®å„ªå…ˆé †ä½ã‚’**é«˜ã**ã—ã¦ã€`1 + 2`ã‚ˆã‚Šã‚‚å…ˆã«`2 * 3`ã‚’å‡¦ç†ã—ã¦ã‚‚ã‚‰ã‚ãªã‘ã‚Œã°ãªã‚Šã¾ã›ã‚“ã€‚ã“ã®ã‚ˆã†ã«ã€**æ¼”ç®—å­ã¨ãã®å¼•æ•°ã‚’è¤‡æ•°ä¸¦ã¹ãŸã¨ãã€ã©ã®ã‚ˆã†ãªé †ç•ªã§å‡¦ç†ã™ã‚‹ã‹ã‚’å®šã‚ãŸãƒ«ãƒ¼ãƒ«**ãŒã€Œæ¼”ç®—å­ã®çµåˆã®å„ªå…ˆé †ä½ã€ã§ã™ã€‚

å…ˆã»ã©`:i`ã§èª¿ã¹ãŸã¨ãŠã‚Šã€Haskellã§ã¯è¶³ã—ç®—ã®æ¼”ç®—å­`+`ã‚„å¼•ãç®—ã®æ¼”ç®—å­`-`ã‚ˆã‚Šã‚‚ã€ã‹ã‘ç®—ã®æ¼”ç®—å­`*`ã‚„å‰²ã‚Šç®—ã®æ¼”ç®—å­`/`ã®æ–¹ãŒå„ªå…ˆé †ä½ãŒé«˜ã„ã“ã¨ã«ãªã£ã¦ã„ã¾ã™ã€‚ã¡ã‚ƒã‚“ã¨æ•°å­¦ã®æ…£ç¿’ã«å¾“ã£ã¦ã„ã¾ã™ã­ã€‚

ãã‚Œã‹ã‚‰ã€ã€Œå³çµåˆã€ã¨ã€Œå·¦çµåˆã€ã¨ã„ã†ç”¨èªã«ã‚‚è§¦ã‚Œã¦ãŠãã¾ã—ã‚‡ã†ã€‚ã“ã‚Œã¾ã§èª¿ã¹ãŸå››å‰‡æ¼”ç®—ã®æ¼”ç®—å­ã¯ã„ãšã‚Œã‚‚ã€Œå·¦çµåˆã€ã§ã—ãŸã€‚ã¨ã„ã†ã‚ã‘ã§æã‚‰ãã‚ˆã‚Šèº«è¿‘ã§ã‚ã‚ã†ã€Œå·¦çµåˆã€ã‹ã‚‰èª¬æ˜ã—ã¾ã™ã€‚

ã€Œå·¦çµåˆã€ã®æ¼”ç®—å­ã¯ã€åŒã˜æ¼”ç®—å­ï¼ˆã‚ˆã‚Šæ­£ç¢ºã«ã¯ã€åŒã˜å„ªå…ˆé †ä½ã®æ¼”ç®—å­ï¼‰ã‚’è¤‡æ•°ä¸¦ã¹ãŸã¨ãã€å·¦å´ã®æ¼”ç®—å­ã‚’å…ˆã«è¨ˆç®—ã™ã‚‹ã‚ˆã†å®šã‚ã‚‰ã‚Œã¦ã„ã¾ã™ã€‚å…¸å‹çš„ã«ã¯ã€å¼•ãç®—ã‚’è¤‡æ•°ä½¿ã£ãŸæ¬¡ã®å¼ã‚’æ€ã„æµ®ã‹ã¹ã¦ã¿ã‚‹ã¨åˆ†ã‹ã‚Šã‚„ã™ã„ã§ã—ã‚‡ã†:

```
10 - 5 - 4
```

ã¿ãªã•ã‚“ã¯ã“ã®ã‚ˆã†ãªå¼ã‚’è¨ˆç®—ã™ã‚‹ã¨ãã¯ã€å¿…ãšæ¬¡ã®ã‚ˆã†ã«å·¦å´ã®`10 - 5`ã‹ã‚‰é †ã«è¨ˆç®—ã™ã‚‹ã§ã—ã‚‡ã†:

```
10 - 5 - 4
   â†“
   5 - 4
     â†“
     1
```

ã“ã‚Œã‚’ä»®ã«å³å´ã®`5 - 4`ã‹ã‚‰è¨ˆç®—ã—ãŸå ´åˆã€çµæœãŒæ„å›³ã—ãªã„ã‚‚ã®ã«ãªã£ã¦ã—ã¾ã„ã¾ã™:

```
10 - 5 - 4
       â†“
     5 - 4
     â†“
10 - 1
   â†“
   9
```

ã“ã‚Œã§ã¯å›°ã‚‹ã®ã§ã€å››å‰‡æ¼”ç®—ã®æ¼”ç®—å­ï¼ˆ`+`ãƒ»`-`ãƒ»`*`ãƒ»`/`ï¼‰ã¯ã€åŒã˜ï¼ˆå„ªå…ˆé †ä½ã®ï¼‰ã‚‚ã®ã‚’è¤‡æ•°ä¸¦ã¹ãŸå ´åˆã€å·¦å´ã®ã‚‚ã®ã‹ã‚‰å…ˆã«è¨ˆç®—ã™ã‚‹ã‚ˆã†å®šã‚ã‚‰ã‚Œã¦ã„ã¾ã™ã€‚ã“ã‚ŒãŒã€Œå·¦çµåˆã€ã§ã™ã€‚

Haskellã«ã¯ã“ã‚Œã¾ã§æŒ™ã’ãŸå››å‰‡æ¼”ç®—ã®æ¼”ç®—å­ï¼ˆ`+`ãƒ»`-`ãƒ»`*`ãƒ»`/`ï¼‰ä»¥å¤–ã«ã‚‚ãŸãã•ã‚“ã®æ¼”ç®—å­ãŒã‚ã‚Šã€ãã®ã„ãšã‚Œã‚‚çµåˆã®å„ªå…ˆé †ä½ã‚„ã€å³çµåˆã‹å·¦çµåˆã‹ãŒå®šã‚ã‚‰ã‚Œã¦ã„ã¾ã™ã€‚`$`ã‚‚ãã®ä¸€ã¤ã§ã€æœ€ã‚‚çµåˆã®å„ªå…ˆé †ä½ãŒä½ã„ã€å³çµåˆã®æ¼”ç®—å­ã¨ã—ã¦è¨­å®šã•ã‚Œã¦ã„ã‚‹ã“ã¨ã¯ã€å…ˆã»ã©èª¬æ˜ã—ã¾ã—ãŸã€‚ä¸€ä½“ã©ã†ã—ã¦ã“ã®ã‚ˆã†ã«è¨­å®šã•ã‚Œã¦ã„ã‚‹ã®ã§ã—ã‚‡ã†ã‹ï¼Ÿ

ãã‚Œã¯ã€é–¢æ•°å‘¼ã³å‡ºã—ã®çµåˆã‚’ä»–ã®æ¼”ç®—å­ã‚ˆã‚Šå¼±ã‚ã‚‹ã“ã¨ã§ã€ä»–ã®æ¼”ç®—å­ã¨é–¢æ•°ã‚’ä½µã›ã¦ä½¿ã£ãŸéš›ã«ã€ä»–ã®æ¼”ç®—å­ã‚’å„ªå…ˆã—ã¦çµåˆã•ã›ã‚‹ã“ã¨ã§ã€ã‚«ãƒƒã‚³ã§å›²ã†å¿…è¦ã‚’æ¸›ã‚‰ã›ã‚‹ã“ã¨ã§ã™ã€‚

ä¾‹ãˆã°ã€æ¬¡ã®ã‚ˆã†ã«`+`æ¼”ç®—å­ã§è¨ˆç®—ã—ãŸçµæœã‚’`print`é–¢æ•°ã«æ¸¡ã™ã¨ã—ã¾ã™:

```haskell
ghci> print (1 + 2 + 3)
6
```

ã“ã¡ã‚‰ã®ã‚³ãƒ¼ãƒ‰ã§ã¯ã€`1 + 2 + 3`ã‚’å¿…ãšã‚«ãƒƒã‚³ã§å›²ã‚ãªã‘ã‚Œã°ãªã‚Šã¾ã›ã‚“ã€‚æ¬¡ã®ã‚ˆã†ã«ã‚«ãƒƒã‚³ã‚’çœç•¥ã™ã‚‹ã¨ã€å‹ã‚¨ãƒ©ãƒ¼ã«ãªã£ã¦ã—ã¾ã„ã¾ã™:

```haskell
ghci> :{
ghci| print 1 + 2 + 3
ghci| :}

<interactive>:2:13: error:
    ? No instance for (Num (IO ())) arising from a use of â€˜+â€™
    ? In the expression: print 1 + 2 + 3
      In an equation for â€˜itâ€™: it = print 1 + 2 + 3
```

ã“ã®ã‚¨ãƒ©ãƒ¼ã¯ã€`IO ()`ã¨ã„ã†å‹ã®å€¤ã¯ï¼ˆ`Num`å‹ã‚¯ãƒ©ã‚¹ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã§ã¯ãªã„ã®ã§ï¼‰`+`æ¼”ç®—å­ãŒåˆ©ç”¨ã§ããªã„ã€ã¨ã„ã†æ„å‘³ã§ã™ã€‚`IO ()`ã¨ã„ã†å‹ã¯ã¾ã•ã—ã`print 1`ã®çµæœã®å‹ã§ã™ã€‚ã™ãªã‚ã¡`print 1 + 2 + 3`ã¨ã„ã†å¼ã¯ã€`1 + 2 + 3`ã‚ˆã‚Šã‚‚å‰ã«`print 1`ã‚’è¨ˆç®—ã™ã‚‹å¼ã ã¨è§£é‡ˆã•ã‚ŒãŸã®ã§ã™ã€‚

ã“ã®ã‚ˆã†ã«è§£é‡ˆã•ã‚Œã‚‹ã®ã¯ã€Haskellã§ã¯é–¢æ•°å‘¼ã³å‡ºã—ãŒæœ€ã‚‚å¼·ãçµåˆã™ã‚‹ã‚ˆã†ã«å®šã‚ã‚‰ã‚Œã¦ã„ã‚‹ã‹ã‚‰ã§ã™ã€‚`print 1`ã¨æ›¸ã„ãŸã‚‰ã€éš£ã«`+ 3`ãŒã‚ã‚ã†ã¨`* 4`ãŒã‚ã‚ã†ã¨ãã®ä»–ã©ã‚“ãªä¸­å€¤è¨˜æ³•ã®æ¼”ç®—å­ãŒã‚ã‚ã†ã¨ã€é–¢æ•°å‘¼ã³å‡ºã—ã§ã‚ã‚‹`print 1`ãŒæœ€å„ªå…ˆã•ã‚Œã¾ã™[^1]ã€‚

[^1]: ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒå®šç¾©ã§ãã‚‹æ¼”ç®—å­ã§ã¯ãªã„ã€Haskellã®æ§‹æ–‡ã¨ã—ã¦å®šç¾©ã•ã‚Œã¦ã„ã‚‹æ¼”ç®—å­ã«ã¤ã„ã¦ã¯ä¾‹å¤–ãŒã‚ã‚Šã¾ã™ã€‚

ä¸€æ–¹`$`æ¼”ç®—å­ã¯ã€æ™®é€šã®é–¢æ•°å‘¼ã³å‡ºã—ã¯æ„šã‹ã€ãã®ä»–ã®ã»ã¨ã‚“ã©ã®æ¼”ç®—å­ã‚ˆã‚Šå¼±ãçµåˆã™ã‚‹ã‚ˆã†è¨­å®šã•ã‚Œã¦ã„ã‚‹ã®ã§ã€åˆ©ç”¨ã™ã‚Œã°æ¬¡ã®ã‚ˆã†ã«ã‚«ãƒƒã‚³ã‚’çœç•¥ã—ã¦æ›¸ãã“ã¨ãŒã§ãã¾ã™:

```haskell
ghci> print $ 1 + 2 + 3
6
```

ãã®ä»–ã«ã‚‚ã€æ¬¡ğŸ‘‡ã®ã‚ˆã†ã«`++`æ¼”ç®—å­ã§æ–‡å­—åˆ—ã‚’çµåˆã—ãŸçµæœã‚’`putStrLn`é–¢æ•°ã«æ¸¡ã™å ´åˆ:

```haskell
ghci> putStrLn ("aaa" ++ show 111)
aaa111
```

ã“ã‚Œã‚‚`$`æ¼”ç®—å­ã‚’ä½¿ã£ã¦ã‚«ãƒƒã‚³ã‚’çœç•¥ã§ãã¾ã™:

```haskell
ghci> putStrLn $ "aaa" ++ show 111
aaa111
```

èª²é¡Œ4ã§æ›¸ã„ã¦ã„ãŸæ¬¡ã®å¼ğŸ‘‡ã‚‚ã€

```haskell
ghci> unlines (reverse (lines "aaa\nbbb\nccc"))
"ccc\nbbb\naaa\n"
```

ã“ã®ã‚ˆã†ã«`$`ã‚’ä½¿ã£ã¦ã‚«ãƒƒã‚³ã‚’ã‚¼ãƒ­ã«ã§ãã¾ã™:

```haskell
ghci> unlines $ reverse $ lines "aaa\nbbb\nccc"
"ccc\nbbb\naaa\n"
```

è¦ã™ã‚‹ã«ã€Œ`$`ã‚ˆã‚Šã‚‚å¾Œã‚ã¯ã‚«ãƒƒã‚³ãŒè‡ªå‹•ã§è£œã‚ã‚Œã‚‹ã€ã¨è§£é‡ˆã™ã‚‹ã¨è‰¯ã„ã§ã—ã‚‡ã†ã€‚

ãŸã ã—ã€ğŸ‘‡ã®ã‚ˆã†ã«`$`ã‚ˆã‚Šã‚‚çµåˆã®å„ªå…ˆé †ä½ãŒé«˜ã„æ¼”ç®—å­ãŒå·¦å´ã«ã‚ã‚‹å ´åˆã¯ã†ã¾ãè¡Œãã¾ã›ã‚“:

```haskell
ghci> "aaa" ++ show $ 1 + 110

<interactive>:9:1: error:
    ? Couldn't match expected type â€˜Integer -> tâ€™
                  with actual type â€˜[Char]â€™
    ? The first argument of ($) takes one argument,
      but its type â€˜[Char]â€™ has none
      In the expression: "aaa" ++ show $ 1 + 110
      In an equation for â€˜itâ€™: it = "aaa" ++ show $ 1 + 110
    ? Relevant bindings include it :: t (bound at <interactive>:9:1)

<interactive>:9:10: error:
    ? Couldn't match expected type â€˜[Char]â€™
                  with actual type â€˜() -> Stringâ€™
    ? Probable cause: â€˜showâ€™ is applied to too few arguments
      In the second argument of â€˜(++)â€™, namely â€˜showâ€™
      In the expression: "aaa" ++ show
      In the expression: "aaa" ++ show $ 1 + 110
```

ã“ã‚Œã¯ã€`$`ã®å·¦è¾ºã«`"aaa" ++ show`ã‚’ã€å³è¾ºã«`1 * 110`ã‚’æ¸¡ã—ãŸã€ã¨è§£é‡ˆã•ã‚ŒãŸã“ã¨ã«ã‚ˆã‚‹å‹ã‚¨ãƒ©ãƒ¼ã§ã™ã€‚`$`ã‚ˆã‚Šã‚‚`++`ã®æ–¹ãŒçµåˆã®å„ªå…ˆé †ä½ãŒé«˜ã„ã®ã§ã€`"aaa" ++ show`ã‚’å…ˆã«è¨ˆç®—ã™ã‚‹ã€ã¨è§£é‡ˆã•ã‚ŒãŸã®ã§ã™ã€‚

åˆ†ã‹ã‚Šã‚„ã™ãã™ã‚‹ãŸã‚ã«ã‚«ãƒƒã‚³ã‚’è£œã†ã¨ã€æ¬¡ã®ã¨ãŠã‚Šã§ã™:

```haskell
("aaa" ++ show) $ (1 + 110)
```

ã“ã®ã‚ˆã†ã«`$`ã‚ˆã‚Šã‚‚çµåˆã®å„ªå…ˆé †ä½ãŒé«˜ã„æ¼”ç®—å­ãŒå·¦å´ã«ã‚ã‚‹å ´åˆã¯ã€`$`ã‚’ä½¿ã£ã¦ã‚«ãƒƒã‚³ã‚’çœç•¥ã™ã‚‹ã“ã¨ã¯ã§ãã¾ã›ã‚“ã€‚ã“ã®ã‚ˆã†ãªå ´åˆã¯ã€`$`ã‚’ä½¿ã‚ãšã«ã‚«ãƒƒã‚³ã‚’æ›¸ãæ–¹ãŒãŠå‹§ã‚ã§ã™:

```haskell
ghci> "aaa" ++ show (1 + 110)
"aaa111"
```

ã—ã‹ã—ã€ã€Œ`$`ã‚ˆã‚Šå·¦å´ã«å„ªå…ˆé †ä½ã®é«˜ã„ä»–ã®æ¼”ç®—å­ãŒã‚ã‚‹å ´åˆã¯`$`ãŒä¸Šæ‰‹ãæ©Ÿèƒ½ã—ãªã„ã€ã¨ã„ã†ã“ã¨ã‚’ç†è§£ã—ã¦ã„ã¦ã‚‚ã€å‰è¿°ã®ã‚ˆã†ãªãƒŸã‚¹ã‚’ã—ã¦ã—ã¾ã†ã“ã¨ã¯ã‚ˆãã‚ã‚Šã¾ã™ã€‚ãã‚“ãªã¨ãã¯ã€ç§ãŒã“ã‚Œã¾ã§ã®çµŒé¨“ã§å¾—ãŸã€æ¬¡ã®ã‚ˆã†ãªã‚³ãƒ„ã‚’æ€ã„å‡ºã—ã¦ã¿ã‚‹ã¨ã„ã„ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“:

- æ¼”ç®—å­ã®çµåˆã®å„ªå…ˆé †ä½ã‚’é–“é•ãˆãŸã‚±ãƒ¼ã‚¹ã§ã¯ã€å…ˆã»ã©ã®ã‚ˆã†ã«å‹ã‚¨ãƒ©ãƒ¼ãŒæ³¢åŠã™ã‚‹ã®ã§ã€è¤‡æ•°ã®å‹ã‚¨ãƒ©ãƒ¼ãŒåŒã˜ç®‡æ‰€ã§ç™ºç”Ÿã™ã‚‹ã“ã¨ãŒå¤šã„
    - ã‚ˆãã‚ã‹ã‚‰ãªã„å‹ã‚¨ãƒ©ãƒ¼ãŒåŒã˜ç®‡æ‰€ã§è¤‡æ•°ã§ã¦ããŸå ´åˆã¯ã€æ¼”ç®—å­ã®å„ªå…ˆé †ä½ã‚’é–“é•ãˆãŸã“ã¨ã‚’ç–‘ã†ã¨ã„ã„ã‹ã‚‚ã—ã‚Œãªã„
- `expected type`ã‹`actual type`ã®ã©ã¡ã‚‰ã‹ä¸€æ–¹ãŒé–¢æ•°ã«ãªã£ã¦ã„ã‚‹ã‘ã©ã€ã‚‚ã†ç‰‡æ–¹ãŒé–¢æ•°ã˜ã‚ƒãªã„æ™‚ï¼ˆã‚ã‚‹ã„ã¯ã€å¼•æ•°ã®æ•°ãŒãã‚Œãã‚Œã§ç•°ãªã‚‹ï¼‰å ´åˆã‚‚ç–‘ã†ã¨ã„ã„ã‹ã‚‚çŸ¥ã‚Œãªã„
- ã“ã‚Œä»¥å¤–ã«ã‚‚åŒã˜ã‚ˆã†ãªå‹ã‚¨ãƒ©ãƒ¼ã«ãªã‚‹ã“ã¨ã¯ã‚ã‚‹ãŒã€ã„ãšã‚Œã«ã—ã¦ã‚‚ã€å˜ç´”ãªé–“é•ã„ã‚’ä¸€ã¤çŠ¯ã—ã¦ã„ã‚‹ã ã‘ã§ã‚ã‚‹å ´åˆãŒå¤šã„ã®ã§ã€**å‹ã‚¨ãƒ©ãƒ¼ãŒãŸãã•ã‚“å‡ºã¦ã‚‚æ…Œã¦ãªã„**ã“ã¨ãŒå¤§äº‹

### é–¢æ•°åˆæˆæ¼”ç®—å­`.`ã§ä¸€ç•ªå³ã®å¤‰æ•°ã‚’æ¶ˆã™

ä»Šåº¦ã¯ã€å‰ç¯€ã§ç´¹ä»‹ã—ãŸé–¢æ•°é©ç”¨æ¼”ç®—å­`$`ã¨åŒã˜ãã‚‰ã„ã‚ˆãä½¿ç”¨ã•ã‚Œã‚‹ã€é–¢æ•°åˆæˆæ¼”ç®—å­`.`ã‚’ç´¹ä»‹ã—ã¾ã™ã€‚ä½•ã¯ã¨ã‚‚ã‚ã‚Œ`:t`ã‚³ãƒãƒ³ãƒ‰ã§å‹å®šç¾©ã‚’è¦‹ã¦ã¿ã¾ã—ã‚‡ã†:

```haskell
ghci> :t (.)
(.) :: (b -> c) -> (a -> b) -> a -> c
```

`.`ã¯`(b -> c)`ãƒ»`(a -> b)`ã¨ã„ã†å‹ã®ã€äºŒã¤ã®é–¢æ•°ã‚’ä¸¡è¾ºã«å—ã‘å–ã‚Šã¾ã™ã€‚ã¨ã“ã‚ãŒãã‚Œã ã‘ã§ãªãã€å³è¾ºã®é–¢æ•°ã®å¼•æ•°ã¨åŒã˜å‹`a`ã®å€¤ã¾ã§å—ã‘å–ã£ã¦åˆã‚ã¦ã€å·¦è¾ºã®é–¢æ•°ã®çµæœã¨åŒã˜`c`å‹ã®å€¤ã‚’è¿”ã™ã‚ˆã†ã§ã™ã€‚...ãŠã‹ã—ã„ã§ã™ã­ã€æ¼”ç®—å­ã¯å·¦è¾ºã¨å³è¾ºã«ã—ã‹å€¤ã‚’å—ã‘å–ã‚‰ãªã„ã®ã§å¼•æ•°ã¯äºŒã¤ã¾ã§ã®ã¯ãšã§ã¯...ï¼Ÿ

ã“ã®è¬ã®æ­£ä½“ã¯ã€`.`ã‚’ã€Œé–¢æ•°ã‚’è¿”ã™é–¢æ•°ã€ã¨ã—ã¦è§£é‡ˆã™ã‚‹ã“ã¨ã§æ˜ã‚‰ã‹ã«ãªã‚Šã¾ã™ã€‚ã™ãªã‚ã¡ã€`.`ã¯`(b -> c)`ãƒ»`(a -> b)`ã¨ã„ã†å‹ã®äºŒã¤ã®é–¢æ•°ã‚’å—ã‘å–ã£ãŸçµæœã€`a -> c`ã¨ã„ã†å‹ã®é–¢æ•°ã‚’è¿”ã™æ¼”ç®—å­ã¨æ‰ãˆã¦ã¿ã¦ãã ã•ã„ã€‚`a -> c`ã‚’`.`ãŒè¿”ã™ä¸€ã¤ã®é–¢æ•°ã¨ã—ã¦ã‚«ãƒƒã‚³ã‚’è£œã†ã¨ã€`.`ã®å‹ã¯æ¬¡ã®ã‚ˆã†ã«è¡¨ã•ã‚Œã¾ã™:

```haskell
(.) :: (b -> c) -> (a -> b) -> (a -> c)
```

ã“ã‚Œã§ã€`.`ãŒã€Œé–¢æ•°ã‚’è¿”ã™é–¢æ•°ã€ã§ã‚ã‚‹ã“ã¨ãŒåˆ†ã‹ã‚Šã¾ã—ãŸã€‚ã§ã¯ã€ã©ã®ã‚ˆã†ãªé–¢æ•°ã‚’è¿”ã™ã®ã§ã—ã‚‡ã†ã‹ï¼Ÿå®Ÿéš›ã«ä½¿ã£ã¦ç¢ºã‹ã‚ã¦ã¿ã¾ã—ã‚‡ã†ã€‚ç°¡å˜ãªä¾‹ã¨ã—ã¦ã€`show`é–¢æ•°ã¨`length`é–¢æ•°ã‚’`.`ã«æ¸¡ã—ã¦ã¿ã¾ã™:

```haskell
ghci> :t length . words
length . words :: String -> Int
```

`String -> Int`ã€ã™ãªã‚ã¡æ–‡å­—åˆ—ã‚’å—ã‘å–ã£ã¦æ•´æ•°ã‚’è¿”ã™é–¢æ•°ãŒã§ãã¾ã—ãŸã€‚è©¦ã—ã«ä½¿ã£ã¦ã¿ã¾ã—ã‚‡ã†:

```haskell
ghci> length . words "aaa bbb ccc"

<interactive>:7:10: error:
    ? Couldn't match expected type: a -> t0 a0
                  with actual type: [String]
    ? Possible cause: â€˜wordsâ€™ is applied to too many arguments
      In the second argument of â€˜(.)â€™, namely â€˜words "aaa bbb ccc"â€™
      In the expression: length . words "aaa bbb ccc"
      In an equation for â€˜itâ€™: it = length . words "aaa bbb ccc"
    ? Relevant bindings include
        it :: a -> Int (bound at <interactive>:7:1)
```

... ãŠã£ã¨ã€å‹ã‚¨ãƒ©ãƒ¼ã«ãªã£ã¦ã—ã¾ã„ã¾ã—ãŸã€‚`$`æ¼”ç®—å­ã®ç¯€ã§è§¦ã‚ŒãŸé€šã‚Šã€Haskellã§ã¯é–¢æ•°ãŒã©ã‚“ãªæ¼”ç®—å­ã‚ˆã‚Šã‚‚å„ªå…ˆã—ã¦çµåˆã•ã‚Œã‚‹ã®ã§ã€`length . words "aaa bbb ccc"`ã¨ã„ã†å¼ã¯`words "aaa bbb ccc"`ã‚’æœ€å„ªå…ˆã—ã¦è¨ˆç®—ã—ã¦ã—ã¾ã„ã¾ã™ã€‚`words "aaa bbb ccc"`ã¯å½“ç„¶é–¢æ•°ã‚’è¿”ã•ãªã„ã®ã§ã€`.`ã§åˆæˆã™ã‚‹ã“ã¨ãŒã§ãã¾ã›ã‚“ï¼

å¾“ã£ã¦ã€`length . words`ã‚’ã‚«ãƒƒã‚³ã§å›²ã£ã¦ã‚ã’ã¾ã—ã‚‡ã†:

```haskell
ghci> (length . words) "aaa bbb ccc"
3
```

ã§ãã¾ã—ãŸã€‚`3`ã¨ã„ã†çµæœã§ã™ã­ã€‚ã“ã‚Œã¯ã€`"aaa bbb ccc"`ã¨ã„ã†æ–‡å­—åˆ—ã‚’`words`é–¢æ•°ã§å˜èªã®ãƒªã‚¹ãƒˆã«åˆ†å‰²ã—ã€ãã®çµæœã‚’`length`é–¢æ•°ã«æ¸¡ã—ã¦ãƒªã‚¹ãƒˆã®é•·ã•ã‚’æ•°ãˆãŸçµæœã§ã™ã€‚ã™ãªã‚ã¡ã€`.`ã«ã‚ˆã£ã¦ã§ããŸ`(length . words)`ã¨ã„ã†é–¢æ•°ã¯ã€å¼•æ•°ã‚’`words`é–¢æ•°ã«æ¸¡ã—ã¦ãã®çµæœã‚’`length`é–¢æ•°ã«æ¸¡ã™ã€`words`é–¢æ•°ã¨`length`é–¢æ•°ã‚’ç¹‹ã„ã é–¢æ•°ãªã®ã§ã™ã€‚

ä¸€èˆ¬åŒ–ã™ã‚‹ã¨ã€`.`ã¯ä¸¡è¾ºã«é–¢æ•°ã‚’å—ã‘å–ã‚Šã€æ–°ã—ã„é–¢æ•°ã‚’ä½œã‚Šã¾ã™ã€‚ã“ã®æ–°ã—ã„é–¢æ•°ã¯ã€å³è¾ºã«æ¸¡ã—ãŸé–¢æ•°ã®å¼•æ•°ã‚’å³è¾ºã®é–¢æ•°ã«æ¸¡ã—ã€å³è¾ºã®é–¢æ•°ã®çµæœã‚’å·¦è¾ºã®é–¢æ•°ã«æ¸¡ã—ã¾ã™ã€‚ãã—ã¦å·¦è¾ºã®é–¢æ•°ã®çµæœã‚’è¿”ã™ --- ã¨ã„ã†æµã‚Œã§æŒ¯ã‚‹èˆã„ã¾ã™ã€‚`.`ã¯ã€å·¦è¾ºã®é–¢æ•°ã¨å³è¾ºã®é–¢æ•°ã‚’ç¹‹ãæ¼”ç®—å­ãªã®ã§ã™ã€‚é–¢æ•°ã‚’ã€Œåˆæˆã™ã‚‹ã€æ¼”ç®—å­ã ã¨ã‚‚è¨€ã‚ã‚Œã¾ã™ã€‚

`.`æ¼”ç®—å­ã‚’åˆ©ç”¨ã™ã‚‹ã¨ã€äºŒã¤ã®é–¢æ•°ã‚’ä½¿ã£ãŸ`f (g x)`ã®ã‚ˆã†ãªå½¢ã®å¼ã‚’ã€`f . g`ã¨ã„ã†å½¢ã«æ›¸ãæ›ãˆã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚`(g x)`ã«ã‚ã£ãŸã‚«ãƒƒã‚³ã‚„`x`ã¨ã„ã†å¤‰æ•°ãŒãªããªã£ã¦ã€ã‚¹ãƒƒã‚­ãƒªã—ã¾ã™ã­ã€‚

ã“ã‚Œã‚’å¿œç”¨ã™ã‚Œã°ã€ä¾‹ãˆã°æ¬¡ã®ã‚ˆã†ã«`map`é–¢æ•°ã«æ¸¡ã™é–¢æ•°ã‚’ä½œã‚‹éš›ã€ãƒ©ãƒ ãƒ€æŠ½è±¡ã‚„ãã®å¼•æ•°`s`ã‚’æ›¸ã‹ãšã«æ¸ˆã¿ã¾ã™:

```haskell
map (\s -> show (length s)) ["aaa", "bb", "c"]
--  ^^^^^^^^^^^^^^^^^^^^^^^
--  ã“ã®éƒ¨åˆ†ã®ãƒ©ãƒ ãƒ€æŠ½è±¡ã‚’...

map (show . length)         ["aaa", "bb", "c"]
--  ^^^^^^^^^^^^^^^
--  `.`ã‚’ä½¿ã£ã¦çŸ­ãã§ãã¾ã—ãŸï¼
```

ã‚ã‚‹ã„ã¯ã€é–¢æ•°å®šç¾©ã‚’æ›¸ãéš›ã«ã‚‚åˆ©ç”¨ã§ãã¾ã™ã€‚æ¬¡ã®ã‚±ãƒ¼ã‚¹ã¯ã€å‰ç¯€ã§ç´¹ä»‹ã—ãŸ`$`æ¼”ç®—å­ã‚’ä½¿ã£ã¦å®šç¾©ã—ãŸé–¢æ•°ã§ã™:

```haskell
reverseLines input = unlines $ reverse $ lines input
```

æ—¢ã«ã‚«ãƒƒã‚³ã‚’çœç•¥ã§ãã¦ã„ã¦ç°¡æ½”ã§ã™ãŒã€å®Ÿã¯`.`ã‚’ä½¿ãˆã°ã‚‚ã£ã¨ç°¡æ½”ã«æ›¸ãã“ã¨ãŒã§ãã¾ã™:

```haskell
reverseLines = unlines . reverse . lines
```

å¼•æ•°`input`ã¾ã§æ¶ˆãˆã¦ã‚ˆã‚ŠçŸ­ããªã‚Šã¾ã—ãŸï¼ã“ã®ã‚ˆã†ã«`.`ã¯ã€ä¸€ç•ªå³ã®å¤‰æ•°ã‚’å‰Šé™¤ã™ã‚‹ã®ã«ã‚ˆãç”¨ã„ã‚‰ã‚Œã¾ã™ã€‚

### æ¼”ç®—å­ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³

```
ghci> :t (/ 2)
(/ 2) :: Fractional a => a -> a
```

ã€ŒåŠåˆ†ã«ã™ã‚‹é–¢æ•°ã€ãŒã§ãã‚‹ï¼

```
ghci> (/ 2) 10
5.0
```

å…ˆé ­ã«`"Hello, "`ã‚’ãã£ã¤ã‘ã‚‹é–¢æ•°

```
ghci> :t (++)
(++) :: [a] -> [a] -> [a]

ghci> :t ("Hello, " ++)
("Hello, " ++) :: [Char] -> [Char]

ghci> map ("Hello, " ++) ["Tom", "Bob", "Alice"]
["Hello, Tom","Hello, Bob","Hello, Alice"]
```

ã•ã£ãã®ã€Œæ¼”ç®—å­ã‚’å‰ç½®é–¢æ•°ã«å¤‰æ›ã™ã‚‹ã€ã§ç´¹ä»‹ã—ãŸ

```
ghci> map ((+) 4) [1, 2, 3]
[5,6,7]
```

ã‚‚ã€

```
ghci> map (+ 4) [1, 2, 3]
[5,6,7]
```

ã¨æ›¸ã„ã¦ã„ã„ã—ã€è¶³ã—ç®—ã¯å³è¾ºã¨å·¦è¾ºã‚’å…¥ã‚Œæ›¿ãˆã¦ã‚‚çµæœãŒå¤‰ã‚ã‚‰ãªã„ã®ã§ã€

```
ghci> map (4 +) [1, 2, 3]
[5,6,7]
```

ã¨æ›¸ã„ã¦ã‚‚ã‚ˆã„ï¼

#### æ¼”ç®—å­ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã¯ã€ãƒã‚¤ãƒŠã‚¹ã ã‘ã¯ä½¿ã„ã«ãã„

```
ghci> :t (- 4)
(- 4) :: Num a => a
```

â†‘é–¢æ•°ã˜ã‚ƒãªã„ã€ã€Œ-4ã€ã¨ã„ã†æ•°ï¼

```
ghci> :t (4 -)
(4 -) :: Num a => a -> a
```

â†‘ã“ã¡ã‚‰ã¯é–¢æ•°

```
ghci> (- 4) 4

<interactive>:135:1: error:
    ? Non type-variable argument in the constraint: Num (t1 -> t2)
      (Use FlexibleContexts to permit this)
    ? When checking the inferred type
        it :: forall t1 t2. (Num t1, Num (t1 -> t2)) => t2

ghci> (4 -) 4
0
```

```
ghci> 5 * -3

<interactive>:145:1: error:
    Precedence parsing error
        cannot mix â€˜*â€™ [infixl 7] and prefix `-' [infixl 6] in the same infix expression
ghci> 5 * (-3)
-15
```

å˜é …æ¼”ç®—å­ã¨äºŒé …æ¼”ç®—å­ã‚’æ··ãœãŸã“ã¨ã«ã‚ˆã‚‹ã‚¨ãƒ©ãƒ¼ã€‚  
Haskellã§ã¯ãƒã‚¤ãƒŠã‚¹è¨˜å·ãŒå”¯ä¸€ã®å˜é …æ¼”ç®—å­ã§ã‚‚ã‚ã‚Šã€æ™®é€šã®äºŒé …æ¼”ç®—å­ã§ã‚‚ã‚ã‚‹ï¼ˆ[Haskell 2010 Language Reportã®ã€ŒOperator Applicationsã€ã‚ˆã‚Š][2]ï¼‰ã€‚

[2]: https://www.haskell.org/onlinereport/haskell2010/haskellch3.html#x8-280003.4

### ã‚„ã‚Šéãæ³¨æ„ã€ã‚ã‚‹ã„ã¯ã©ã“ã¾ã§ã‚„ã‚‹ã‹

hoge: ãƒã‚¤ãƒ³ãƒˆãƒ•ãƒªãƒ¼ã‚¹ã‚¿ã‚¤ãƒ«ã«ã¤ã„ã¦ã“ã“ã§èª¬æ˜

ä¾‹1: `yes`ã‚„`Yes`ã‚„`yEs`ãªã©ã‚’æ¢ã™

å‰æ: `filter`é–¢æ•°ã€‚ç¬¬ä¸€å¼•æ•°ãŒ`True`ã‚’è¿”ã—ãŸè¦ç´ ã ã‘ã®ãƒªã‚¹ãƒˆã‚’è¿”ã™

```
ghci> :t filter
filter :: (a -> Bool) -> [a] -> [a]

-- 3ã‚ˆã‚Šå¤§ãã„æ•°
ghci> filter (\x -> x > 3) [4, 3, 6]
[4,6]

-- å½“ç„¶ã€ç¬¬ä¸€å¼•æ•°ã®é–¢æ•°ã¯ãƒ©ãƒ ãƒ€æŠ½è±¡ã®ä»£ã‚ã‚Šã«ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã§æ›¸ã‘ã‚‹ã®ã§
ghci> filter (> 3) [4, 3, 6]
[4,6]
```

```
ghci> import Data.Char

-- å¤§æ–‡å­—ã«ã™ã‚‹ã¨ã€ŒYESã€ã«ãªã‚‹æ–‡å­—åˆ—ã ã‘ã‚’è¿”ã™
ghci> filter (\str -> map toUpper str == "YES") ["no", "yes", "yES", "iie", "YES"]
["yes","yES","YES"]
```

ã€Œ`toUpper`ã—ãŸçµæœãŒ`"YES"`ã¨ç­‰ã—ã„ã€

```
ghci> filter ((== "YES") . map toUpper) ["no", "yes", "yES", "iie", "YES"]
["yes","yES","YES"]
```

ã“ã®ãã‚‰ã„ãªã‚‰åºã®å£ï¼Ÿ

ã•ã£ãã®ã€

```
ghci> map ("Hello, " ++) ["Tom", "Bob", "Alice"]
["Hello, Tom","Hello, Bob","Hello, Alice"]
```

ã«ã€æœ«å°¾ã«ã€Œ!ã€ã‚’åŠ ãˆãŸããªã£ãŸã¨ã™ã‚‹ã€‚

```
ghci> map (("Hello, " ++) . (++ "!")) ["Tom", "Bob", "Alice"]
["Hello, Tom!","Hello, Bob!","Hello, Alice!"]
```

ã•ã‚‰ã«ã•ã‚‰ã«ã€ã©ã‚“ã©ã‚“ãƒã‚¤ãƒ³ãƒˆãƒ•ãƒªãƒ¼ã‚¹ã‚¿ã‚¤ãƒ«ã«ã™ã‚‹ã¨ã€èª­ã¿ã«ãããªã£ã¦ã—ã¾ã†ä¾‹ãŒ: [ãƒã‚¤ãƒ³ãƒˆãƒ•ãƒªãƒ¼ã‚¹ã‚¿ã‚¤ãƒ«ã¸ã®é“ ã€œæœ€å¤§å…¬ç´„æ•°ç·¨ã€œ - Qiita][3]  
ã“ã‚Œã¾ã§ã®èª²é¡Œã§ç´¹ä»‹ã—ã¦ã„ãªã„æ©Ÿèƒ½ã‚‚åˆ©ç”¨ã—ã¦ã„ã¾ã™ãŒå‚è€ƒã¾ã§ã«ã©ã†ãã€‚  
å¤§äº‹ãªã“ã¨ã¯ã€[**çŸ­ãæ›¸ã‘ã‚‹äººã‚’ä¸Šç´šè€…ã¨å‘¼ã¶ãª**][4]ã¨ã„ã†ã“ã¨ã§ã™ã€‚

[3]: https://qiita.com/necojackarc/items/1bccc9643857d3ce7896
[4]: https://wiki.haskell.jp/Hikers%20Guide%20to%20Haskell#%E3%83%9D%E3%82%A4%E3%83%B3%E3%83%88%E3%83%95%E3%83%AA%E3%83%BC%E3%82%B9%E3%82%BF%E3%82%A4%E3%83%AB%E3%81%82%E3%82%8B%E3%81%84%E3%81%AF%E6%A7%98%E3%80%85%E3%81%AA%E3%82%B9%E3%82%BF%E3%82%A4%E3%83%AB%E3%81%A8%E3%81%AE%E4%BB%98%E3%81%8D%E5%90%88%E3%81%84%E6%96%B9

### ãƒ©ãƒ ãƒ€æŠ½è±¡ã‚„é–¢æ•°ã®å¼•æ•°ã§ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒãƒƒãƒ

é–¢æ•°ã®å¼•æ•°ã§ç›´æ¥ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒãƒƒãƒã§ãã‚‹

èª²é¡Œ11ã®`doubles`é–¢æ•°ã€æ•°å€¤ã®ãƒªã‚¹ãƒˆã‚’å—ã‘å–ã£ã¦ã™ã¹ã¦ã®è¦ç´ ã‚’2å€ã«ã™ã‚‹é–¢æ•°ã®å†å®Ÿè£…

```haskell
doubles xs =
    case xs of
        [] -> []
        x : xsLeft -> x * 2 : doubles xsLeft
```

ç¬¬1å¼•æ•°`xs`ã¯ç›´ã¡ã«`case`å¼ã§ä½¿ã‚ã‚Œã¦ã„ã‚‹ï¼  
ã“ã‚“ãªæ™‚ã¯ã“ã†æ›¸ãæ›ãˆã‚‰ã‚Œã‚‹:

```haskell
doubles [] = []
doubles (x : xsLeft) = x * 2 : doubles xsLeft
```

`->`ã®ä»£ã‚ã‚Šã«`=`ã§ãƒ‘ã‚¿ãƒ¼ãƒ³ã¨ãã®å®šç¾©ã‚’åŒºåˆ‡ã£ã¦ã„ã‚‹ç‚¹ã¨ã€`(x : xsLeft)`ã®ã‚ˆã†ã«ã€ãƒ‘ã‚¿ãƒ¼ãƒ³å…¨ä½“ã‚’**ã‚«ãƒƒã‚³ã§å›²ã†**å¿…è¦ãŒã‚ã‚‹ç‚¹ã«æ³¨æ„ã€‚

ã‚«ãƒƒã‚³ã§å›²ã†å¿…è¦ãŒã‚ã‚‹ã®ã¯ã€é–¢æ•°å®šç¾©ã§ã¯è¤‡æ•°ã®å¼•æ•°ã‚’æ‰±ã†ã“ã¨ãŒã‚ã‚‹ãŸã‚ã€‚  
ä¾‹ãˆã°`doubles`é–¢æ•°ã«å¼•æ•°ã‚’å¢—ã‚„ã—ã¦ã€å¼•æ•°ã§æŒ‡å®šã—ãŸæ•°ä»¥å¤–ã‚’æ›ã‘ã‚‰ã‚Œã‚‹ã‚ˆã†ã«ã—ãŸå ´åˆ:

```haskell
times n [] = []
times n (x : xsLeft) = x * n : times n xsLeft
```

`times n (x : xsLeft) = ...`ã®`(x : xsLeft)`ã‹ã‚‰ã‚«ãƒƒã‚³ã‚’å¤–ã—ã¦ã—ã¾ã†ã¨ã€

```haskell
ghci> :{
ghci| times n [] = []
ghci| times n x : xsLeft = x * n : times n xsLeft
ghci| :}

<interactive>:47:1: error: Parse error in pattern: times
```

ã¨ãªã£ã¦ã—ã¾ã„ã€`n`, `x`, `:`, `xsLeft`, ã¨ã„ã†4ã¤ã®å¼•æ•°ã‚’å—ã‘å–ã‚‹ã‚ˆã†ã«è¦‹ãˆã¦ã—ã¾ã†ã€‚

ãŠã¾ã‘ã«ã‹ã£ã“ã„ã„ä¾‹: ã‚ˆãè¦‹ã‹ã‘ã‚‹ï¼ˆ*ã§ã‚‚ã™ã”ãåŠ¹ç‡ãŒæ‚ªã„*ï¼‰`n`ç•ªç›®ã®ãƒ•ã‚£ãƒœãƒŠãƒƒãƒæ•°ã‚’è¨ˆç®—ã™ã‚‹é–¢æ•°

```
fib n =
    case n of
        0 -> 0
        1 -> 1
        _ -> fib (n - 2) + fib (n - 1)
```

`case`ã§æ›¸ãã¨â†‘ã®ãªã®ã‚’ã€

```
fib 0 = 0
fib 1 = 1
fib n = fib (n - 2) + fib (n - 1)
```

ã¨æ›¸ãæ›ãˆã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚  
[å…ƒã€…ã®ãƒ•ã‚£ãƒœãƒŠãƒƒãƒæ•°ã®å®šç¾©][5]ã£ã½ãã¦ã‹ã£ã“ã„ã„ï¼  
ï¼ˆã§ã‚‚ã„ãšã‚Œã«ã—ã¦ã‚‚åŠ¹ç‡ã¯ã™ã”ãæ‚ªã„ã®ã§ãã‚Œãã‚Œã‚‚ä½¿ã‚ãªã„ã“ã¨ï¼‰

[5]: https://ja.wikipedia.org/wiki/%E3%83%95%E3%82%A3%E3%83%9C%E3%83%8A%E3%83%83%E3%83%81%E6%95%B0#%E6%A6%82%E8%A6%81

#### ãƒ¬ã‚³ãƒ¼ãƒ‰å‹ã«å¯¾ã™ã‚‹é–¢æ•°ã®å¼•æ•°ã§ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒãƒƒãƒ

è‡ªåˆ†ã§å®šç¾©ã—ãŸå‹ã§ã‚‚OKï¼

â€»ã“ã“ã¨æ¬¡ã®ã‚¿ãƒ—ãƒ«ã®ç¯€ã§ç´¹ä»‹ã™ã‚‹ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒãƒƒãƒã¯`case`å¼ã§ã‚‚ä½¿ãˆã¾ã™ãŒã€ç‰¹ã«å¼•æ•°ã§ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒãƒƒãƒã§ä½¿ã†ã“ã¨ãŒå¤šã„ã§ã™ã€‚

ä¾‹ãˆã°ãŠãªã˜ã¿`Entry`å‹ã‚’ä½¿ã£ã¦

```
data Entry =
  Entry { category :: String, price :: Integer }
  deriving Show
```

å€¤ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ãƒ¼`Entry`ã®ç¬¬ä¸€å¼•æ•°ã«ã‚ãŸã‚‹`category`ã€ç¬¬äºŒå¼•æ•°ã«ã‚ãŸã‚‹`price`ã€ãã‚Œãã‚Œã«ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒãƒƒãƒã§ãã‚‹ï¼

```
ghci> :{
ghci| formatEntry :: Entry -> String
ghci| formatEntry (Entry cat pri) = cat ++ ": " ++ show pri
ghci| :}

ghci> entry = Entry "Magazine" 120
ghci> formatEntry entry
"Magazine: 120"
```

ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒãƒƒãƒã¯å…¥ã‚Œå­ã«ãªã£ãŸæ§‹é€ ã®ä¸­ã®è¦ç´ ã«å¯¾ã—ã¦ã‚‚ã§ãã‚‹ã®ã§ã€ã•ã‚‰ã«`category`ãŒç©ºæ–‡å­—åˆ—ã®ã‚‚ã®ã‚’ç‰¹åˆ¥æ‰±ã„ã—ãŸããªã£ãŸã‚‰:

```
ghci> :{
ghci| formatEntry :: Entry -> String
ghci| formatEntry (Entry "" pri) = "<Unknown category>" ++ ": " ++ show pri
ghci| formatEntry (Entry cat pri) = cat ++ ": " ++ show pri
ghci| :}

ghci> entry = Entry "" 999999999999999
ghci> formatEntry entry
"<Unknown category>: 999999999999999"
```

ã“ã“ã§ã‚‚ã‚«ãƒƒã‚³ã‚’å¿˜ã‚Œãšï¼

```
ghci> :{
ghci| formatEntry :: Entry -> String
ghci| formatEntry Entry cat pri = cat ++ ": " ++ show pri
ghci| :}

<interactive>:89:13: error:
    ? The constructor â€˜Entryâ€™ should have 2 arguments, but has been given none
    ? In the pattern: Entry
      In an equation for â€˜formatEntryâ€™:
          formatEntry Entry cat pri = cat ++ ": " ++ show pri
      The equation(s) for â€˜formatEntryâ€™ have three arguments,
      but its type â€˜Entry -> Stringâ€™ has only one
```

ã“ã†ã„ã†é¢¨ã«ãƒ¬ã‚³ãƒ¼ãƒ‰ãƒ©ãƒ™ãƒ«ã‚’ç”¨ã„ãŸãƒ‘ã‚¿ãƒ¼ãƒ³ãƒãƒƒãƒã‚’ã™ã‚Œã°ã€ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®é †ç•ªãŒé•ã£ã¦ã„ã¦ã‚‚ã‚ˆã„ã€‚

```
ghci> :{
ghci| formatEntry :: Entry -> String
ghci| formatEntry (Entry { category = "",  price = pri }) = "<Unknown category>" ++ ": " ++ show pri
ghci| formatEntry (Entry { category = cat, price = pri }) = cat ++ ": " ++ show pri
ghci| :}
```

#### ã‚¿ãƒ—ãƒ«ã«å¯¾ã™ã‚‹é–¢æ•°ã®å¼•æ•°ã§ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒãƒƒãƒ

ä¾¿åˆ©ãªã‚µãƒ³ãƒ—ãƒ«ãŒ[`Prelude`ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«][6]ã«ã„ãã¤ã‹ã‚ã‚‹ã€‚  
ä»¥ä¸‹ã¯ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‹ã‚‰ã®æŠœç²‹:

[6]: https://hackage.haskell.org/package/base-4.12.0.0/docs/Prelude.html#g:3

```
fst :: (a, b) -> a
fst (x, _) = x

snd :: (a, b) -> b
snd (_, y) = y
```

èª²é¡Œ8ã§ç´¹ä»‹ã—ãŸã¨ãŠã‚Šã€ã“ã‚Œã‚‰ã¯`Prelude`ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã«å…¥ã£ã¦ã„ã‚‹ã®ã§ã€ä½•ã‚‚`import`ã—ãªãã¦ã‚‚ä½¿ãˆã‚‹

ãŠã¾ã‘: `curry`ã¨`uncurry`

`curry`ã¯ã€Œï¼ˆã‚µã‚¤ã‚º2ã®ï¼‰ã‚¿ãƒ—ãƒ«ã‚’å—ã‘å–ã‚‹é–¢æ•°ã€ã‚’ï¼ˆHaskellã®ä¸–ç•Œã§æ™®é€šã®ã€ã‚«ãƒªãƒ¼åŒ–ã•ã‚ŒãŸï¼‰2å¼•æ•°é–¢æ•°ã«å¤‰æ›ã™ã‚‹ã€‚

```
curry :: ((a, b) -> c) -> a -> b -> c
curry f x y = f (x, y)
```

`uncurry`ã¯ãã®é€†ã€‚ã“ã“ã§ã‚¿ãƒ—ãƒ«ã«å¯¾ã™ã‚‹ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒãƒƒãƒãŒå‡ºã¦ãã‚‹ã€‚

```
uncurry :: (a -> b -> c) -> ((a, b) -> c)
uncurry f (x, y) = f x y
```

ãŠãã‚‰ã`uncurry`ã®æ–¹ãŒå®Ÿè·µã§ã¯ã‚ˆãä½¿ã†

å…¸å‹çš„ãªä½¿ç”¨ä¾‹: `Map`æ–¹ã®å€¤ã‚’`toList`é–¢æ•°ã§å¤‰æ›ã—ãŸçµæœã‚’ã€ãã®ã¾ã¾2å¼•æ•°ã®é–¢æ•°ã«æ¸¡ã™

`(+)`ã‚’`uncurry`é–¢æ•°ã§ã‚¿ãƒ—ãƒ«ã‚’å—ã‘å–ã‚‹é–¢æ•°ã«å¤‰æ›ã™ã‚‹ã“ã¨ã§ã€`toList`çµæœã®å€¤ã‚’ãã®ã¾ã¾ä½¿ãˆã‚‹ã€‚

```
ghci> import qualified Data.Map.Strict as M

ghci> numberAndChars = M.fromList [(1, 3), (2, 4)]
ghci> map (uncurry (+)) $ M.toList numberAndChars
[4,6]
```

ãƒ©ãƒ ãƒ€æŠ½è±¡ã§æ›¸ãæ›ãˆã‚‹ã¨â†“ã¨åŒã˜

```
ghci> map (\pair -> fst pair + snd pair) $ M.toList numberAndChars
[4,6]
```

#### ãƒ©ãƒ ãƒ€æŠ½è±¡ã®å¼•æ•°ã§ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒãƒƒãƒ

å¼•æ•°ã§ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒãƒƒãƒã¯ã€ãƒ©ãƒ ãƒ€æŠ½è±¡ã§ã‚‚ä½¿ãˆã‚‹ã€‚

ã¤ã¾ã‚Šã€

```
tupleToEntry :: (String, Integer) -> Entry
tupleToEntry (cat, pri) = Entry cat pri
```

â†‘ã¨â†“ã¯åŒã˜ï¼

```
tupleToEntry :: (String, Integer) -> Entry
tupleToEntry = \(cat, pri) -> Entry cat pri
```

èª²é¡Œ8ã§â†“ã®ã‚ˆã†ã«æ›¸ã„ã¦ã„ãŸã®ã¨å®Ÿè³ªåŒã˜ã‚ˆã†ãªã‚‚ã®ã€‚

```
-- ...
let (divResult, modResult) = divMod numerator denominator
-- ...
```

ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒãƒƒãƒã«é–¢ã™ã‚‹è©±ã‚’ã¾ã¨ã‚ã‚‹ã¨

- åŸå‰‡1: å€¤ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ãƒ¼ã§å€¤ã‚’çµ„ã¿ç«‹ã¦ã‚‹ã®ã¨é€†ã®ã“ã¨ã‚’ã™ã‚‹ã®ãŒãƒ‘ã‚¿ãƒ¼ãƒ³ãƒãƒƒãƒã€‚
    - ãƒªã‚¹ãƒˆã«ã¯ `[x, y]` ã¨ã„ã†æ§‹æ–‡ã®ã€ç‰¹åˆ¥ãªå€¤ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ãƒ¼ãŒã‚ã‚‹ã€‚æœ¬æ¥ã¯`x : y : []`ã€‚
- åŸå‰‡2: é–¢æ•°ã®å¼•æ•°ã‚’å«ã‚ãŸã€å¤‰æ•°ã¸ã®ä»£å…¥ã‚’è¡Œã†ã‚ã‚‰ã‚†ã‚‹å ´é¢ã§ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒãƒƒãƒã¯ä½¿ãˆã‚‹ã€‚

ã§ã‚‚ã€ã“ã‚Œã¯å±ãªã„ï¼

```
ghci> dangerous = \(Just x) -> x
```

ãƒ©ãƒ ãƒ€æŠ½è±¡ã¯

```
dangerous (Just x) = x
dangerous Nothing = "error!"
```

ã¿ãŸã„ã«ã€é–¢æ•°å®šç¾©ã®æ§‹æ–‡ã®ã‚ˆã†ã«å¼•æ•°ã§ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒãƒƒãƒã—ã¦ã‚‚å ´åˆåˆ†ã‘ãŒã§ããªã„ã®ã§ã€

```
dangerous = \(Just x) -> x
```

ã¿ãŸã„ã«æ›¸ããŸããªã£ãŸã‚‰ã€â†“ã®ã‚ˆã†ãª`case`ã«å¤‰æ›ã™ã‚‹ã—ã‹ãªã„ï¼ˆ`LambdaCase`ã«ã¤ã„ã¦ã¯ã„ã¤ã‹è„šæ³¨ã«ï¼‰ã€‚

```
dangerous = \mx ->
    case mx of
        Just x  -> ...
        Nothing -> ...
```

çµæœã€ã†ã£ã‹ã‚Š`Nothing`ãŒæ¸¡ã•ã‚Œã¦ã‚¨ãƒ©ãƒ¼ã«ãªã£ã¦ã—ã¾ã†ã“ã¨ã‚‚

```
ghci> dangerous Nothing
*** Exception: <interactive>:8:2-15: Non-exhaustive patterns in lambda
```

è­¦å‘Šã‚’æœ‰åŠ¹ã«ã—ã¦ã‚‚æ•™ãˆã¦ãã‚Œãªã„ğŸ˜±

```
ghci> :set -Wall
ghci> dangerous = (\(Just x) -> x)
```

`-Wincomplete-uni-patterns`ã‚’æœ‰åŠ¹ã«ã—ãªã„ã¨ã„ã‘ãªã„ï¼

```
ghci> :set -Wincomplete-uni-patterns
ghci> dangerous = \(Just x) -> x

<interactive>:10:2: warning: [-Wincomplete-uni-patterns]
    Pattern match(es) are non-exhaustive
    In a lambda abstraction: Patterns not matched: Nothing
```

[GHCã®å°†æ¥ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã§ã€`-Wincomplete-uni-patterns`ãŒ`-Wall`ã«å«ã¾ã‚Œã‚‹][7]ã‹ã‚‚ã€‚

[7]: https://gitlab.haskell.org/ghc/ghc/issues/15656

`-Wall`ã‚’æœ‰åŠ¹ã«ã—ã¦ã‚‚æœ‰åŠ¹ã«ãªã‚‰ãªã„è­¦å‘Šã®ä¸€è¦§ã¯[GHC Users Guide][8]ã‚’å‚ç…§ã€‚

<https://functor.tokyo/blog/2017-07-28-ghc-warnings-you-should-enable>

[8]: https://downloads.haskell.org/~ghc/latest/docs/html/users_guide/using-warnings.html#ghc-flag--Wall

## HLintã§æ”¹å–„ç‚¹ã‚’ã‚ã‚‹ç¨‹åº¦è‡ªå‹•ã§è¦‹ã¤ã‘ã‚‹

```bash
shell> cabal install hlint
# ã‚ã‚‹ã„ã¯...
shell> stack install hlint
```

ã“ã“ã§ç´¹ä»‹ã—ã¦ã„ãªã„`TupleSections`ã¨ã„ã†GHCã®æ‹¡å¼µã‚’ä½¿ã£ãŸã‚‚ã®ã‚‚ï¼ˆGHCã®æ‹¡å¼µã®è©±ã‚’å¾Œå›ã—ã«ã—ãŸã„ã®ã§æ•¢ãˆã¦ç´¹ä»‹ã—ã¦ã„ã¾ã›ã‚“... ã‚ã—ã‹ã‚‰ãšï¼‰ã€‚

```bash
shell> hlint assets/16.hs
assets/16.hs:18:14: Warning: Avoid lambda
Found:
  \ x y -> x + y
Perhaps:
  (+)

assets/16.hs:19:19: Suggestion: Use tuple-section
Found:
  \ w -> (w, 1)
Perhaps:
  (, 1)
Note: may require `{-# LANGUAGE TupleSections #-}` adding to the top of the file

2 hints
```

HLintã®ã•ã‚‰ã«ä¾¿åˆ©ãªä½¿ã„æ–¹ã¯[ç´ æ™´ã‚‰ã—ã HLint ã‚’ä½¿ã„ã“ãªã™][9]ã‚’ã€‚  
ã€Œã“ã®é–¢æ•°ã¯ã“ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ä»¥å¤–ã§ã¯ä½¿ã‚ãªã„ã§ãã ã•ã„ã€ãªã©ã¨ã„ã†ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå›ºæœ‰ã®ãƒ«ãƒ¼ãƒ«ã‚’è¨­å®šã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚

[9]: https://haskell.e-bigmoon.com/posts/2018-01-29-awesome-hlint.html
