# å…¥åŠ›ã®å–å¾—

æ¨™æº–å…¥åŠ›ã‹ã‚‰èª­ã‚“ã æ–‡å­—åˆ—ã‚’ã€æ”¹è¡Œæ–‡å­—ã§åŒºåˆ‡ã£ã¦ã€é€†é †ã«ä¸¦ã³æ›¿ãˆã¦æ¨™æº–å‡ºåŠ›ã«æ›¸ãè¾¼ã¿ã¾ã—ã‚‡ã†ã€‚

## å®Ÿè¡Œçµæœä¾‹

`input.txt`ã¨ã„ã†ã€æ¬¡ã®ã‚ˆã†ãªå†…å®¹ã®ãƒ•ã‚¡ã‚¤ãƒ«ãŒã‚ã‚‹ã¨ãã€

```
Lorem ipsum dolor sit amet,
sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.
consectetur adipiscing elit,
```

ä¸‹ğŸ‘‡ã®ã‚ˆã†ã«å®Ÿè¡Œã™ã‚‹ã¨ã€

```
shell> stack exec runhaskell 3.hs < input.txt
```

ä¸‹ğŸ‘‡ã®ã‚ˆã†ãªæ–‡å­—åˆ—ã‚’å‡ºåŠ›ã—ã¾ã™ã€‚

```
sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.
consectetur adipiscing elit,
Lorem ipsum dolor sit amet,
```

## å¿…è¦ãªçŸ¥è­˜

### ãƒªã‚¹ãƒˆã€`reverse`é–¢æ•°ã€`lines`é–¢æ•°ã€`unlines`é–¢æ•°ã€`putStr`é–¢æ•°

ã¾ãšã¯å…¥åŠ›ã‚„å‡ºåŠ›ã‚’ã©ã®ã‚ˆã†ã«è¡Œã†ã®ã‹ã¯å¿˜ã‚Œã¦ã€ã€Œæ–‡å­—åˆ—ã«å¯¾ã—ã¦ã€ã©ã‚“ãªå‡¦ç†ã‚’ã™ã‚‹ã®ã‹ã€ã‚’è€ƒãˆã¾ã—ã‚‡ã†ã€‚  
ä»Šå›ã®èª²é¡Œã«é–¢ã—ã¦è¨€ãˆã°ãšã°ã‚Šã€Œæ–‡å­—åˆ—ã‚’ã€æ”¹è¡Œæ–‡å­—ã§åŒºåˆ‡ã£ã¦ã€é€†é †ã«ä¸¦ã³æ›¿ãˆã€ã‚‹å‡¦ç†ãŒè©²å½“ã—ã¾ã™ã€‚

ã¡ã‚‡ã£ã¨è„±ç·šã€‚  
Haskellã§ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã«é™ã‚‰ãšã€ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã®è¨­è¨ˆã«ã¤ã„ã¦è€ƒãˆã‚‹ã¨ãã¯ã€å¯èƒ½ãªé™ã‚Šã€Œå…¥åŠ›ã‚„å‡ºåŠ›ã«é–¢ã‚ã‚‹éƒ¨åˆ†ã€ã¨ã€Œï¼ˆå…¥åŠ›ã‚’å—ã‘å–ã£ã¦ã§ããŸï¼‰**å€¤ã«å¯¾ã—ã¦**ï¼ˆæœ€çµ‚çš„ã«å‡ºåŠ›ã™ã‚‹å‰ã«ï¼‰**ã©ã®ã‚ˆã†ãªå‡¦ç†ã‚’ã™ã‚‹ã®ã‹**ã€ã‚’åˆ†ã‘ã¦è€ƒãˆã‚‹ã¨ã€ã‚ˆã‚Šå†åˆ©ç”¨æ€§ãŒé«˜ãã€ãƒ†ã‚¹ãƒˆã‚‚ç†è§£ã‚‚ã—ã‚„ã™ã„ãƒ—ãƒ­ã‚°ãƒ©ãƒ ãŒæ›¸ã‘ã¾ã™ã€‚  
ä¾‹ãˆã°ä»Šå›ã®èª²é¡Œã«é–¢ã—ã¦è¨€ãˆã°ã€ãã®ã‚ˆã†ã«è€ƒãˆã‚‹ã“ã¨ã§ã€ã€Œæ–‡å­—åˆ—ã‚’æ”¹è¡Œæ–‡å­—ã§åŒºåˆ‡ã£ã¦ã€é€†é †ã«ä¸¦ã³æ›¿ãˆã€ã‚‹å‡¦ç†ã‚’ã€GHCiä¸Šã§ã‚‚ãŠæ°—è»½ã«ãƒ†ã‚¹ãƒˆã§ãã¾ã™ã€‚

ã¨ã€è¨€ã†ã‚ã‘ã§ä»Šå›ã®èª²é¡Œã‚’è§£ããŸã‚ã®é–¢æ•°ã‚’GHCiä¸Šã§è©¦ã—ã¾ã—ã‚‡ã†ã€‚

```bash
shell> stack exec ghci
```

æœ€åˆã«ç´¹ä»‹ã™ã‚‹ã®ã¯æ–‡å­—åˆ—ã‚’ã€Œæ”¹è¡Œæ–‡å­—ã§åŒºåˆ‡ã‚‹ã€é–¢æ•°ã€`lines`é–¢æ•°ã§ã™ã€‚  
èª²é¡Œ3ã§è§¦ã‚ŒãŸã€`\n`ã‚’æ€ã„å‡ºã—ãªãŒã‚‰ã€æ¬¡ã®ã‚ˆã†ã«å…¥åŠ›ã—ã¦ã¿ã¦ãã ã•ã„ã€‚

```haskell
ghci> lines "A string\ncontaining\nnewlines\nin the middle."
["A string","containing","newlines","in the middle."]
```

å‡ºåŠ›ã•ã‚ŒãŸè§’æ‹¬å¼§`[]`ã§å›²ã‚ã‚ŒãŸã‚‚ã®ã¯ã€æ–‡å­—åˆ—ã®ãƒªã‚¹ãƒˆã§ã™ã€‚  
ãƒªã‚¹ãƒˆã¯ã€Haskellã§ï¼ˆåŒã˜å‹ã®ï¼‰è¤‡æ•°ã®å€¤ã‚’è¡¨ã™ã®ã«ä½¿ã‚ã‚Œã‚‹ã€æœ€ã‚‚å˜ç´”ãªãƒ‡ãƒ¼ã‚¿æ§‹é€ ã§ã™ã€‚  
ã‚‚ã¡ã‚ã‚“æ–‡å­—åˆ—ã ã‘ã§ãªãã€ã»ã‹ã®ã©ã‚“ãªå‹ã®å€¤ã‚‚å…¥ã‚Œã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚  
ä¾‹ãˆã°ä¸‹è¨˜ã¯æ•°å€¤ã®ãƒªã‚¹ãƒˆã§ã™ã€‚

```haskell
ghci> [1, 2, 3]
[1,2,3]
```

`lines`é–¢æ•°ã¯ã€å—ã‘å–ã£ãŸæ–‡å­—åˆ—ã‚’æ”¹è¡Œæ–‡å­—(`\n`)ã§åŒºåˆ‡ã‚‹ã“ã¨ã§ã€ãã®æ–‡å­—åˆ—ã®ãƒªã‚¹ãƒˆã‚’ä½œã‚Šã¾ã™ã€‚  
ã“ã‚Œã§ã€Œæ”¹è¡Œæ–‡å­—ã§åŒºåˆ‡ã£ã¦ã€ã¨ã„ã†å‡¦ç†ã¯å®Ÿè£…ã§ãã¾ã™ã­ã€‚

ç¶šã„ã¦ã€ã€Œé€†é †ã«ä¸¦ã³æ›¿ãˆã€ã‚‹å‡¦ç†ã§ã™ã€‚  
`lines`é–¢æ•°ã§ä½œã£ãŸæ–‡å­—åˆ—ã®ãƒªã‚¹ãƒˆã‚’é€†é †ã«ã™ã‚‹ã«ã¯ã€æ–‡å­—é€šã‚Š`reverse`é–¢æ•°ã‚’ä½¿ã„ã¾ã—ã‚‡ã†ã€‚

```haskell
ghci> reverse ["A string","containing","newlines","in the middle."]
["in the middle.","newlines","containing","A string"]
```

é€†é †ã«ãªã£ã¦è¿”ã£ã¦ãã¾ã—ãŸã­ã€‚

ã•ã¦ã€ã“ã®èª²é¡Œã®è¦ä»¶ã§ã¯æœ€çµ‚çš„ã«ã€Œæ¨™æº–å‡ºåŠ›ã«æ›¸ãè¾¼ã€ã¾ãªã‘ã‚Œã°ãªã‚‰ãªã„ã®ã§ã—ãŸã€‚  
ã“ã‚Œã¾ã§ã®èª²é¡Œã§å‹‰å¼·ã—ãŸ`putStrLn`é–¢æ•°ã¯ã€æ–‡å­—åˆ—ã‚’æ¸¡ã•ãªã„ã¨ã‚¨ãƒ©ãƒ¼ã«ãªã‚Šã¾ã™ã€‚

```haskell
ghci> putStrLn ["in the middle.","newlines","containing","A string"]
> putStrLn ["in the middle.","newlines","containing","A string"]

<interactive>:12:11: error:
    ? Couldn't match expected type â€˜Charâ€™ with actual type â€˜[Char]â€™
    ? In the expression: "in the middle."
      In the first argument of â€˜putStrLnâ€™, namely
        â€˜["in the middle.", "newlines", "containing", "A string"]â€™
      In the expression:
        putStrLn ["in the middle.", "newlines", "containing", "A string"]

... ï¼ˆä»¥ä¸‹ç•¥ï¼‰
```

èª²é¡Œ2ã§ç´¹ä»‹ã—ãŸ`print`é–¢æ•°ã¯æ–‡å­—åˆ—ã®ãƒªã‚¹ãƒˆã«ã‚‚ä½¿ãˆã¾ã™ã€‚

```haskell
ghci> print ["in the middle.","newlines","containing","A string"]
["in the middle.","newlines","containing","A string"]
```

ãŸã ã—ã€ã“ã‚Œã¯èª²é¡Œã®è¦ä»¶ã«ã‚ã£ãŸå‡ºåŠ›ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚  
æ”¹è¡Œæ–‡å­—ã§åŒºåˆ‡ã£ã¦é€†é †ã«ã—ãŸå¾Œã€å„è¡Œã‚’é€†é †ã«å‡ºåŠ›ã™ã‚‹ã«ã¯ã€ã¾ãŸæ”¹è¡Œæ–‡å­—ã§æ–‡å­—åˆ—ã‚’çµåˆã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã®ã§ã™ã€‚  
ãã“ã§å½¹ã«ç«‹ã¤ã®ãŒ`unlines`é–¢æ•°ã§ã™ã€‚

```haskell
ghci> unlines ["A string","containing","newlines","in the middle."]
"A string\ncontaining\nnewlines\nin the middle.\n"
```

æœŸå¾…ã—ãŸã¨ãŠã‚Šã€ãƒªã‚¹ãƒˆã®è¦ç´ ãŒæ”¹è¡Œæ–‡å­—ã§çµåˆã•ã‚Œã¦ã€ä¸€ã¤ã®æ–‡å­—åˆ—ã«å¤‰ã‚ã£ãŸã®ãŒã‚ã‹ã‚‹ã§ã—ã‚‡ã†ã‹ï¼Ÿ  
ã§ããŸæ–‡å­—åˆ—ã‚’`putStrLn`ã—ã¦ã¿ã‚‹ã¨ã€ã‚ˆãã‚ã‹ã‚Šã¾ã™ã€‚

```haskell
ghci> putStrLn "A string\ncontaining\nnewlines\nin the middle.\n"
A string
containing
newlines
in the middle.

ghci>
```

ãŠã£ã¨ã€æœ€å¾Œã®è¡Œ`in the middle`ã®å¾Œã«ã€ä½™è¨ˆãªç©ºè¡ŒãŒã§ãã¦ã—ã¾ã„ã¾ã—ãŸã€‚  
ã“ã‚Œã§ã¯èª²é¡Œã®è¦ä»¶ã‚’ã‚¯ãƒªã‚¢ã§ãã¾ã›ã‚“ã€‚  
`putStrLn`ã®`Ln`ã¯ã€ŒLineã€ã®ç•¥ã§ã‚ã‚‹ã¨ãŠã‚Šã€å¿…ãšè¡Œã®æœ«å°¾ã®æ–‡å­—ã§ã‚ã‚‹`\n`ã‚’å‡ºåŠ›ã—ã¾ã™ã€‚  
ãã—ã¦ã€`unlines`ã‚‚æ–‡å­—åˆ—ã®æœ«å°¾ã«`\n`ã‚’åŠ ãˆã¾ã™ã€‚  
`\n`ã¯ã‚ãã¾ã§ã‚‚è¡Œã®æœ«å°¾ã«ã‚ã‚‹ã¹ãæ–‡å­—ãªã®ã§ã€æœ€å¾Œã®æ–‡å­—ã«ã‚‚ã¡ã‚ƒã‚“ã¨åŠ ãˆã‚‹ã®ã§ã—ã‚‡ã†ã€‚

ã„ãšã‚Œã«ã—ã¦ã‚‚ã€ã“ã®å•é¡Œã‚’å›é¿ã™ã‚‹ãŸã‚ã«ã¯ã€`putStr`ã¨ã„ã†æ–‡å­—é€šã‚Š`Ln`ãŒã¤ã‹ãªã„é–¢æ•°ã‚’ä½¿ã„ã¾ã™ã€‚

```haskell
ghci> putStr "A string\ncontaining\nnewlines\nin the middle.\n"
A string
containing
newlines
in the middle.
ghci>
```

ä»Šåº¦ã¯ä½™è¨ˆãªç©ºè¡ŒãŒå‡ºã¦ã¾ã›ã‚“ã­ï¼LGTMï¼

### å…¨éƒ¨çµ„ã¿åˆã‚ã›ã‚‹

ã•ã¦ã€ã“ã“ã¾ã§ç´¹ä»‹ã—ãŸé–¢æ•°ã‚’ç”Ÿã‹ã—ã¦ã€ã€Œæ–‡å­—åˆ—ã‚’ã€æ”¹è¡Œæ–‡å­—ã§åŒºåˆ‡ã£ã¦ã€é€†é †ã«ä¸¦ã³æ›¿ãˆã€ã‚‹å‡¦ç†ã¨ã€ã•ã‚‰ã«ãã‚Œã‚’å‡ºåŠ›ã™ã‚‹å‡¦ç†ã‚’å®Ÿè£…ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚  
å…¨éƒ¨çµ„ã¿åˆã‚ã›ã¦ã—ã¾ã†ã¨èª²é¡Œã®ç­”ãˆã«ãªã£ã¦ã—ã¾ã†ã®ã§ã€ä¸€éƒ¨ã®å‡¦ç†ã‚’ç¤ºã™ã“ã¨ã§ã€æ³¨æ„ã™ã¹ãç‚¹ã‚’ãŠä¼ãˆã—ãŸã„ã¨æ€ã„ã¾ã™ã€‚

çµè«–ã‹ã‚‰å…ˆã«æ›¸ãã¨ã€æ–‡å­—åˆ—ã‚’æ”¹è¡Œæ–‡å­—`\n`ã§åŒºåˆ‡ã£ã¦`print`é–¢æ•°ã§ä¸­èº«ã‚’è¡¨ç¤ºã™ã‚‹å‡¦ç†ã¯ã€æ¬¡ã®ã‚ˆã†ã«æ›¸ãã“ã¨ã§å®Ÿè£…ã§ãã¾ã™ã€‚

```haskell
ghci> print (lines "A string\ncontaining\nnewlines\nin the middle.\n")
["A string","containing","newlines","in the middle."]
```

`(lines "A string\ncontaining\nnewlines\nin the middle.\n")`ã¨ã€**é–¢æ•°åã¨ãã®å¼•æ•°ä¸¡æ–¹ã‚’ã‚«ãƒƒã‚³ã§**å›²ã£ã¦ã„ã‚‹ç‚¹ã«æ³¨æ„ã—ã¦ãã ã•ã„ã€‚  
ã»ã‹ã®ã‚ˆãã‚ã‚‹ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°è¨€èªã®ã‚ˆã†ã«ã€

```haskell
ghci> print lines("A string\ncontaining\nnewlines\nin the middle.\n")
```

ã§ã‚‚ãªã‘ã‚Œã°ã€ã¾ã—ã¦ã‚„

```haskell
ghci> print lines "A string\ncontaining\nnewlines\nin the middle.\n"
```

ã§ã‚‚ãªã„ç‚¹ã«æ³¨æ„ã—ã¦ãã ã•ã„ã€‚  
ã“ã®å ´åˆã¯ã€`print`é–¢æ•°ã«`lines`é–¢æ•°ã¨`"A string\ncontaining\nnewlines\nin the middle.\n"`ã¨ã„ã†**2ã¤ã®å¼•æ•°**ã‚’æ¸¡ã—ã¦ã„ã‚‹ã€ã¨ã„ã†æ„å‘³ã«ãªã‚Šã¾ã™ã€‚  
ã€Œ`print`é–¢æ•°ã«`lines`é–¢æ•°ã‚’æ¸¡ã™ã€ã¨ã„ã†ã®ãŒã¡ã‚‡ã£ã¨ãŠã‹ã—ãèã“ãˆã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚  
`print`é–¢æ•°ä»¥å¤–ã®é–¢æ•°ã§ã™ã¨ã€Haskellã®æ§‹æ–‡ä¸Šãã†ã„ã†å¼ã‚‚æ™®é€šã«ã‚ã‚Šå¾—ã‚‹ã®ã§ã€Haskellã¯2ã¤ã®å¼•æ•°ã‚’æ¸¡ã—ãŸã€ã¨è§£é‡ˆã—ã¾ã™ã€‚

ã„ãšã‚Œã«ã—ã¦ã‚‚ã€`print`é–¢æ•°ã¯1ã¤ã®å¼•æ•°ã—ã‹å—ã‘å–ã‚‰ãªã„ã®ã§ã€ä¸Šè¨˜ã®å¼ã¯ã‚¨ãƒ©ãƒ¼ã«ãªã‚Šã¾ã™ã€‚

```haskell
ghci> print lines "A string\ncontaining\nnewlines\nin the middle.\n"

<interactive>:23:1: error:
    ? Couldn't match expected type â€˜[Char] -> tâ€™
                  with actual type â€˜IO ()â€™
    ? The function â€˜printâ€™ is applied to two arguments,
      but its type â€˜(String -> [String]) -> IO ()â€™ has only one
      In the expression:
        print lines "A string\ncontaining\nnewlines\nin the middle.\n"
      In an equation for â€˜itâ€™:
          it = print lines "A string\ncontaining\nnewlines\nin the middle.\n"
    ? Relevant bindings include it :: t (bound at <interactive>:23:1)
```

`? The function â€˜printâ€™ is applied to two arguments,`  
`but its type â€˜(String -> [String]) -> IO ()â€™ has only one` ã¨ã„ã†ç®‡æ‰€ãŒè©²å½“ã—ã¾ã™ã®ã§ã€ã¼ã‚“ã‚„ã‚Šè¦šãˆã¦ãŠã„ã¦ãã ã•ã„ã€‚

ã“ã“ã¾ã§ã®è©±ã‚’ä¸€èˆ¬åŒ–ã—ã¾ã—ã‚‡ã†ã€‚  
Haskellã§é–¢æ•°ã‚’å‘¼ã³å‡ºã™éš›ã¯ã€æ¬¡ã®ã‚ˆã†ãªå½¢å¼ã§æ›¸ã„ã¦ãã ã•ã„ã€‚

```haskell
é–¢æ•°å å¼•æ•°1 å¼•æ•°2 ... å¼•æ•°N
```

é–¢æ•°åã¨å¼•æ•°ã‚’ã‚¹ãƒšãƒ¼ã‚¹ã§åŒºåˆ‡ã£ã¦ã„ã‚‹ã ã‘ã§ã„ã„ã®ã§ã™ã€‚  
ã‚«ãƒƒã‚³ã¯ã€ã©ã®é–¢æ•°ã«ã©ã®å¼•æ•°ã‚’æ¸¡ã—ã¦ã„ã‚‹ã®ã‹ã€æ˜ç¢ºã«ã—ãŸã„ã¨ãã ã‘ä½¿ã„ã¾ã™ã€‚

```haskell
é–¢æ•°A Aã®å¼•æ•°1 (é–¢æ•°B Bã®å¼•æ•°1 Bã®å¼•æ•°2 ... Bã®å¼•æ•°N) Aã®å¼•æ•°3 ... Aã®å¼•æ•°N
--             ^------------------------------------^
--                  ã“ã®éƒ¨åˆ†ãŒé–¢æ•°Aã®å¼•æ•°2ã«ãªã‚‹
```

é–¢æ•°å‘¼ã³å‡ºã—ã¯éå¸¸ã«é »ç¹ã«ä½¿ã†æ§‹æ–‡ãªã®ã§ã€ç°¡å˜ã«ä½¿ãˆã‚‹ã®ã¯ã„ã„ã“ã¨ã§ã™ã­ï¼

ã¡ãªã¿ã«ã€Haskellã«ã¯ã“ã†ã—ãŸé–¢æ•°å‘¼ã³å‡ºã—ãŒã‚‚ã£ã¨è¤‡é›‘ã«å…¥ã‚Œå­ã«ãªã£ãŸå ´åˆã«ã€ã‚ˆã‚Šç°¡æ½”ã«æ›¸ãæ–¹æ³•ãŒã‚ã‚Šã¾ã™ã€‚  
ãŠã„ãŠã„èª¬æ˜ã—ã¾ã™ã­ã€‚

### `do`è¨˜æ³•ã§`getContents`é–¢æ•°ã¨ç´°ã„å·¦çŸ¢å°`<-`ã‚’ä½¿ã£ã¦ã€å…¥åŠ›ã‚’å—ã‘å–ã‚‹

ã„ã‚ˆã„ã‚ˆã€æ¨™æº–å…¥åŠ›ã‹ã‚‰æ–‡å­—åˆ—ã‚’èª­ã‚“ã§ã€å¤‰æ•°ã«ä»£å…¥ã™ã‚‹æ–¹æ³•ã‚’èª¬æ˜ã—ã¾ã—ã‚‡ã†ã€‚  
Haskellã§ã“ã‚Œã‚’ä¸€ç•ªç°¡å˜ã«å®Ÿç¾ã™ã‚‹æ–¹æ³•ã¯ã€ã¡ã‚‡ã£ã¨å¤‰ã‚ã£ã¦ã„ã¾ã™ã€‚  
ä¾‹ãˆã°ã€ã€Œ`getContents`ã¨ã„ã†å‘½ä»¤ã‚’ä½¿ã£ã¦æ¨™æº–å…¥åŠ›ã‹ã‚‰èª­ã‚“ã æ–‡å­—åˆ—ã‚’ã€`input`ã¨ã„ã†å¤‰æ•°ã«ä»£å…¥ã™ã‚‹ã€ã¨ã„ã†å‡¦ç†ã¯ã€ä¸‹è¨˜ã®ã‚ˆã†ã«æ›¸ãã¾ã™ã€‚

```haskell
do
  input <- getContents
```

å¤‰æ•°ã¸ã®ä»£å…¥ã¨ã„ã†ã¨ã€ã‚¤ã‚³ãƒ¼ãƒ« `=` ã‚’ä½¿ã£ãŸæ§‹æ–‡ã‚’ã‚¤ãƒ¡ãƒ¼ã‚¸ã™ã‚‹æ–¹ãŒå¤šã„ã‹ã¨æ€ã„ã¾ã™ã€‚  
ã—ã‹ã—ã€ã“ã“ã§ã¯ç´°ã„å·¦çŸ¢å° `<-` ã‚’ä½¿ã‚ãªã‘ã‚Œã°ãªã‚Šã¾ã›ã‚“ï¼ˆã¾ã è©³ã—ãèª¬æ˜ã—ã¦ã„ã¾ã›ã‚“ãŒã€ã‚¤ã‚³ãƒ¼ãƒ« `=`ã‚’ä½¿ã£ãŸä»£å…¥ã‚‚ã‚„ã£ã±ã‚Šã‚ã‚Šã¾ã™ï¼‰ã€‚

Haskellã«ãŠã„ã¦ã€`getContents`ã¯ã€ã€Œå‘½ä»¤ï¼ˆæ…£ç¿’çš„ã«ã€ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã€ã¨å‘¼ã°ã‚Œã‚‹ã“ã¨ã‚‚å¤šã„ã§ã™ï¼‰ã€ã§ã‚ã‚Šã€ãã®å®Ÿè¡Œçµæœã‚’å–ã‚Šå‡ºã—ã¦å¤‰æ•°ã«ä»£å…¥ã™ã‚‹ã«ã¯ã€ç´°ã„å·¦çŸ¢å° `<-` ã‚’ä½¿ã„ã¾ã™ã€‚

ã“ã‚Œã¾ã§ã«ä½•åº¦ã‚‚ä½¿ã£ãŸã€`putStrLn`ã‚„`print`ã€ãã‚Œã‹ã‚‰`putStr`ã‚‚ã€Œå‘½ä»¤ã€ã§ã™ã€‚  
ãŸã ã—ã€`putStrLn`ã‚„`print`ãªã©ã¯ç‰¹ã«æ„å‘³ã®ã‚ã‚‹çµæœã‚’è¿”ã•ãªã„ã®ã§ã€ã“ã‚Œã¾ã§`<-`ã¯å‡ºã¦ãã¾ã›ã‚“ã§ã—ãŸã€‚  
`do`è¨˜æ³•ã¯ã€ã“ã‚Œã‚‰ã®ã‚ˆã†ãªã€Œå‘½ä»¤ã€ã‚’åˆ—æŒ™ã—ãŸã‚Šã€ã€Œå‘½ä»¤ã€ã®å®Ÿè¡Œçµæœã‚’ç°¡å˜ã«åˆ©ç”¨ã™ã‚‹ãŸã‚ã®ä»•çµ„ã¿ã‚’æä¾›ã—ã¦ãã‚Œã‚‹ã®ã§ã™ã€‚

ç´°ã„å·¦çŸ¢å° `<-` ã‚’ä½¿ã£ã¦ä»£å…¥ã—ãŸå¤‰æ•°ã¯ã€æ™®é€šã®å¤‰æ•°ã¨åŒæ§˜ã«å‚ç…§ã—ã¦ä½¿ã†ã“ã¨ãŒã§ãã¾ã™ã€‚

```haskell
do
  input <- getContents
  putStr input
```

ã“ã®ã‚ˆã†ã«æ›¸ãã¨ã€ãŠãªã˜ã¿`cat`ã‚³ãƒãƒ³ãƒ‰ã®ã‚ˆã†ã«ã€ã€Œæ¨™æº–å…¥åŠ›ã‹ã‚‰æ–‡å­—åˆ—ã‚’èª­ã‚“ã§ã€æ¨™æº–å‡ºåŠ›ã«ãã®ã¾ã¾æ›¸ãè¾¼ã‚€ã€ã“ã¨ãŒã§ãã¾ã™ã€‚

ãŠãªã˜ã¿`main`ã®å®šç¾©ã«æ›¸ã‘ã°ã€ç°¡æ˜“ç‰ˆ`cat`ã‚³ãƒãƒ³ãƒ‰ã®ã§ãã‚ãŒã‚Šã§ã™ï¼

```haskell
main = do
  input <- getContents
  putStr input
```

ãŸã ã—ã€**ç´°ã„å·¦çŸ¢å° `<-` ã¯`do`ã®ä¸­ã§ã—ã‹ä½¿ãˆãªã„**ã€ã¨ã„ã†ç‚¹ã«æ³¨æ„ã—ã¦ãã ã•ã„ã€‚

æ¬¡ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’å®Ÿè¡Œã—ã‚ˆã†ã¨ã™ã‚‹ã¨ã€ã‚¨ãƒ©ãƒ¼ã«ãªã£ã¦ã—ã¾ã„ã¾ã™ã€‚

```haskell
main =
  input <- getContents
  putStr input
```

```
shell> stack exec runhaskell no-do.hs
no-do.hs:2:9: error:
    parse error on input â€˜<-â€™
    Perhaps this statement should be within a 'do' block?
  |
2 |   input <- getContents
  |         ^^
```

`Perhaps this statement should be within a 'do' block?`ã¨ã„ã†ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¯ã€ã‚ã–ã‚ã–ã€Œã“ã®å‘½ä»¤(`input <- getContents`)ã¯`do`ãƒ–ãƒ­ãƒƒã‚¯ã®ä¸­ã§ä½¿ã†ã¹ããªã®ã§ã¯ï¼Ÿã€ã¨ææ¡ˆã—ã¦ãã¦ãã‚Œã¦ã„ã¾ã™ã€‚  
ã€Œã‚ã‹ã£ã¦ã‚‹ãªã‚‰è£œã£ã¦ãã‚Œã¦ã‚‚ã„ã„ã®ã«...ã€ã¨ã„ã†æ°—ã‚‚ã—ã¾ã™ãŒã€æ°—ã‚’å–ã‚Šç›´ã—ã¦`do`ã‚’ä»˜ã‘è¶³ã—ã¾ã—ã‚‡ã†ã€‚

## èª²é¡Œã®è§£ãæ–¹

`getContents`ã§å–å¾—ã—ãŸæ¨™æº–å…¥åŠ›ã®æ–‡å­—åˆ—ã‚’ã€ç´°ã„å·¦çŸ¢å° `<-` ã§å–ã‚Šå‡ºã—ã€é©å½“ãªå¤‰æ•°ã«ä»£å…¥ã—ã¦ãã ã•ã„ã€‚  
ãã®ä»£å…¥ã—ãŸå¤‰æ•°ã«å¯¾ã—ã¦ã€ã€Œæ”¹è¡Œæ–‡å­—ã§åŒºåˆ‡ã£ã¦ã€é€†é †ã«ä¸¦ã³æ›¿ãˆã€ã‚‹é–¢æ•°ã‚’é †ç•ªã«é©ç”¨ã—ã¾ã—ã‚‡ã†ã€‚  
æœ€å¾Œã¯é€†é †ã«ãªã£ãŸãƒªã‚¹ãƒˆã‚’æ”¹è¡Œæ–‡å­—ã§çµåˆã—ç›´ã—ã€`putStr`ã§å‡ºåŠ›ã™ã‚Œã°ãƒãƒƒãƒãƒªã§ã™ã€‚  
ã‚ã£ã€ã™ã¹ã¦`do`è¨˜æ³•ã®ä¸­ã«æ›¸ãã®ã‚’ãŠå¿˜ã‚Œãªãã€‚

## ã‚³ãƒ©ãƒ : ã€Œä»£å…¥ã€ã‹ã€ŒæŸç¸›ã€ã‹

ã¨ã“ã‚ã§ã€èª­è€…ã®çš†ã•ã‚“ã®ä¸­ã«ã¯ã€ã€ŒHaskellã§ã¯ã€ä»£å…¥ (assignment)ã€ã¨ã„ã†è¨€è‘‰ã¯ä½¿ã‚ãªã„ã‚ˆã€‚ã€æŸç¸› (binding)ã€ã ã‚ˆã€ã¨ã„ã†ä¸»å¼µã‚’èã„ãŸã“ã¨ãŒã‚ã‚‹ã‹ã‚‚çŸ¥ã‚Œã¾ã›ã‚“ï¼ˆ[ä¾‹ãˆã°ã“ã‚Œ][qiita]ï¼‰ã€‚  
`input <- getContents`ã¨ã„ã†è¡Œã¯ã€ã€Œ`input`ã¨ã„ã†å¤‰æ•°ã«`getContents`ã®çµæœã‚’**æŸç¸›ã™ã‚‹**ã€ã¨ã„ã†ã‚ˆã†ãªèª¬æ˜ã¯å®Ÿéš›ã—ã°ã—ã°ã‚ã‚Šã¾ã™ã€‚  
ã—ã‹ã—ã“ã®å½“å…¥é–€ã€Œå¤±æ•—ã—ãªãŒã‚‰å­¦ã¶Haskellå…¥é–€ã€ã§ã¯ã€ã€Œç†è«–çš„ãªèƒŒæ™¯ã®é•ã„ã¯ã‚ã‚‹ã‚‚ã®ã®ã€å°‘ãªãã¨ã‚‚ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ã„ã¦å®Ÿè¡Œã™ã‚‹ã ã‘ã®æˆ‘ã€…ã‹ã‚‰ã¿ã‚Œã°ã€å®Ÿç”¨ä¸Šã®é•ã„ã¯ã»ã¨ã‚“ã©ãªã„ã€ã¨ã„ã†ç«‹å ´ã‹ã‚‰ã€èª­è€…ã«ã¨ã£ã¦ã‚ˆã‚Šè¦ªã—ã¿ã®æ·±ã„ã§ã‚ã‚ã†ã€Œä»£å…¥ã€ã¨ã„ã†å˜èªã‚’æ•¢ãˆã¦ä½¿ã£ã¦ã„ã¾ã™ã€‚  
ã“ã®å•é¡Œã«ã¤ã„ã¦ã®è©³ç´°ã¯[ã“ã¡ã‚‰][issue28]ã‚„[ã“ã¡ã‚‰][pr35]ã€ãã‚Œã‹ã‚‰[Slackã«ãŠã‘ã‚‹ã“ã®ã‚ãŸã‚Šã®è­°è«–][slack1]ã¨[ãã®ç¶šã][slack2]ï¼ˆJSONã§èª­ã¿ã«ãã„ã§ã™ãŒã‚ã—ã‹ã‚‰ãš...ï¼‰ã‚‚ã”è¦§ãã ã•ã„ã€‚

[qiita]: https://qiita.com/lotz/items/aca1d179c14d4dca5099 "Haskellã®å¤‰æ•°ã«ã¯å€¤ã‚’ä»£å…¥ã—ã¾ã›ã‚“ã€æŸç¸›ã—ã¾ã™ã€‚"
[issue28]: https://github.com/haskell-jp/makeMistakesToLearnHaskell/issues/28 "å†ä»£å…¥ãŒã§ããªã„ã“ã¨ã‚„ã€ŒæŸç¸›ã€ã¨ã„ã†å˜èªã«ã¤ã„ã¦è§¦ã‚Œã‚‹ #28"
[pr35]: https://github.com/haskell-jp/makeMistakesToLearnHaskell/pull/35 "Fix #28 ä»£å…¥ã¨æŸç¸›ã®åŒºåˆ¥ã«ã¤ã„ã¦è¿½è¨˜ #35"
[slack1]: https://github.com/haskell-jp/slack-log/blob/master/doc/json/CD87P78HF/3.json#L260-L302
[slack2]: https://github.com/haskell-jp/slack-log/blob/master/doc/json/CD87P78HF/4.json#L1-L80
